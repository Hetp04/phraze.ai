function BS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function $S(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T_={exports:{}},tu={},k_={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),HS=Symbol.for("react.portal"),WS=Symbol.for("react.fragment"),VS=Symbol.for("react.strict_mode"),GS=Symbol.for("react.profiler"),qS=Symbol.for("react.provider"),KS=Symbol.for("react.context"),YS=Symbol.for("react.forward_ref"),QS=Symbol.for("react.suspense"),XS=Symbol.for("react.memo"),JS=Symbol.for("react.lazy"),Ng=Symbol.iterator;function ZS(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var N_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R_=Object.assign,P_={};function Ws(t,e,n){this.props=t,this.context=e,this.refs=P_,this.updater=n||N_}Ws.prototype.isReactComponent={};Ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function b_(){}b_.prototype=Ws.prototype;function Mf(t,e,n){this.props=t,this.context=e,this.refs=P_,this.updater=n||N_}var Ff=Mf.prototype=new b_;Ff.constructor=Mf;R_(Ff,Ws.prototype);Ff.isPureReactComponent=!0;var Rg=Array.isArray,A_=Object.prototype.hasOwnProperty,Uf={current:null},j_={key:!0,ref:!0,__self:!0,__source:!0};function O_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)A_.call(e,r)&&!j_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:La,type:t,key:s,ref:o,props:i,_owner:Uf.current}}function eC(t,e){return{$$typeof:La,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===La}function tC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pg=/\/+/g;function fd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tC(""+t.key):e.toString(36)}function Bl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case La:case HS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fd(o,0):r,Rg(i)?(n="",t!=null&&(n=t.replace(Pg,"$&/")+"/"),Bl(i,e,n,"",function(d){return d})):i!=null&&(zf(i)&&(i=eC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Pg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Rg(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+fd(s,l);o+=Bl(s,e,n,c,i)}else if(c=ZS(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+fd(s,l++),o+=Bl(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yl(t,e,n){if(t==null)return t;var r=[],i=0;return Bl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function nC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},$l={transition:null},rC={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:$l,ReactCurrentOwner:Uf};function D_(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:yl,forEach:function(t,e,n){yl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yl(t,function(){e++}),e},toArray:function(t){return yl(t,function(e){return e})||[]},only:function(t){if(!zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Ws;re.Fragment=WS;re.Profiler=GS;re.PureComponent=Mf;re.StrictMode=VS;re.Suspense=QS;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rC;re.act=D_;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Uf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)A_.call(e,c)&&!j_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:La,type:t.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:KS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qS,_context:t},t.Consumer=t};re.createElement=O_;re.createFactory=function(t){var e=O_.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:YS,render:t}};re.isValidElement=zf;re.lazy=function(t){return{$$typeof:JS,_payload:{_status:-1,_result:t},_init:nC}};re.memo=function(t,e){return{$$typeof:XS,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=$l.transition;$l.transition={};try{t()}finally{$l.transition=e}};re.unstable_act=D_;re.useCallback=function(t,e){return kt.current.useCallback(t,e)};re.useContext=function(t){return kt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};re.useEffect=function(t,e){return kt.current.useEffect(t,e)};re.useId=function(){return kt.current.useId()};re.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return kt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};re.useRef=function(t){return kt.current.useRef(t)};re.useState=function(t){return kt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return kt.current.useTransition()};re.version="18.3.1";k_.exports=re;var D=k_.exports;const L_=$S(D),iC=BS({__proto__:null,default:L_},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sC=D,oC=Symbol.for("react.element"),aC=Symbol.for("react.fragment"),lC=Object.prototype.hasOwnProperty,cC=sC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uC={key:!0,ref:!0,__self:!0,__source:!0};function M_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lC.call(e,r)&&!uC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oC,type:t,key:s,ref:o,props:i,_owner:cC.current}}tu.Fragment=aC;tu.jsx=M_;tu.jsxs=M_;T_.exports=tu;var u=T_.exports,ih={},F_={exports:{}},qt={},U_={exports:{}},z_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,V){var q=B.length;B.push(V);e:for(;0<q;){var ie=q-1>>>1,ae=B[ie];if(0<i(ae,V))B[ie]=V,B[q]=ae,q=ie;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var V=B[0],q=B.pop();if(q!==V){B[0]=q;e:for(var ie=0,ae=B.length,le=ae>>>1;ie<le;){var ht=2*(ie+1)-1,et=B[ht],at=ht+1,F=B[at];if(0>i(et,q))at<ae&&0>i(F,et)?(B[ie]=F,B[at]=q,ie=at):(B[ie]=et,B[ht]=q,ie=ht);else if(at<ae&&0>i(F,q))B[ie]=F,B[at]=q,ie=at;else break e}}return V}function i(B,V){var q=B.sortIndex-V.sortIndex;return q!==0?q:B.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,p=null,g=3,k=!1,T=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=B)r(d),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(d)}}function j(B){if(R=!1,I(B),!T)if(n(c)!==null)T=!0,Rt(L);else{var V=n(d);V!==null&&We(j,V.startTime-B)}}function L(B,V){T=!1,R&&(R=!1,x(v),v=-1),k=!0;var q=g;try{for(I(V),p=n(c);p!==null&&(!(p.expirationTime>V)||B&&!N());){var ie=p.callback;if(typeof ie=="function"){p.callback=null,g=p.priorityLevel;var ae=ie(p.expirationTime<=V);V=t.unstable_now(),typeof ae=="function"?p.callback=ae:p===n(c)&&r(c),I(V)}else r(c);p=n(c)}if(p!==null)var le=!0;else{var ht=n(d);ht!==null&&We(j,ht.startTime-V),le=!1}return le}finally{p=null,g=q,k=!1}}var z=!1,E=null,v=-1,w=5,C=-1;function N(){return!(t.unstable_now()-C<w)}function P(){if(E!==null){var B=t.unstable_now();C=B;var V=!0;try{V=E(!0,B)}finally{V?S():(z=!1,E=null)}}else z=!1}var S;if(typeof _=="function")S=function(){_(P)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Me=Le.port2;Le.port1.onmessage=P,S=function(){Me.postMessage(null)}}else S=function(){O(P,0)};function Rt(B){E=B,z||(z=!0,S())}function We(B,V){v=O(function(){B(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){T||k||(T=!0,Rt(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var q=g;g=V;try{return B()}finally{g=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=g;g=B;try{return V()}finally{g=q}},t.unstable_scheduleCallback=function(B,V,q){var ie=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ie+q:ie):q=ie,B){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=q+ae,B={id:m++,callback:V,priorityLevel:B,startTime:q,expirationTime:ae,sortIndex:-1},q>ie?(B.sortIndex=q,e(d,B),n(c)===null&&B===n(d)&&(R?(x(v),v=-1):R=!0,We(j,q-ie))):(B.sortIndex=ae,e(c,B),T||k||(T=!0,Rt(L))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var V=g;return function(){var q=g;g=V;try{return B.apply(this,arguments)}finally{g=q}}}})(z_);U_.exports=z_;var dC=U_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC=D,Vt=dC;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B_=new Set,ta={};function ji(t,e){ks(t,e),ks(t+"Capture",e)}function ks(t,e){for(ta[t]=e,t=0;t<e.length;t++)B_.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sh=Object.prototype.hasOwnProperty,fC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bg={},Ag={};function pC(t){return sh.call(Ag,t)?!0:sh.call(bg,t)?!1:fC.test(t)?Ag[t]=!0:(bg[t]=!0,!1)}function mC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gC(t,e,n,r){if(e===null||typeof e>"u"||mC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bf=/[\-:]([a-z])/g;function $f(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bf,$f);dt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bf,$f);dt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bf,$f);dt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hf(t,e,n,r){var i=dt.hasOwnProperty(e)?dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gC(e,n,i,r)&&(n=null),r||i===null?pC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=hC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vl=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),Wf=Symbol.for("react.strict_mode"),oh=Symbol.for("react.profiler"),$_=Symbol.for("react.provider"),H_=Symbol.for("react.context"),Vf=Symbol.for("react.forward_ref"),ah=Symbol.for("react.suspense"),lh=Symbol.for("react.suspense_list"),Gf=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),W_=Symbol.for("react.offscreen"),jg=Symbol.iterator;function mo(t){return t===null||typeof t!="object"?null:(t=jg&&t[jg]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,pd;function Po(t){if(pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pd=e&&e[1]||""}return`
`+pd+t}var md=!1;function gd(t,e){if(!t||md)return"";md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Po(t):""}function yC(t){switch(t.tag){case 5:return Po(t.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 2:case 15:return t=gd(t.type,!1),t;case 11:return t=gd(t.type.render,!1),t;case 1:return t=gd(t.type,!0),t;default:return""}}function ch(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case es:return"Portal";case oh:return"Profiler";case Wf:return"StrictMode";case ah:return"Suspense";case lh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H_:return(t.displayName||"Context")+".Consumer";case $_:return(t._context.displayName||"Context")+".Provider";case Vf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gf:return e=t.displayName||null,e!==null?e:ch(t.type)||"Memo";case yr:e=t._payload,t=t._init;try{return ch(t(e))}catch{}}return null}function vC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ch(e);case 8:return e===Wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function V_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _C(t){var e=V_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _l(t){t._valueTracker||(t._valueTracker=_C(t))}function G_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=V_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uh(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Og(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q_(t,e){e=e.checked,e!=null&&Hf(t,"checked",e,!1)}function dh(t,e){q_(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hh(t,e.type,n):e.hasOwnProperty("defaultValue")&&hh(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hh(t,e,n){(e!=="number"||rc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bo=Array.isArray;function ps(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function fh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(bo(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function K_(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Y_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ph(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Y_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wl,Q_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wl=wl||document.createElement("div"),wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function na(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wC=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(t){wC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fo[e]=Fo[t]})});function X_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fo.hasOwnProperty(t)&&Fo[t]?(""+e).trim():e+"px"}function J_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=X_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var EC=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mh(t,e){if(e){if(EC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function gh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yh=null;function qf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vh=null,ms=null,gs=null;function Fg(t){if(t=Ua(t)){if(typeof vh!="function")throw Error(M(280));var e=t.stateNode;e&&(e=ou(e),vh(t.stateNode,t.type,e))}}function Z_(t){ms?gs?gs.push(t):gs=[t]:ms=t}function e0(){if(ms){var t=ms,e=gs;if(gs=ms=null,Fg(t),e)for(t=0;t<e.length;t++)Fg(e[t])}}function t0(t,e){return t(e)}function n0(){}var yd=!1;function r0(t,e,n){if(yd)return t(e,n);yd=!0;try{return t0(t,e,n)}finally{yd=!1,(ms!==null||gs!==null)&&(n0(),e0())}}function ra(t,e){var n=t.stateNode;if(n===null)return null;var r=ou(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var _h=!1;if(nr)try{var go={};Object.defineProperty(go,"passive",{get:function(){_h=!0}}),window.addEventListener("test",go,go),window.removeEventListener("test",go,go)}catch{_h=!1}function xC(t,e,n,r,i,s,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Uo=!1,ic=null,sc=!1,wh=null,SC={onError:function(t){Uo=!0,ic=t}};function CC(t,e,n,r,i,s,o,l,c){Uo=!1,ic=null,xC.apply(SC,arguments)}function IC(t,e,n,r,i,s,o,l,c){if(CC.apply(this,arguments),Uo){if(Uo){var d=ic;Uo=!1,ic=null}else throw Error(M(198));sc||(sc=!0,wh=d)}}function Oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ug(t){if(Oi(t)!==t)throw Error(M(188))}function TC(t){var e=t.alternate;if(!e){if(e=Oi(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ug(i),t;if(s===r)return Ug(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function s0(t){return t=TC(t),t!==null?o0(t):null}function o0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=o0(t);if(e!==null)return e;t=t.sibling}return null}var a0=Vt.unstable_scheduleCallback,zg=Vt.unstable_cancelCallback,kC=Vt.unstable_shouldYield,NC=Vt.unstable_requestPaint,qe=Vt.unstable_now,RC=Vt.unstable_getCurrentPriorityLevel,Kf=Vt.unstable_ImmediatePriority,l0=Vt.unstable_UserBlockingPriority,oc=Vt.unstable_NormalPriority,PC=Vt.unstable_LowPriority,c0=Vt.unstable_IdlePriority,nu=null,bn=null;function bC(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(nu,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:OC,AC=Math.log,jC=Math.LN2;function OC(t){return t>>>=0,t===0?32:31-(AC(t)/jC|0)|0}var El=64,xl=4194304;function Ao(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ac(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ao(l):(s&=o,s!==0&&(r=Ao(s)))}else o=n&~i,o!==0?r=Ao(o):s!==0&&(r=Ao(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),i=1<<n,r|=t[n],e&=~i;return r}function DC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-yn(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=DC(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Eh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function u0(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function MC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-yn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Yf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function d0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var h0,Qf,f0,p0,m0,xh=!1,Sl=[],Pr=null,br=null,Ar=null,ia=new Map,sa=new Map,_r=[],FC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bg(t,e){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(e.pointerId)}}function yo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ua(e),e!==null&&Qf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function UC(t,e,n,r,i){switch(e){case"focusin":return Pr=yo(Pr,t,e,n,r,i),!0;case"dragenter":return br=yo(br,t,e,n,r,i),!0;case"mouseover":return Ar=yo(Ar,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ia.set(s,yo(ia.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sa.set(s,yo(sa.get(s)||null,t,e,n,r,i)),!0}return!1}function g0(t){var e=di(t.target);if(e!==null){var n=Oi(e);if(n!==null){if(e=n.tag,e===13){if(e=i0(n),e!==null){t.blockedOn=e,m0(t.priority,function(){f0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yh=r,n.target.dispatchEvent(r),yh=null}else return e=Ua(n),e!==null&&Qf(e),t.blockedOn=n,!1;e.shift()}return!0}function $g(t,e,n){Hl(t)&&n.delete(e)}function zC(){xh=!1,Pr!==null&&Hl(Pr)&&(Pr=null),br!==null&&Hl(br)&&(br=null),Ar!==null&&Hl(Ar)&&(Ar=null),ia.forEach($g),sa.forEach($g)}function vo(t,e){t.blockedOn===e&&(t.blockedOn=null,xh||(xh=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,zC)))}function oa(t){function e(i){return vo(i,t)}if(0<Sl.length){vo(Sl[0],t);for(var n=1;n<Sl.length;n++){var r=Sl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pr!==null&&vo(Pr,t),br!==null&&vo(br,t),Ar!==null&&vo(Ar,t),ia.forEach(e),sa.forEach(e),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)g0(n),n.blockedOn===null&&_r.shift()}var ys=cr.ReactCurrentBatchConfig,lc=!0;function BC(t,e,n,r){var i=ve,s=ys.transition;ys.transition=null;try{ve=1,Xf(t,e,n,r)}finally{ve=i,ys.transition=s}}function $C(t,e,n,r){var i=ve,s=ys.transition;ys.transition=null;try{ve=4,Xf(t,e,n,r)}finally{ve=i,ys.transition=s}}function Xf(t,e,n,r){if(lc){var i=Sh(t,e,n,r);if(i===null)Nd(t,e,r,cc,n),Bg(t,r);else if(UC(i,t,e,n,r))r.stopPropagation();else if(Bg(t,r),e&4&&-1<FC.indexOf(t)){for(;i!==null;){var s=Ua(i);if(s!==null&&h0(s),s=Sh(t,e,n,r),s===null&&Nd(t,e,r,cc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Nd(t,e,r,null,n)}}var cc=null;function Sh(t,e,n,r){if(cc=null,t=qf(r),t=di(t),t!==null)if(e=Oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cc=t,null}function y0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RC()){case Kf:return 1;case l0:return 4;case oc:case PC:return 16;case c0:return 536870912;default:return 16}default:return 16}}var Ir=null,Jf=null,Wl=null;function v0(){if(Wl)return Wl;var t,e=Jf,n=e.length,r,i="value"in Ir?Ir.value:Ir.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wl=i.slice(t,1<r?1-r:void 0)}function Vl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function Hg(){return!1}function Kt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cl:Hg,this.isPropagationStopped=Hg,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=Kt(Vs),Fa=Be({},Vs,{view:0,detail:0}),HC=Kt(Fa),_d,wd,_o,ru=Be({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ep,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_o&&(_o&&t.type==="mousemove"?(_d=t.screenX-_o.screenX,wd=t.screenY-_o.screenY):wd=_d=0,_o=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:wd}}),Wg=Kt(ru),WC=Be({},ru,{dataTransfer:0}),VC=Kt(WC),GC=Be({},Fa,{relatedTarget:0}),Ed=Kt(GC),qC=Be({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),KC=Kt(qC),YC=Be({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QC=Kt(YC),XC=Be({},Vs,{data:0}),Vg=Kt(XC),JC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eI[t])?!!e[t]:!1}function ep(){return tI}var nI=Be({},Fa,{key:function(t){if(t.key){var e=JC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ep,charCode:function(t){return t.type==="keypress"?Vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rI=Kt(nI),iI=Be({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gg=Kt(iI),sI=Be({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ep}),oI=Kt(sI),aI=Be({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lI=Kt(aI),cI=Be({},ru,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uI=Kt(cI),dI=[9,13,27,32],tp=nr&&"CompositionEvent"in window,zo=null;nr&&"documentMode"in document&&(zo=document.documentMode);var hI=nr&&"TextEvent"in window&&!zo,_0=nr&&(!tp||zo&&8<zo&&11>=zo),qg=String.fromCharCode(32),Kg=!1;function w0(t,e){switch(t){case"keyup":return dI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function fI(t,e){switch(t){case"compositionend":return E0(e);case"keypress":return e.which!==32?null:(Kg=!0,qg);case"textInput":return t=e.data,t===qg&&Kg?null:t;default:return null}}function pI(t,e){if(ns)return t==="compositionend"||!tp&&w0(t,e)?(t=v0(),Wl=Jf=Ir=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _0&&e.locale!=="ko"?null:e.data;default:return null}}var mI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mI[t.type]:e==="textarea"}function x0(t,e,n,r){Z_(r),e=uc(e,"onChange"),0<e.length&&(n=new Zf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bo=null,aa=null;function gI(t){j0(t,0)}function iu(t){var e=ss(t);if(G_(e))return t}function yI(t,e){if(t==="change")return e}var S0=!1;if(nr){var xd;if(nr){var Sd="oninput"in document;if(!Sd){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),Sd=typeof Qg.oninput=="function"}xd=Sd}else xd=!1;S0=xd&&(!document.documentMode||9<document.documentMode)}function Xg(){Bo&&(Bo.detachEvent("onpropertychange",C0),aa=Bo=null)}function C0(t){if(t.propertyName==="value"&&iu(aa)){var e=[];x0(e,aa,t,qf(t)),r0(gI,e)}}function vI(t,e,n){t==="focusin"?(Xg(),Bo=e,aa=n,Bo.attachEvent("onpropertychange",C0)):t==="focusout"&&Xg()}function _I(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(aa)}function wI(t,e){if(t==="click")return iu(e)}function EI(t,e){if(t==="input"||t==="change")return iu(e)}function xI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:xI;function la(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sh.call(e,i)||!En(t[i],e[i]))return!1}return!0}function Jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zg(t,e){var n=Jg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jg(n)}}function I0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?I0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function T0(){for(var t=window,e=rc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rc(t.document)}return e}function np(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SI(t){var e=T0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&I0(n.ownerDocument.documentElement,n)){if(r!==null&&np(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Zg(n,s);var o=Zg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CI=nr&&"documentMode"in document&&11>=document.documentMode,rs=null,Ch=null,$o=null,Ih=!1;function ey(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ih||rs==null||rs!==rc(r)||(r=rs,"selectionStart"in r&&np(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$o&&la($o,r)||($o=r,r=uc(Ch,"onSelect"),0<r.length&&(e=new Zf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rs)))}function Il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var is={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},Cd={},k0={};nr&&(k0=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function su(t){if(Cd[t])return Cd[t];if(!is[t])return t;var e=is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k0)return Cd[t]=e[n];return t}var N0=su("animationend"),R0=su("animationiteration"),P0=su("animationstart"),b0=su("transitionend"),A0=new Map,ty="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(t,e){A0.set(t,e),ji(e,[t])}for(var Id=0;Id<ty.length;Id++){var Td=ty[Id],II=Td.toLowerCase(),TI=Td[0].toUpperCase()+Td.slice(1);Xr(II,"on"+TI)}Xr(N0,"onAnimationEnd");Xr(R0,"onAnimationIteration");Xr(P0,"onAnimationStart");Xr("dblclick","onDoubleClick");Xr("focusin","onFocus");Xr("focusout","onBlur");Xr(b0,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kI=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function ny(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,IC(r,e,void 0,t),t.currentTarget=null}function j0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;ny(i,l,d),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;ny(i,l,d),s=c}}}if(sc)throw t=wh,sc=!1,wh=null,t}function Ne(t,e){var n=e[Ph];n===void 0&&(n=e[Ph]=new Set);var r=t+"__bubble";n.has(r)||(O0(e,t,2,!1),n.add(r))}function kd(t,e,n){var r=0;e&&(r|=4),O0(n,t,r,e)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[Tl]){t[Tl]=!0,B_.forEach(function(n){n!=="selectionchange"&&(kI.has(n)||kd(n,!1,t),kd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tl]||(e[Tl]=!0,kd("selectionchange",!1,e))}}function O0(t,e,n,r){switch(y0(e)){case 1:var i=BC;break;case 4:i=$C;break;default:i=Xf}n=i.bind(null,e,n,t),i=void 0,!_h||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=di(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}r0(function(){var d=s,m=qf(n),p=[];e:{var g=A0.get(t);if(g!==void 0){var k=Zf,T=t;switch(t){case"keypress":if(Vl(n)===0)break e;case"keydown":case"keyup":k=rI;break;case"focusin":T="focus",k=Ed;break;case"focusout":T="blur",k=Ed;break;case"beforeblur":case"afterblur":k=Ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=VC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=oI;break;case N0:case R0:case P0:k=KC;break;case b0:k=lI;break;case"scroll":k=HC;break;case"wheel":k=uI;break;case"copy":case"cut":case"paste":k=QC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Gg}var R=(e&4)!==0,O=!R&&t==="scroll",x=R?g!==null?g+"Capture":null:g;R=[];for(var _=d,I;_!==null;){I=_;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,x!==null&&(j=ra(_,x),j!=null&&R.push(ua(_,j,I)))),O)break;_=_.return}0<R.length&&(g=new k(g,T,null,n,m),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",g&&n!==yh&&(T=n.relatedTarget||n.fromElement)&&(di(T)||T[rr]))break e;if((k||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,k?(T=n.relatedTarget||n.toElement,k=d,T=T?di(T):null,T!==null&&(O=Oi(T),T!==O||T.tag!==5&&T.tag!==6)&&(T=null)):(k=null,T=d),k!==T)){if(R=Wg,j="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=Gg,j="onPointerLeave",x="onPointerEnter",_="pointer"),O=k==null?g:ss(k),I=T==null?g:ss(T),g=new R(j,_+"leave",k,n,m),g.target=O,g.relatedTarget=I,j=null,di(m)===d&&(R=new R(x,_+"enter",T,n,m),R.target=I,R.relatedTarget=O,j=R),O=j,k&&T)t:{for(R=k,x=T,_=0,I=R;I;I=Xi(I))_++;for(I=0,j=x;j;j=Xi(j))I++;for(;0<_-I;)R=Xi(R),_--;for(;0<I-_;)x=Xi(x),I--;for(;_--;){if(R===x||x!==null&&R===x.alternate)break t;R=Xi(R),x=Xi(x)}R=null}else R=null;k!==null&&ry(p,g,k,R,!1),T!==null&&O!==null&&ry(p,O,T,R,!0)}}e:{if(g=d?ss(d):window,k=g.nodeName&&g.nodeName.toLowerCase(),k==="select"||k==="input"&&g.type==="file")var L=yI;else if(Yg(g))if(S0)L=EI;else{L=_I;var z=vI}else(k=g.nodeName)&&k.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=wI);if(L&&(L=L(t,d))){x0(p,L,n,m);break e}z&&z(t,g,d),t==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&hh(g,"number",g.value)}switch(z=d?ss(d):window,t){case"focusin":(Yg(z)||z.contentEditable==="true")&&(rs=z,Ch=d,$o=null);break;case"focusout":$o=Ch=rs=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,ey(p,n,m);break;case"selectionchange":if(CI)break;case"keydown":case"keyup":ey(p,n,m)}var E;if(tp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ns?w0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(_0&&n.locale!=="ko"&&(ns||v!=="onCompositionStart"?v==="onCompositionEnd"&&ns&&(E=v0()):(Ir=m,Jf="value"in Ir?Ir.value:Ir.textContent,ns=!0)),z=uc(d,v),0<z.length&&(v=new Vg(v,t,null,n,m),p.push({event:v,listeners:z}),E?v.data=E:(E=E0(n),E!==null&&(v.data=E)))),(E=hI?fI(t,n):pI(t,n))&&(d=uc(d,"onBeforeInput"),0<d.length&&(m=new Vg("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=E))}j0(p,e)})}function ua(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ra(t,n),s!=null&&r.unshift(ua(t,s,i)),s=ra(t,e),s!=null&&r.push(ua(t,s,i))),t=t.return}return r}function Xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ry(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=ra(n,s),c!=null&&o.unshift(ua(n,c,l))):i||(c=ra(n,s),c!=null&&o.push(ua(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var NI=/\r\n?/g,RI=/\u0000|\uFFFD/g;function iy(t){return(typeof t=="string"?t:""+t).replace(NI,`
`).replace(RI,"")}function kl(t,e,n){if(e=iy(e),iy(t)!==e&&n)throw Error(M(425))}function dc(){}var Th=null,kh=null;function Nh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,PI=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,bI=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(t){return sy.resolve(null).then(t).catch(AI)}:Rh;function AI(t){setTimeout(function(){throw t})}function Rd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),oa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);oa(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Gs,da="__reactProps$"+Gs,rr="__reactContainer$"+Gs,Ph="__reactEvents$"+Gs,jI="__reactListeners$"+Gs,OI="__reactHandles$"+Gs;function di(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oy(t);t!==null;){if(n=t[Nn])return n;t=oy(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[Nn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function ou(t){return t[da]||null}var bh=[],os=-1;function Jr(t){return{current:t}}function Re(t){0>os||(t.current=bh[os],bh[os]=null,os--)}function Se(t,e){os++,bh[os]=t.current,t.current=e}var Wr={},_t=Jr(Wr),Lt=Jr(!1),vi=Wr;function Ns(t,e){var n=t.type.contextTypes;if(!n)return Wr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Mt(t){return t=t.childContextTypes,t!=null}function hc(){Re(Lt),Re(_t)}function ay(t,e,n){if(_t.current!==Wr)throw Error(M(168));Se(_t,e),Se(Lt,n)}function D0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,vC(t)||"Unknown",i));return Be({},n,r)}function fc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wr,vi=_t.current,Se(_t,t),Se(Lt,Lt.current),!0}function ly(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=D0(t,e,vi),r.__reactInternalMemoizedMergedChildContext=t,Re(Lt),Re(_t),Se(_t,t)):Re(Lt),Se(Lt,n)}var Vn=null,au=!1,Pd=!1;function L0(t){Vn===null?Vn=[t]:Vn.push(t)}function DI(t){au=!0,L0(t)}function Zr(){if(!Pd&&Vn!==null){Pd=!0;var t=0,e=ve;try{var n=Vn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,au=!1}catch(i){throw Vn!==null&&(Vn=Vn.slice(t+1)),a0(Kf,Zr),i}finally{ve=e,Pd=!1}}return null}var as=[],ls=0,pc=null,mc=0,Jt=[],Zt=0,_i=null,qn=1,Kn="";function ai(t,e){as[ls++]=mc,as[ls++]=pc,pc=t,mc=e}function M0(t,e,n){Jt[Zt++]=qn,Jt[Zt++]=Kn,Jt[Zt++]=_i,_i=t;var r=qn;t=Kn;var i=32-yn(r)-1;r&=~(1<<i),n+=1;var s=32-yn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qn=1<<32-yn(e)+i|n<<i|r,Kn=s+t}else qn=1<<s|n<<i|r,Kn=t}function rp(t){t.return!==null&&(ai(t,1),M0(t,1,0))}function ip(t){for(;t===pc;)pc=as[--ls],as[ls]=null,mc=as[--ls],as[ls]=null;for(;t===_i;)_i=Jt[--Zt],Jt[Zt]=null,Kn=Jt[--Zt],Jt[Zt]=null,qn=Jt[--Zt],Jt[Zt]=null}var Wt=null,Ht=null,Oe=!1,pn=null;function F0(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_i!==null?{id:qn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Ht=null,!0):!1;default:return!1}}function Ah(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jh(t){if(Oe){var e=Ht;if(e){var n=e;if(!cy(t,e)){if(Ah(t))throw Error(M(418));e=jr(n.nextSibling);var r=Wt;e&&cy(t,e)?F0(r,n):(t.flags=t.flags&-4097|2,Oe=!1,Wt=t)}}else{if(Ah(t))throw Error(M(418));t.flags=t.flags&-4097|2,Oe=!1,Wt=t}}}function uy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function Nl(t){if(t!==Wt)return!1;if(!Oe)return uy(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nh(t.type,t.memoizedProps)),e&&(e=Ht)){if(Ah(t))throw U0(),Error(M(418));for(;e;)F0(t,e),e=jr(e.nextSibling)}if(uy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Wt?jr(t.stateNode.nextSibling):null;return!0}function U0(){for(var t=Ht;t;)t=jr(t.nextSibling)}function Rs(){Ht=Wt=null,Oe=!1}function sp(t){pn===null?pn=[t]:pn.push(t)}var LI=cr.ReactCurrentBatchConfig;function wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Rl(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dy(t){var e=t._init;return e(t._payload)}function z0(t){function e(x,_){if(t){var I=x.deletions;I===null?(x.deletions=[_],x.flags|=16):I.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=Mr(x,_),x.index=0,x.sibling=null,x}function s(x,_,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<_?(x.flags|=2,_):I):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,_,I,j){return _===null||_.tag!==6?(_=Md(I,x.mode,j),_.return=x,_):(_=i(_,I),_.return=x,_)}function c(x,_,I,j){var L=I.type;return L===ts?m(x,_,I.props.children,j,I.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===yr&&dy(L)===_.type)?(j=i(_,I.props),j.ref=wo(x,_,I),j.return=x,j):(j=Jl(I.type,I.key,I.props,null,x.mode,j),j.ref=wo(x,_,I),j.return=x,j)}function d(x,_,I,j){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=Fd(I,x.mode,j),_.return=x,_):(_=i(_,I.children||[]),_.return=x,_)}function m(x,_,I,j,L){return _===null||_.tag!==7?(_=gi(I,x.mode,j,L),_.return=x,_):(_=i(_,I),_.return=x,_)}function p(x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Md(""+_,x.mode,I),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vl:return I=Jl(_.type,_.key,_.props,null,x.mode,I),I.ref=wo(x,null,_),I.return=x,I;case es:return _=Fd(_,x.mode,I),_.return=x,_;case yr:var j=_._init;return p(x,j(_._payload),I)}if(bo(_)||mo(_))return _=gi(_,x.mode,I,null),_.return=x,_;Rl(x,_)}return null}function g(x,_,I,j){var L=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return L!==null?null:l(x,_,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case vl:return I.key===L?c(x,_,I,j):null;case es:return I.key===L?d(x,_,I,j):null;case yr:return L=I._init,g(x,_,L(I._payload),j)}if(bo(I)||mo(I))return L!==null?null:m(x,_,I,j,null);Rl(x,I)}return null}function k(x,_,I,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(I)||null,l(_,x,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case vl:return x=x.get(j.key===null?I:j.key)||null,c(_,x,j,L);case es:return x=x.get(j.key===null?I:j.key)||null,d(_,x,j,L);case yr:var z=j._init;return k(x,_,I,z(j._payload),L)}if(bo(j)||mo(j))return x=x.get(I)||null,m(_,x,j,L,null);Rl(_,j)}return null}function T(x,_,I,j){for(var L=null,z=null,E=_,v=_=0,w=null;E!==null&&v<I.length;v++){E.index>v?(w=E,E=null):w=E.sibling;var C=g(x,E,I[v],j);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(x,E),_=s(C,_,v),z===null?L=C:z.sibling=C,z=C,E=w}if(v===I.length)return n(x,E),Oe&&ai(x,v),L;if(E===null){for(;v<I.length;v++)E=p(x,I[v],j),E!==null&&(_=s(E,_,v),z===null?L=E:z.sibling=E,z=E);return Oe&&ai(x,v),L}for(E=r(x,E);v<I.length;v++)w=k(E,x,v,I[v],j),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?v:w.key),_=s(w,_,v),z===null?L=w:z.sibling=w,z=w);return t&&E.forEach(function(N){return e(x,N)}),Oe&&ai(x,v),L}function R(x,_,I,j){var L=mo(I);if(typeof L!="function")throw Error(M(150));if(I=L.call(I),I==null)throw Error(M(151));for(var z=L=null,E=_,v=_=0,w=null,C=I.next();E!==null&&!C.done;v++,C=I.next()){E.index>v?(w=E,E=null):w=E.sibling;var N=g(x,E,C.value,j);if(N===null){E===null&&(E=w);break}t&&E&&N.alternate===null&&e(x,E),_=s(N,_,v),z===null?L=N:z.sibling=N,z=N,E=w}if(C.done)return n(x,E),Oe&&ai(x,v),L;if(E===null){for(;!C.done;v++,C=I.next())C=p(x,C.value,j),C!==null&&(_=s(C,_,v),z===null?L=C:z.sibling=C,z=C);return Oe&&ai(x,v),L}for(E=r(x,E);!C.done;v++,C=I.next())C=k(E,x,v,C.value,j),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?v:C.key),_=s(C,_,v),z===null?L=C:z.sibling=C,z=C);return t&&E.forEach(function(P){return e(x,P)}),Oe&&ai(x,v),L}function O(x,_,I,j){if(typeof I=="object"&&I!==null&&I.type===ts&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case vl:e:{for(var L=I.key,z=_;z!==null;){if(z.key===L){if(L=I.type,L===ts){if(z.tag===7){n(x,z.sibling),_=i(z,I.props.children),_.return=x,x=_;break e}}else if(z.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===yr&&dy(L)===z.type){n(x,z.sibling),_=i(z,I.props),_.ref=wo(x,z,I),_.return=x,x=_;break e}n(x,z);break}else e(x,z);z=z.sibling}I.type===ts?(_=gi(I.props.children,x.mode,j,I.key),_.return=x,x=_):(j=Jl(I.type,I.key,I.props,null,x.mode,j),j.ref=wo(x,_,I),j.return=x,x=j)}return o(x);case es:e:{for(z=I.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(x,_.sibling),_=i(_,I.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Fd(I,x.mode,j),_.return=x,x=_}return o(x);case yr:return z=I._init,O(x,_,z(I._payload),j)}if(bo(I))return T(x,_,I,j);if(mo(I))return R(x,_,I,j);Rl(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(x,_.sibling),_=i(_,I),_.return=x,x=_):(n(x,_),_=Md(I,x.mode,j),_.return=x,x=_),o(x)):n(x,_)}return O}var Ps=z0(!0),B0=z0(!1),gc=Jr(null),yc=null,cs=null,op=null;function ap(){op=cs=yc=null}function lp(t){var e=gc.current;Re(gc),t._currentValue=e}function Oh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vs(t,e){yc=t,op=cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(op!==t)if(t={context:t,memoizedValue:e,next:null},cs===null){if(yc===null)throw Error(M(308));cs=t,yc.dependencies={lanes:0,firstContext:t}}else cs=cs.next=t;return e}var hi=null;function cp(t){hi===null?hi=[t]:hi.push(t)}function $0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cp(e)):(n.next=i.next,i.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vr=!1;function up(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ir(t,n)}return i=r.interleaved,i===null?(e.next=e,cp(r)):(e.next=i.next,i.next=e),r.interleaved=e,ir(t,n)}function Gl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yf(t,n)}}function hy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vc(t,e,n,r){var i=t.updateQueue;vr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?s=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;o=0,m=d=c=null,l=s;do{var g=l.lane,k=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,R=l;switch(g=e,k=n,R.tag){case 1:if(T=R.payload,typeof T=="function"){p=T.call(k,p,g);break e}p=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=R.payload,g=typeof T=="function"?T.call(k,p,g):T,g==null)break e;p=Be({},p,g);break e;case 2:vr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else k={eventTime:k,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=k,c=p):m=m.next=k,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(m===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ei|=o,t.lanes=o,t.memoizedState=p}}function fy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var za={},An=Jr(za),ha=Jr(za),fa=Jr(za);function fi(t){if(t===za)throw Error(M(174));return t}function dp(t,e){switch(Se(fa,e),Se(ha,t),Se(An,za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ph(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ph(e,t)}Re(An),Se(An,e)}function bs(){Re(An),Re(ha),Re(fa)}function W0(t){fi(fa.current);var e=fi(An.current),n=ph(e,t.type);e!==n&&(Se(ha,t),Se(An,n))}function hp(t){ha.current===t&&(Re(An),Re(ha))}var Fe=Jr(0);function _c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bd=[];function fp(){for(var t=0;t<bd.length;t++)bd[t]._workInProgressVersionPrimary=null;bd.length=0}var ql=cr.ReactCurrentDispatcher,Ad=cr.ReactCurrentBatchConfig,wi=0,ze=null,Xe=null,nt=null,wc=!1,Ho=!1,pa=0,MI=0;function mt(){throw Error(M(321))}function pp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function mp(t,e,n,r,i,s){if(wi=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ql.current=t===null||t.memoizedState===null?BI:$I,t=n(r,i),Ho){s=0;do{if(Ho=!1,pa=0,25<=s)throw Error(M(301));s+=1,nt=Xe=null,e.updateQueue=null,ql.current=HI,t=n(r,i)}while(Ho)}if(ql.current=Ec,e=Xe!==null&&Xe.next!==null,wi=0,nt=Xe=ze=null,wc=!1,e)throw Error(M(300));return t}function gp(){var t=pa!==0;return pa=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?ze.memoizedState=nt=t:nt=nt.next=t,nt}function an(){if(Xe===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=nt===null?ze.memoizedState:nt.next;if(e!==null)nt=e,Xe=t;else{if(t===null)throw Error(M(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},nt===null?ze.memoizedState=nt=t:nt=nt.next=t}return nt}function ma(t,e){return typeof e=="function"?e(t):e}function jd(t){var e=an(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Xe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,d=s;do{var m=d.lane;if((wi&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,ze.lanes|=m,Ei|=m}d=d.next}while(d!==null&&d!==s);c===null?o=r:c.next=l,En(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ze.lanes|=s,Ei|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Od(t){var e=an(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);En(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function V0(){}function G0(t,e){var n=ze,r=an(),i=e(),s=!En(r.memoizedState,i);if(s&&(r.memoizedState=i,Ot=!0),r=r.queue,yp(Y0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,ga(9,K0.bind(null,n,r,i,e),void 0,null),st===null)throw Error(M(349));wi&30||q0(n,e,i)}return i}function q0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function K0(t,e,n,r){e.value=n,e.getSnapshot=r,Q0(e)&&X0(t)}function Y0(t,e,n){return n(function(){Q0(e)&&X0(t)})}function Q0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function X0(t){var e=ir(t,1);e!==null&&vn(e,t,1,-1)}function py(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},e.queue=t,t=t.dispatch=zI.bind(null,ze,t),[e.memoizedState,t]}function ga(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function J0(){return an().memoizedState}function Kl(t,e,n,r){var i=kn();ze.flags|=t,i.memoizedState=ga(1|e,n,void 0,r===void 0?null:r)}function lu(t,e,n,r){var i=an();r=r===void 0?null:r;var s=void 0;if(Xe!==null){var o=Xe.memoizedState;if(s=o.destroy,r!==null&&pp(r,o.deps)){i.memoizedState=ga(e,n,s,r);return}}ze.flags|=t,i.memoizedState=ga(1|e,n,s,r)}function my(t,e){return Kl(8390656,8,t,e)}function yp(t,e){return lu(2048,8,t,e)}function Z0(t,e){return lu(4,2,t,e)}function ew(t,e){return lu(4,4,t,e)}function tw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nw(t,e,n){return n=n!=null?n.concat([t]):null,lu(4,4,tw.bind(null,e,t),n)}function vp(){}function rw(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iw(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sw(t,e,n){return wi&21?(En(n,e)||(n=u0(),ze.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function FI(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Ad.transition;Ad.transition={};try{t(!1),e()}finally{ve=n,Ad.transition=r}}function ow(){return an().memoizedState}function UI(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aw(t))lw(e,n);else if(n=$0(t,e,n,r),n!==null){var i=It();vn(n,t,r,i),cw(n,e,r)}}function zI(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aw(t))lw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,En(l,o)){var c=e.interleaved;c===null?(i.next=i,cp(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=$0(t,e,i,r),n!==null&&(i=It(),vn(n,t,r,i),cw(n,e,r))}}function aw(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function lw(t,e){Ho=wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yf(t,n)}}var Ec={readContext:on,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},BI={readContext:on,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:my,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kl(4194308,4,tw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kl(4,2,t,e)},useMemo:function(t,e){var n=kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=UI.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:py,useDebugValue:vp,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=py(!1),e=t[0];return t=FI.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,i=kn();if(Oe){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),st===null)throw Error(M(349));wi&30||q0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,my(Y0.bind(null,r,s,t),[t]),r.flags|=2048,ga(9,K0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=kn(),e=st.identifierPrefix;if(Oe){var n=Kn,r=qn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$I={readContext:on,useCallback:rw,useContext:on,useEffect:yp,useImperativeHandle:nw,useInsertionEffect:Z0,useLayoutEffect:ew,useMemo:iw,useReducer:jd,useRef:J0,useState:function(){return jd(ma)},useDebugValue:vp,useDeferredValue:function(t){var e=an();return sw(e,Xe.memoizedState,t)},useTransition:function(){var t=jd(ma)[0],e=an().memoizedState;return[t,e]},useMutableSource:V0,useSyncExternalStore:G0,useId:ow,unstable_isNewReconciler:!1},HI={readContext:on,useCallback:rw,useContext:on,useEffect:yp,useImperativeHandle:nw,useInsertionEffect:Z0,useLayoutEffect:ew,useMemo:iw,useReducer:Od,useRef:J0,useState:function(){return Od(ma)},useDebugValue:vp,useDeferredValue:function(t){var e=an();return Xe===null?e.memoizedState=t:sw(e,Xe.memoizedState,t)},useTransition:function(){var t=Od(ma)[0],e=an().memoizedState;return[t,e]},useMutableSource:V0,useSyncExternalStore:G0,useId:ow,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cu={isMounted:function(t){return(t=t._reactInternals)?Oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),i=Lr(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(vn(e,t,i,r),Gl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),i=Lr(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(vn(e,t,i,r),Gl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=Lr(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Or(t,i,r),e!==null&&(vn(e,t,r,n),Gl(e,t,r))}};function gy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!la(n,r)||!la(i,s):!0}function uw(t,e,n){var r=!1,i=Wr,s=e.contextType;return typeof s=="object"&&s!==null?s=on(s):(i=Mt(e)?vi:_t.current,r=e.contextTypes,s=(r=r!=null)?Ns(t,i):Wr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cu.enqueueReplaceState(e,e.state,null)}function Lh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},up(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=on(s):(s=Mt(e)?vi:_t.current,i.context=Ns(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cu.enqueueReplaceState(i,i.state,null),vc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function As(t,e){try{var n="",r=e;do n+=yC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WI=typeof WeakMap=="function"?WeakMap:Map;function dw(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sc||(Sc=!0,qh=r),Mh(t,e)},n}function hw(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Mh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Mh(t,e),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iT.bind(null,t,e,n),e.then(t,t))}function _y(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var VI=cr.ReactCurrentOwner,Ot=!1;function xt(t,e,n,r){e.child=t===null?B0(e,null,n,r):Ps(e,t.child,n,r)}function Ey(t,e,n,r,i){n=n.render;var s=e.ref;return vs(e,i),r=mp(t,e,n,r,s,i),n=gp(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Oe&&n&&rp(e),e.flags|=1,xt(t,e,r,i),e.child)}function xy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Tp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,fw(t,e,s,r,i)):(t=Jl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:la,n(o,r)&&t.ref===e.ref)return sr(t,e,i)}return e.flags|=1,t=Mr(s,r),t.ref=e.ref,t.return=e,e.child=t}function fw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(la(s,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,sr(t,e,i)}return Fh(t,e,n,r,i)}function pw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(ds,zt),zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(ds,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(ds,zt),zt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(ds,zt),zt|=r;return xt(t,e,i,n),e.child}function mw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fh(t,e,n,r,i){var s=Mt(n)?vi:_t.current;return s=Ns(e,s),vs(e,i),n=mp(t,e,n,r,s,i),r=gp(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Oe&&r&&rp(e),e.flags|=1,xt(t,e,n,i),e.child)}function Sy(t,e,n,r,i){if(Mt(n)){var s=!0;fc(e)}else s=!1;if(vs(e,i),e.stateNode===null)Yl(t,e),uw(e,n,r),Lh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=on(d):(d=Mt(n)?vi:_t.current,d=Ns(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&yy(e,o,r,d),vr=!1;var g=e.memoizedState;o.state=g,vc(e,r,o,i),c=e.memoizedState,l!==r||g!==c||Lt.current||vr?(typeof m=="function"&&(Dh(e,n,m,r),c=e.memoizedState),(l=vr||gy(e,n,l,r,g,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,H0(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:hn(e.type,l),o.props=d,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=on(c):(c=Mt(n)?vi:_t.current,c=Ns(e,c));var k=n.getDerivedStateFromProps;(m=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==c)&&yy(e,o,r,c),vr=!1,g=e.memoizedState,o.state=g,vc(e,r,o,i);var T=e.memoizedState;l!==p||g!==T||Lt.current||vr?(typeof k=="function"&&(Dh(e,n,k,r),T=e.memoizedState),(d=vr||gy(e,n,d,r,g,T,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Uh(t,e,n,r,s,i)}function Uh(t,e,n,r,i,s){mw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ly(e,n,!1),sr(t,e,s);r=e.stateNode,VI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ps(e,t.child,null,s),e.child=Ps(e,null,l,s)):xt(t,e,l,s),e.memoizedState=r.state,i&&ly(e,n,!0),e.child}function gw(t){var e=t.stateNode;e.pendingContext?ay(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ay(t,e.context,!1),dp(t,e.containerInfo)}function Cy(t,e,n,r,i){return Rs(),sp(i),e.flags|=256,xt(t,e,n,r),e.child}var zh={dehydrated:null,treeContext:null,retryLane:0};function Bh(t){return{baseLanes:t,cachePool:null,transitions:null}}function yw(t,e,n){var r=e.pendingProps,i=Fe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Fe,i&1),t===null)return jh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hu(o,r,0,null),t=gi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bh(n),e.memoizedState=zh,t):_p(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return GI(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Mr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Mr(l,s):(s=gi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Bh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=zh,r}return s=t.child,t=s.sibling,r=Mr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _p(t,e){return e=hu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,n,r){return r!==null&&sp(r),Ps(e,t.child,null,n),t=_p(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Dd(Error(M(422))),Pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hu({mode:"visible",children:r.children},i,0,null),s=gi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ps(e,t.child,null,o),e.child.memoizedState=Bh(o),e.memoizedState=zh,s);if(!(e.mode&1))return Pl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(M(419)),r=Dd(s,r,void 0),Pl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ot||l){if(r=st,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ir(t,i),vn(r,t,i,-1))}return Ip(),r=Dd(Error(M(421))),Pl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ht=jr(i.nextSibling),Wt=e,Oe=!0,pn=null,t!==null&&(Jt[Zt++]=qn,Jt[Zt++]=Kn,Jt[Zt++]=_i,qn=t.id,Kn=t.overflow,_i=e),e=_p(e,r.children),e.flags|=4096,e)}function Iy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oh(t.return,e,n)}function Ld(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iy(t,n,e);else if(t.tag===19)Iy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&_c(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ld(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_c(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ld(e,!0,n,null,s);break;case"together":Ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qI(t,e,n){switch(e.tag){case 3:gw(e),Rs();break;case 5:W0(e);break;case 1:Mt(e.type)&&fc(e);break;case 4:dp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(gc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?yw(t,e,n):(Se(Fe,Fe.current&1),t=sr(t,e,n),t!==null?t.sibling:null);Se(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,pw(t,e,n)}return sr(t,e,n)}var _w,$h,ww,Ew;_w=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$h=function(){};ww=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fi(An.current);var s=null;switch(n){case"input":i=uh(t,i),r=uh(t,r),s=[];break;case"select":i=Be({},i,{value:void 0}),r=Be({},r,{value:void 0}),s=[];break;case"textarea":i=fh(t,i),r=fh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dc)}mh(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ta.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ta.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ne("scroll",t),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Ew=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eo(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KI(t,e,n){var r=e.pendingProps;switch(ip(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Mt(e.type)&&hc(),gt(e),null;case 3:return r=e.stateNode,bs(),Re(Lt),Re(_t),fp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(Qh(pn),pn=null))),$h(t,e),gt(e),null;case 5:hp(e);var i=fi(fa.current);if(n=e.type,t!==null&&e.stateNode!=null)ww(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return gt(e),null}if(t=fi(An.current),Nl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Nn]=e,r[da]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<jo.length;i++)Ne(jo[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Og(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":Lg(r,s),Ne("invalid",r)}mh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&kl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&kl(r.textContent,l,t),i=["children",""+l]):ta.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":_l(r),Dg(r,s,!0);break;case"textarea":_l(r),Mg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Y_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nn]=e,t[da]=r,_w(t,e,!1,!1),e.stateNode=t;e:{switch(o=gh(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<jo.length;i++)Ne(jo[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":Og(t,r),i=uh(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Be({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Lg(t,r),i=fh(t,r),Ne("invalid",t);break;default:i=r}mh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?J_(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Q_(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&na(t,c):typeof c=="number"&&na(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ta.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ne("scroll",t):c!=null&&Hf(t,s,c,o))}switch(n){case"input":_l(t),Dg(t,r,!1);break;case"textarea":_l(t),Mg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ps(t,!!r.multiple,s,!1):r.defaultValue!=null&&ps(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)Ew(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=fi(fa.current),fi(An.current),Nl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(s=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:kl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return gt(e),null;case 13:if(Re(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Ht!==null&&e.mode&1&&!(e.flags&128))U0(),Rs(),e.flags|=98560,s=!1;else if(s=Nl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[Nn]=e}else Rs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),s=!1}else pn!==null&&(Qh(pn),pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?Ze===0&&(Ze=3):Ip())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return bs(),$h(t,e),t===null&&ca(e.stateNode.containerInfo),gt(e),null;case 10:return lp(e.type._context),gt(e),null;case 17:return Mt(e.type)&&hc(),gt(e),null;case 19:if(Re(Fe),s=e.memoizedState,s===null)return gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Eo(s,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_c(t),o!==null){for(e.flags|=128,Eo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&qe()>js&&(e.flags|=128,r=!0,Eo(s,!1),e.lanes=4194304)}else{if(!r)if(t=_c(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oe)return gt(e),null}else 2*qe()-s.renderingStartTime>js&&n!==1073741824&&(e.flags|=128,r=!0,Eo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qe(),e.sibling=null,n=Fe.current,Se(Fe,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return Cp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function YI(t,e){switch(ip(e),e.tag){case 1:return Mt(e.type)&&hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bs(),Re(Lt),Re(_t),fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hp(e),null;case 13:if(Re(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Rs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Fe),null;case 4:return bs(),null;case 10:return lp(e.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var bl=!1,yt=!1,QI=typeof WeakSet=="function"?WeakSet:Set,G=null;function us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function Hh(t,e,n){try{n()}catch(r){He(t,e,r)}}var Ty=!1;function XI(t,e){if(Th=lc,t=T0(),np(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var k;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(k=p.firstChild)!==null;)g=p,p=k;for(;;){if(p===t)break t;if(g===n&&++d===i&&(l=o),g===s&&++m===r&&(c=o),(k=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=k}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kh={focusedElem:t,selectionRange:n},lc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var R=T.memoizedProps,O=T.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?R:hn(e.type,R),O);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(j){He(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return T=Ty,Ty=!1,T}function Wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hh(e,n,s)}i=i.next}while(i!==r)}}function uu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xw(t){var e=t.alternate;e!==null&&(t.alternate=null,xw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[da],delete e[Ph],delete e[jI],delete e[OI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sw(t){return t.tag===5||t.tag===3||t.tag===4}function ky(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dc));else if(r!==4&&(t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}function Gh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gh(t,e,n),t=t.sibling;t!==null;)Gh(t,e,n),t=t.sibling}var ct=null,fn=!1;function mr(t,e,n){for(n=n.child;n!==null;)Cw(t,e,n),n=n.sibling}function Cw(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(nu,n)}catch{}switch(n.tag){case 5:yt||us(n,e);case 6:var r=ct,i=fn;ct=null,mr(t,e,n),ct=r,fn=i,ct!==null&&(fn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(fn?(t=ct,n=n.stateNode,t.nodeType===8?Rd(t.parentNode,n):t.nodeType===1&&Rd(t,n),oa(t)):Rd(ct,n.stateNode));break;case 4:r=ct,i=fn,ct=n.stateNode.containerInfo,fn=!0,mr(t,e,n),ct=r,fn=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hh(n,e,o),i=i.next}while(i!==r)}mr(t,e,n);break;case 1:if(!yt&&(us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){He(n,e,l)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,mr(t,e,n),yt=r):mr(t,e,n);break;default:mr(t,e,n)}}function Ny(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QI),e.forEach(function(r){var i=oT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ct=l.stateNode,fn=!1;break e;case 3:ct=l.stateNode.containerInfo,fn=!0;break e;case 4:ct=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(ct===null)throw Error(M(160));Cw(s,o,i),ct=null,fn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){He(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Iw(e,t),e=e.sibling}function Iw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),Tn(t),r&4){try{Wo(3,t,t.return),uu(3,t)}catch(R){He(t,t.return,R)}try{Wo(5,t,t.return)}catch(R){He(t,t.return,R)}}break;case 1:un(e,t),Tn(t),r&512&&n!==null&&us(n,n.return);break;case 5:if(un(e,t),Tn(t),r&512&&n!==null&&us(n,n.return),t.flags&32){var i=t.stateNode;try{na(i,"")}catch(R){He(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&q_(i,s),gh(l,o);var d=gh(l,s);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?J_(i,p):m==="dangerouslySetInnerHTML"?Q_(i,p):m==="children"?na(i,p):Hf(i,m,p,d)}switch(l){case"input":dh(i,s);break;case"textarea":K_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var k=s.value;k!=null?ps(i,!!s.multiple,k,!1):g!==!!s.multiple&&(s.defaultValue!=null?ps(i,!!s.multiple,s.defaultValue,!0):ps(i,!!s.multiple,s.multiple?[]:"",!1))}i[da]=s}catch(R){He(t,t.return,R)}}break;case 6:if(un(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){He(t,t.return,R)}}break;case 3:if(un(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oa(e.containerInfo)}catch(R){He(t,t.return,R)}break;case 4:un(e,t),Tn(t);break;case 13:un(e,t),Tn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xp=qe())),r&4&&Ny(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(d=yt)||m,un(e,t),yt=d):un(e,t),Tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(G=t,m=t.child;m!==null;){for(p=G=m;G!==null;){switch(g=G,k=g.child,g.tag){case 0:case 11:case 14:case 15:Wo(4,g,g.return);break;case 1:us(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(R){He(r,n,R)}}break;case 5:us(g,g.return);break;case 22:if(g.memoizedState!==null){Py(p);continue}}k!==null?(k.return=g,G=k):Py(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{i=p.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=X_("display",o))}catch(R){He(t,t.return,R)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){He(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:un(e,t),Tn(t),r&4&&Ny(t);break;case 21:break;default:un(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sw(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(na(i,""),r.flags&=-33);var s=ky(t);Gh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ky(t);Vh(t,l,o);break;default:throw Error(M(161))}}catch(c){He(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JI(t,e,n){G=t,Tw(t)}function Tw(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bl;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||yt;l=bl;var d=yt;if(bl=o,(yt=c)&&!d)for(G=i;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?by(i):c!==null?(c.return=o,G=c):by(i);for(;s!==null;)G=s,Tw(s),s=s.sibling;G=i,bl=l,yt=d}Ry(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):Ry(t)}}function Ry(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||uu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&oa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}yt||e.flags&512&&Wh(e)}catch(g){He(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Py(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function by(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uu(4,e)}catch(c){He(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){He(e,i,c)}}var s=e.return;try{Wh(e)}catch(c){He(e,s,c)}break;case 5:var o=e.return;try{Wh(e)}catch(c){He(e,o,c)}}}catch(c){He(e,e.return,c)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var ZI=Math.ceil,xc=cr.ReactCurrentDispatcher,wp=cr.ReactCurrentOwner,rn=cr.ReactCurrentBatchConfig,he=0,st=null,Ye=null,ut=0,zt=0,ds=Jr(0),Ze=0,ya=null,Ei=0,du=0,Ep=0,Vo=null,bt=null,xp=0,js=1/0,Wn=null,Sc=!1,qh=null,Dr=null,Al=!1,Tr=null,Cc=0,Go=0,Kh=null,Ql=-1,Xl=0;function It(){return he&6?qe():Ql!==-1?Ql:Ql=qe()}function Lr(t){return t.mode&1?he&2&&ut!==0?ut&-ut:LI.transition!==null?(Xl===0&&(Xl=u0()),Xl):(t=ve,t!==0||(t=window.event,t=t===void 0?16:y0(t.type)),t):1}function vn(t,e,n,r){if(50<Go)throw Go=0,Kh=null,Error(M(185));Ma(t,n,r),(!(he&2)||t!==st)&&(t===st&&(!(he&2)&&(du|=n),Ze===4&&wr(t,ut)),Ft(t,r),n===1&&he===0&&!(e.mode&1)&&(js=qe()+500,au&&Zr()))}function Ft(t,e){var n=t.callbackNode;LC(t,e);var r=ac(t,t===st?ut:0);if(r===0)n!==null&&zg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zg(n),e===1)t.tag===0?DI(Ay.bind(null,t)):L0(Ay.bind(null,t)),bI(function(){!(he&6)&&Zr()}),n=null;else{switch(d0(r)){case 1:n=Kf;break;case 4:n=l0;break;case 16:n=oc;break;case 536870912:n=c0;break;default:n=oc}n=Ow(n,kw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kw(t,e){if(Ql=-1,Xl=0,he&6)throw Error(M(327));var n=t.callbackNode;if(_s()&&t.callbackNode!==n)return null;var r=ac(t,t===st?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ic(t,r);else{e=r;var i=he;he|=2;var s=Rw();(st!==t||ut!==e)&&(Wn=null,js=qe()+500,mi(t,e));do try{nT();break}catch(l){Nw(t,l)}while(1);ap(),xc.current=s,he=i,Ye!==null?e=0:(st=null,ut=0,e=Ze)}if(e!==0){if(e===2&&(i=Eh(t),i!==0&&(r=i,e=Yh(t,i))),e===1)throw n=ya,mi(t,0),wr(t,r),Ft(t,qe()),n;if(e===6)wr(t,r);else{if(i=t.current.alternate,!(r&30)&&!eT(i)&&(e=Ic(t,r),e===2&&(s=Eh(t),s!==0&&(r=s,e=Yh(t,s))),e===1))throw n=ya,mi(t,0),wr(t,r),Ft(t,qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:li(t,bt,Wn);break;case 3:if(wr(t,r),(r&130023424)===r&&(e=xp+500-qe(),10<e)){if(ac(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rh(li.bind(null,t,bt,Wn),e);break}li(t,bt,Wn);break;case 4:if(wr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-yn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZI(r/1960))-r,10<r){t.timeoutHandle=Rh(li.bind(null,t,bt,Wn),r);break}li(t,bt,Wn);break;case 5:li(t,bt,Wn);break;default:throw Error(M(329))}}}return Ft(t,qe()),t.callbackNode===n?kw.bind(null,t):null}function Yh(t,e){var n=Vo;return t.current.memoizedState.isDehydrated&&(mi(t,e).flags|=256),t=Ic(t,e),t!==2&&(e=bt,bt=n,e!==null&&Qh(e)),t}function Qh(t){bt===null?bt=t:bt.push.apply(bt,t)}function eT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!En(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wr(t,e){for(e&=~Ep,e&=~du,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function Ay(t){if(he&6)throw Error(M(327));_s();var e=ac(t,0);if(!(e&1))return Ft(t,qe()),null;var n=Ic(t,e);if(t.tag!==0&&n===2){var r=Eh(t);r!==0&&(e=r,n=Yh(t,r))}if(n===1)throw n=ya,mi(t,0),wr(t,e),Ft(t,qe()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,bt,Wn),Ft(t,qe()),null}function Sp(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(js=qe()+500,au&&Zr())}}function xi(t){Tr!==null&&Tr.tag===0&&!(he&6)&&_s();var e=he;he|=1;var n=rn.transition,r=ve;try{if(rn.transition=null,ve=1,t)return t()}finally{ve=r,rn.transition=n,he=e,!(he&6)&&Zr()}}function Cp(){zt=ds.current,Re(ds)}function mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,PI(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(ip(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hc();break;case 3:bs(),Re(Lt),Re(_t),fp();break;case 5:hp(r);break;case 4:bs();break;case 13:Re(Fe);break;case 19:Re(Fe);break;case 10:lp(r.type._context);break;case 22:case 23:Cp()}n=n.return}if(st=t,Ye=t=Mr(t.current,null),ut=zt=e,Ze=0,ya=null,Ep=du=Ei=0,bt=Vo=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}hi=null}return t}function Nw(t,e){do{var n=Ye;try{if(ap(),ql.current=Ec,wc){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wc=!1}if(wi=0,nt=Xe=ze=null,Ho=!1,pa=0,wp.current=null,n===null||n.return===null){Ze=1,ya=e,Ye=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=ut,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var k=_y(o);if(k!==null){k.flags&=-257,wy(k,o,l,s,e),k.mode&1&&vy(s,d,e),e=k,c=d;var T=e.updateQueue;if(T===null){var R=new Set;R.add(c),e.updateQueue=R}else T.add(c);break e}else{if(!(e&1)){vy(s,d,e),Ip();break e}c=Error(M(426))}}else if(Oe&&l.mode&1){var O=_y(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),wy(O,o,l,s,e),sp(As(c,l));break e}}s=c=As(c,l),Ze!==4&&(Ze=2),Vo===null?Vo=[s]:Vo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=dw(s,c,e);hy(s,x);break e;case 1:l=c;var _=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Dr===null||!Dr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=hw(s,l,e);hy(s,j);break e}}s=s.return}while(s!==null)}bw(n)}catch(L){e=L,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function Rw(){var t=xc.current;return xc.current=Ec,t===null?Ec:t}function Ip(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),st===null||!(Ei&268435455)&&!(du&268435455)||wr(st,ut)}function Ic(t,e){var n=he;he|=2;var r=Rw();(st!==t||ut!==e)&&(Wn=null,mi(t,e));do try{tT();break}catch(i){Nw(t,i)}while(1);if(ap(),he=n,xc.current=r,Ye!==null)throw Error(M(261));return st=null,ut=0,Ze}function tT(){for(;Ye!==null;)Pw(Ye)}function nT(){for(;Ye!==null&&!kC();)Pw(Ye)}function Pw(t){var e=jw(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?bw(t):Ye=e,wp.current=null}function bw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YI(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ye=null;return}}else if(n=KI(n,e,zt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);Ze===0&&(Ze=5)}function li(t,e,n){var r=ve,i=rn.transition;try{rn.transition=null,ve=1,rT(t,e,n,r)}finally{rn.transition=i,ve=r}return null}function rT(t,e,n,r){do _s();while(Tr!==null);if(he&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(MC(t,s),t===st&&(Ye=st=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Al||(Al=!0,Ow(oc,function(){return _s(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=rn.transition,rn.transition=null;var o=ve;ve=1;var l=he;he|=4,wp.current=null,XI(t,n),Iw(n,t),SI(kh),lc=!!Th,kh=Th=null,t.current=n,JI(n),NC(),he=l,ve=o,rn.transition=s}else t.current=n;if(Al&&(Al=!1,Tr=t,Cc=i),s=t.pendingLanes,s===0&&(Dr=null),bC(n.stateNode),Ft(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sc)throw Sc=!1,t=qh,qh=null,t;return Cc&1&&t.tag!==0&&_s(),s=t.pendingLanes,s&1?t===Kh?Go++:(Go=0,Kh=t):Go=0,Zr(),null}function _s(){if(Tr!==null){var t=d0(Cc),e=rn.transition,n=ve;try{if(rn.transition=null,ve=16>t?16:t,Tr===null)var r=!1;else{if(t=Tr,Tr=null,Cc=0,he&6)throw Error(M(331));var i=he;for(he|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(G=d;G!==null;){var m=G;switch(m.tag){case 0:case 11:case 15:Wo(8,m,s)}var p=m.child;if(p!==null)p.return=m,G=p;else for(;G!==null;){m=G;var g=m.sibling,k=m.return;if(xw(m),m===d){G=null;break}if(g!==null){g.return=k,G=g;break}G=k}}}var T=s.alternate;if(T!==null){var R=T.child;if(R!==null){T.child=null;do{var O=R.sibling;R.sibling=null,R=O}while(R!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wo(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,G=x;break e}G=s.return}}var _=t.current;for(G=_;G!==null;){o=G;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,G=I;else e:for(o=_;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uu(9,l)}}catch(L){He(l,l.return,L)}if(l===o){G=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,G=j;break e}G=l.return}}if(he=i,Zr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(nu,t)}catch{}r=!0}return r}finally{ve=n,rn.transition=e}}return!1}function jy(t,e,n){e=As(n,e),e=dw(t,e,1),t=Or(t,e,1),e=It(),t!==null&&(Ma(t,1,e),Ft(t,e))}function He(t,e,n){if(t.tag===3)jy(t,t,n);else for(;e!==null;){if(e.tag===3){jy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){t=As(n,t),t=hw(e,t,1),e=Or(e,t,1),t=It(),e!==null&&(Ma(e,1,t),Ft(e,t));break}}e=e.return}}function iT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ut&n)===n&&(Ze===4||Ze===3&&(ut&130023424)===ut&&500>qe()-xp?mi(t,0):Ep|=n),Ft(t,e)}function Aw(t,e){e===0&&(t.mode&1?(e=xl,xl<<=1,!(xl&130023424)&&(xl=4194304)):e=1);var n=It();t=ir(t,e),t!==null&&(Ma(t,e,n),Ft(t,n))}function sT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Aw(t,n)}function oT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),Aw(t,n)}var jw;jw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,qI(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Oe&&e.flags&1048576&&M0(e,mc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yl(t,e),t=e.pendingProps;var i=Ns(e,_t.current);vs(e,n),i=mp(null,e,r,t,i,n);var s=gp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(s=!0,fc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,up(e),i.updater=cu,e.stateNode=i,i._reactInternals=e,Lh(e,r,t,n),e=Uh(null,e,r,!0,s,n)):(e.tag=0,Oe&&s&&rp(e),xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lT(r),t=hn(r,t),i){case 0:e=Fh(null,e,r,t,n);break e;case 1:e=Sy(null,e,r,t,n);break e;case 11:e=Ey(null,e,r,t,n);break e;case 14:e=xy(null,e,r,hn(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Fh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Sy(t,e,r,i,n);case 3:e:{if(gw(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,H0(t,e),vc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=As(Error(M(423)),e),e=Cy(t,e,r,n,i);break e}else if(r!==i){i=As(Error(M(424)),e),e=Cy(t,e,r,n,i);break e}else for(Ht=jr(e.stateNode.containerInfo.firstChild),Wt=e,Oe=!0,pn=null,n=B0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rs(),r===i){e=sr(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return W0(e),t===null&&jh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Nh(r,i)?o=null:s!==null&&Nh(r,s)&&(e.flags|=32),mw(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&jh(e),null;case 13:return yw(t,e,n);case 4:return dp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ps(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Ey(t,e,r,i,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(gc,r._currentValue),r._currentValue=o,s!==null)if(En(s.value,o)){if(s.children===i.children&&!Lt.current){e=sr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=er(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Oh(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(M(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Oh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vs(e,n),i=on(i),r=r(i),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,i=hn(r,e.pendingProps),i=hn(r.type,i),xy(t,e,r,i,n);case 15:return fw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Yl(t,e),e.tag=1,Mt(r)?(t=!0,fc(e)):t=!1,vs(e,n),uw(e,r,i),Lh(e,r,i,n),Uh(null,e,r,!0,t,n);case 19:return vw(t,e,n);case 22:return pw(t,e,n)}throw Error(M(156,e.tag))};function Ow(t,e){return a0(t,e)}function aT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new aT(t,e,n,r)}function Tp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lT(t){if(typeof t=="function")return Tp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vf)return 11;if(t===Gf)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Tp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ts:return gi(n.children,i,s,e);case Wf:o=8,i|=8;break;case oh:return t=tn(12,n,e,i|2),t.elementType=oh,t.lanes=s,t;case ah:return t=tn(13,n,e,i),t.elementType=ah,t.lanes=s,t;case lh:return t=tn(19,n,e,i),t.elementType=lh,t.lanes=s,t;case W_:return hu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $_:o=10;break e;case H_:o=9;break e;case Vf:o=11;break e;case Gf:o=14;break e;case yr:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=tn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function gi(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function hu(t,e,n,r){return t=tn(22,t,r,e),t.elementType=W_,t.lanes=n,t.stateNode={isHidden:!1},t}function Md(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function Fd(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kp(t,e,n,r,i,s,o,l,c){return t=new cT(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=tn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},up(s),t}function uT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Dw(t){if(!t)return Wr;t=t._reactInternals;e:{if(Oi(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(Mt(n))return D0(t,n,e)}return e}function Lw(t,e,n,r,i,s,o,l,c){return t=kp(n,r,!0,t,i,s,o,l,c),t.context=Dw(null),n=t.current,r=It(),i=Lr(n),s=er(r,i),s.callback=e??null,Or(n,s,i),t.current.lanes=i,Ma(t,i,r),Ft(t,r),t}function fu(t,e,n,r){var i=e.current,s=It(),o=Lr(i);return n=Dw(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(i,e,o),t!==null&&(vn(t,i,o,s),Gl(t,i,o)),o}function Tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Oy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Np(t,e){Oy(t,e),(t=t.alternate)&&Oy(t,e)}function dT(){return null}var Mw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rp(t){this._internalRoot=t}pu.prototype.render=Rp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));fu(t,e,null,null)};pu.prototype.unmount=Rp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xi(function(){fu(null,t,null,null)}),e[rr]=null}};function pu(t){this._internalRoot=t}pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=p0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&g0(t)}};function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dy(){}function hT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Tc(o);s.call(d)}}var o=Lw(e,r,t,0,null,!1,!1,"",Dy);return t._reactRootContainer=o,t[rr]=o.current,ca(t.nodeType===8?t.parentNode:t),xi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Tc(c);l.call(d)}}var c=kp(t,0,!1,null,null,!1,!1,"",Dy);return t._reactRootContainer=c,t[rr]=c.current,ca(t.nodeType===8?t.parentNode:t),xi(function(){fu(e,c,n,r)}),c}function gu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Tc(o);l.call(c)}}fu(e,o,t,i)}else o=hT(n,e,t,i,r);return Tc(o)}h0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ao(e.pendingLanes);n!==0&&(Yf(e,n|1),Ft(e,qe()),!(he&6)&&(js=qe()+500,Zr()))}break;case 13:xi(function(){var r=ir(t,1);if(r!==null){var i=It();vn(r,t,1,i)}}),Np(t,1)}};Qf=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=It();vn(e,t,134217728,n)}Np(t,134217728)}};f0=function(t){if(t.tag===13){var e=Lr(t),n=ir(t,e);if(n!==null){var r=It();vn(n,t,e,r)}Np(t,e)}};p0=function(){return ve};m0=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};vh=function(t,e,n){switch(e){case"input":if(dh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ou(r);if(!i)throw Error(M(90));G_(r),dh(r,i)}}}break;case"textarea":K_(t,n);break;case"select":e=n.value,e!=null&&ps(t,!!n.multiple,e,!1)}};t0=Sp;n0=xi;var fT={usingClientEntryPoint:!1,Events:[Ua,ss,ou,Z_,e0,Sp]},xo={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pT={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=s0(t),t===null?null:t.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||dT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{nu=jl.inject(pT),bn=jl}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(e))throw Error(M(200));return uT(t,e,null,n)};qt.createRoot=function(t,e){if(!Pp(t))throw Error(M(299));var n=!1,r="",i=Mw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kp(t,1,!1,null,null,n,!1,r,i),t[rr]=e.current,ca(t.nodeType===8?t.parentNode:t),new Rp(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=s0(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return xi(t)};qt.hydrate=function(t,e,n){if(!mu(e))throw Error(M(200));return gu(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!Pp(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Mw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Lw(e,null,t,1,n??null,i,!1,s,o),t[rr]=e.current,ca(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pu(e)};qt.render=function(t,e,n){if(!mu(e))throw Error(M(200));return gu(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!mu(t))throw Error(M(40));return t._reactRootContainer?(xi(function(){gu(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};qt.unstable_batchedUpdates=Sp;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mu(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return gu(t,e,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function Fw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fw)}catch(t){console.error(t)}}Fw(),F_.exports=qt;var mT=F_.exports,Ly=mT;ih.createRoot=Ly.createRoot,ih.hydrateRoot=Ly.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function va(){return va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},va.apply(this,arguments)}var kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(kr||(kr={}));const My="popstate";function gT(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Xh("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:kc(i)}return vT(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yT(){return Math.random().toString(36).substr(2,8)}function Fy(t,e){return{usr:t.state,key:t.key,idx:e}}function Xh(t,e,n,r){return n===void 0&&(n=null),va({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qs(e):e,{state:n,key:e&&e.key||r||yT()})}function kc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vT(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=kr.Pop,c=null,d=m();d==null&&(d=0,o.replaceState(va({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function p(){l=kr.Pop;let O=m(),x=O==null?null:O-d;d=O,c&&c({action:l,location:R.location,delta:x})}function g(O,x){l=kr.Push;let _=Xh(R.location,O,x);n&&n(_,O),d=m()+1;let I=Fy(_,d),j=R.createHref(_);try{o.pushState(I,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(j)}s&&c&&c({action:l,location:R.location,delta:1})}function k(O,x){l=kr.Replace;let _=Xh(R.location,O,x);n&&n(_,O),d=m();let I=Fy(_,d),j=R.createHref(_);o.replaceState(I,"",j),s&&c&&c({action:l,location:R.location,delta:0})}function T(O){let x=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof O=="string"?O:kc(O);return _=_.replace(/ $/,"%20"),Qe(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let R={get action(){return l},get location(){return t(i,o)},listen(O){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(My,p),c=O,()=>{i.removeEventListener(My,p),c=null}},createHref(O){return e(i,O)},createURL:T,encodeLocation(O){let x=T(O);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:k,go(O){return o.go(O)}};return R}var Uy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Uy||(Uy={}));function _T(t,e,n){return n===void 0&&(n="/"),wT(t,e,n,!1)}function wT(t,e,n,r){let i=typeof e=="string"?qs(e):e,s=bp(i.pathname||"/",n);if(s==null)return null;let o=zw(t);ET(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=AT(s);l=PT(o[c],d,r)}return l}function zw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Fr([r,c.relativePath]),m=n.concat(c);s.children&&s.children.length>0&&(Qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),zw(s.children,e,m,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:NT(d,s.index),routesMeta:m})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of Bw(s.path))i(s,o,c)}),e}function Bw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Bw(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function ET(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xT=/^:[\w-]+$/,ST=3,CT=2,IT=1,TT=10,kT=-2,zy=t=>t==="*";function NT(t,e){let n=t.split("/"),r=n.length;return n.some(zy)&&(r+=kT),e&&(r+=CT),n.filter(i=>!zy(i)).reduce((i,s)=>i+(xT.test(s)?ST:s===""?IT:TT),r)}function RT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function PT(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",p=By({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),g=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=By({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Fr([s,p.pathname]),pathnameBase:LT(Fr([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Fr([s,p.pathnameBase]))}return o}function By(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,m,p)=>{let{paramName:g,isOptional:k}=m;if(g==="*"){let R=l[p]||"";o=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const T=l[p];return k&&!T?d[g]=void 0:d[g]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function bT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Uw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function AT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function jT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qs(t):t;return{pathname:n?n.startsWith("/")?n:OT(n,e):e,search:MT(r),hash:FT(i)}}function OT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ud(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $w(t,e){let n=DT(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Hw(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qs(t):(i=va({},t),Qe(!i.pathname||!i.pathname.includes("?"),Ud("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),Ud("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),Ud("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=jT(i,l),d=o&&o!=="/"&&o.endsWith("/"),m=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const Fr=t=>t.join("/").replace(/\/\/+/g,"/"),LT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ww=["post","put","patch","delete"];new Set(Ww);const zT=["get",...Ww];new Set(zT);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_a.apply(this,arguments)}const Ap=D.createContext(null),BT=D.createContext(null),Di=D.createContext(null),yu=D.createContext(null),Li=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Vw=D.createContext(null);function $T(t,e){let{relative:n}=e===void 0?{}:e;Ba()||Qe(!1);let{basename:r,navigator:i}=D.useContext(Di),{hash:s,pathname:o,search:l}=qw(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Fr([r,o])),i.createHref({pathname:c,search:l,hash:s})}function Ba(){return D.useContext(yu)!=null}function Mi(){return Ba()||Qe(!1),D.useContext(yu).location}function Gw(t){D.useContext(Di).static||D.useLayoutEffect(t)}function jp(){let{isDataRoute:t}=D.useContext(Li);return t?tk():HT()}function HT(){Ba()||Qe(!1);let t=D.useContext(Ap),{basename:e,future:n,navigator:r}=D.useContext(Di),{matches:i}=D.useContext(Li),{pathname:s}=Mi(),o=JSON.stringify($w(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return Gw(()=>{l.current=!0}),D.useCallback(function(d,m){if(m===void 0&&(m={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=Hw(d,JSON.parse(o),s,m.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Fr([e,p.pathname])),(m.replace?r.replace:r.push)(p,m.state,m)},[e,r,o,s,t])}function qw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Di),{matches:i}=D.useContext(Li),{pathname:s}=Mi(),o=JSON.stringify($w(i,r.v7_relativeSplatPath));return D.useMemo(()=>Hw(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function WT(t,e){return VT(t,e)}function VT(t,e,n,r){Ba()||Qe(!1);let{navigator:i,static:s}=D.useContext(Di),{matches:o}=D.useContext(Li),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let m=Mi(),p;if(e){var g;let x=typeof e=="string"?qs(e):e;d==="/"||(g=x.pathname)!=null&&g.startsWith(d)||Qe(!1),p=x}else p=m;let k=p.pathname||"/",T=k;if(d!=="/"){let x=d.replace(/^\//,"").split("/");T="/"+k.replace(/^\//,"").split("/").slice(x.length).join("/")}let R=!s&&n&&n.matches&&n.matches.length>0?n.matches:_T(t,{pathname:T}),O=QT(R&&R.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:Fr([d,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:Fr([d,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,r);return e&&O?D.createElement(yu.Provider,{value:{location:_a({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:kr.Pop}},O):O}function GT(){let t=ek(),e=UT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,s)}const qT=D.createElement(GT,null);class KT extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Li.Provider,{value:this.props.routeContext},D.createElement(Vw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YT(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(Ap);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Li.Provider,{value:e},r)}function QT(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let m=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);m>=0||Qe(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let p=o[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:g,errors:k}=n,T=p.route.loader&&g[p.route.id]===void 0&&(!k||k[p.route.id]===void 0);if(p.route.lazy||T){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,p,g)=>{let k,T=!1,R=null,O=null;n&&(k=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||qT,c&&(d<0&&g===0?(nk("route-fallback",!1),T=!0,O=null):d===g&&(T=!0,O=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),_=()=>{let I;return k?I=R:T?I=O:p.route.Component?I=D.createElement(p.route.Component,null):p.route.element?I=p.route.element:I=m,D.createElement(YT,{match:p,routeContext:{outlet:m,matches:x,isDataRoute:n!=null},children:I})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?D.createElement(KT,{location:n.location,revalidation:n.revalidation,component:R,error:k,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var Kw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Kw||{}),Nc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Nc||{});function XT(t){let e=D.useContext(Ap);return e||Qe(!1),e}function JT(t){let e=D.useContext(BT);return e||Qe(!1),e}function ZT(t){let e=D.useContext(Li);return e||Qe(!1),e}function Yw(t){let e=ZT(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function ek(){var t;let e=D.useContext(Vw),n=JT(Nc.UseRouteError),r=Yw(Nc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tk(){let{router:t}=XT(Kw.UseNavigateStable),e=Yw(Nc.UseNavigateStable),n=D.useRef(!1);return Gw(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,_a({fromRouteId:e},s)))},[t,e])}const $y={};function nk(t,e,n){!e&&!$y[t]&&($y[t]=!0)}function rk(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Oo(t){Qe(!1)}function ik(t){let{basename:e="/",children:n=null,location:r,navigationType:i=kr.Pop,navigator:s,static:o=!1,future:l}=t;Ba()&&Qe(!1);let c=e.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:c,navigator:s,static:o,future:_a({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=qs(r));let{pathname:m="/",search:p="",hash:g="",state:k=null,key:T="default"}=r,R=D.useMemo(()=>{let O=bp(m,c);return O==null?null:{location:{pathname:O,search:p,hash:g,state:k,key:T},navigationType:i}},[c,m,p,g,k,T,i]);return R==null?null:D.createElement(Di.Provider,{value:d},D.createElement(yu.Provider,{children:n,value:R}))}function sk(t){let{children:e,location:n}=t;return WT(Jh(e),n)}new Promise(()=>{});function Jh(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,Jh(r.props.children,s));return}r.type!==Oo&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Jh(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zh(){return Zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zh.apply(this,arguments)}function ok(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ak(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lk(t,e){return t.button===0&&(!e||e==="_self")&&!ak(t)}const ck=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uk="6";try{window.__reactRouterVersion=uk}catch{}const dk="startTransition",Hy=iC[dk];function hk(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=gT({window:i,v5Compat:!0}));let o=s.current,[l,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=D.useCallback(p=>{d&&Hy?Hy(()=>c(p)):c(p)},[c,d]);return D.useLayoutEffect(()=>o.listen(m),[o,m]),D.useEffect(()=>rk(r),[r]),D.createElement(ik,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const fk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,So=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:m,viewTransition:p}=e,g=ok(e,ck),{basename:k}=D.useContext(Di),T,R=!1;if(typeof d=="string"&&pk.test(d)&&(T=d,fk))try{let I=new URL(window.location.href),j=d.startsWith("//")?new URL(I.protocol+d):new URL(d),L=bp(j.pathname,k);j.origin===I.origin&&L!=null?d=L+j.search+j.hash:R=!0}catch{}let O=$T(d,{relative:i}),x=mk(d,{replace:o,state:l,target:c,preventScrollReset:m,relative:i,viewTransition:p});function _(I){r&&r(I),I.defaultPrevented||x(I)}return D.createElement("a",Zh({},g,{href:T||O,onClick:R||s?r:_,ref:n,target:c}))});var Wy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Wy||(Wy={}));var Vy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Vy||(Vy={}));function mk(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,c=jp(),d=Mi(),m=qw(t,{relative:o});return D.useCallback(p=>{if(lk(p,n)){p.preventDefault();let g=r!==void 0?r:kc(d)===kc(m);c(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,c,m,r,i,n,t,s,o,l])}const gk="modulepreload",yk=function(t){return"/"+t},Gy={},dn=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=yk(s),s in Gy)return;Gy[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let m=i.length-1;m>=0;m--){const p=i[m];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":gk,o||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),o)return new Promise((m,p)=>{d.addEventListener("load",m),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},vk=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=function(t,e){if(!t)throw Ks(e)},Ks=function(t){return new Error("Firebase Database ("+Qw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_k=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Op={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,m=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|d>>6,k=d&63;c||(k=64,o||(g=64)),r.push(n[m],n[p],n[g],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_k(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||p==null)throw new wk;const g=s<<2|l>>4;if(r.push(g),d!==64){const k=l<<4&240|d>>2;if(r.push(k),p!==64){const T=d<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jw=function(t){const e=Xw(t);return Op.encodeByteArray(e,!0)},Rc=function(t){return Jw(t).replace(/\./g,"")},Pc=function(t){try{return Op.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){return Zw(void 0,t)}function Zw(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!xk(n)||(t[n]=Zw(t[n],e[n]));return t}function xk(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=()=>Sk().__FIREBASE_DEFAULTS__,Ik=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Tk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pc(t[1]);return e&&JSON.parse(e)},Dp=()=>{try{return vk()||Ck()||Ik()||Tk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eE=t=>{var e,n;return(n=(e=Dp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tE=t=>{const e=eE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nE=()=>{var t;return(t=Dp())===null||t===void 0?void 0:t.config},rE=t=>{var e;return(e=Dp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Rc(JSON.stringify(n)),Rc(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function kk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rk(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oE(){return Qw.NODE_ADMIN===!0}function Pk(){try{return typeof indexedDB=="object"}catch{return!1}}function bk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="FirebaseError";class ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ak,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$a.prototype.create)}}class $a{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jk(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ur(i,l,r)}}function jk(t,e){return t.replace(Ok,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Ok=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){return JSON.parse(t)}function Je(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=wa(Pc(s[0])||""),n=wa(Pc(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Dk=function(t){const e=aE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Lk=function(t){const e=aE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Si(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function bc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ac(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Vr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(qy(s)&&qy(o)){if(!Vr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Do(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Lo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const g=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],d,m;for(let p=0;p<80;p++){p<40?p<20?(d=l^s&(o^l),m=1518500249):(d=s^o^l,m=1859775393):p<60?(d=s&o|l&(s|o),m=2400959708):(d=s^o^l,m=3395469782);const g=(i<<5|i>>>27)+d+c+m+r[p]&4294967295;c=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Fk(t,e){const n=new Uk(t,e);return n.subscribe.bind(n)}class Uk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=zd),i.error===void 0&&(i.error=zd),i.complete===void 0&&(i.complete=zd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zd(){}function Ci(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,U(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class Mn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Bt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hk(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$k(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $k(t){return t===ci?void 0:t}function Hk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ef(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const Wk={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},Vk=me.INFO,Gk={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},qk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Gk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _u{constructor(e){this.name=e,this._logLevel=Vk,this._logHandler=qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const Kk=(t,e)=>e.some(n=>t instanceof n);let Ky,Yy;function Yk(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qk(){return Yy||(Yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cE=new WeakMap,tf=new WeakMap,uE=new WeakMap,Bd=new WeakMap,Mp=new WeakMap;function Xk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ur(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cE.set(n,t)}).catch(()=>{}),Mp.set(e,t),e}function Jk(t){if(tf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});tf.set(t,e)}let nf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Zk(t){nf=t(nf)}function eN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($d(this),e,...n);return uE.set(r,e.sort?e.sort():[e]),Ur(r)}:Qk().includes(t)?function(...e){return t.apply($d(this),e),Ur(cE.get(this))}:function(...e){return Ur(t.apply($d(this),e))}}function tN(t){return typeof t=="function"?eN(t):(t instanceof IDBTransaction&&Jk(t),Kk(t,Yk())?new Proxy(t,nf):t)}function Ur(t){if(t instanceof IDBRequest)return Xk(t);if(Bd.has(t))return Bd.get(t);const e=tN(t);return e!==t&&(Bd.set(t,e),Mp.set(e,t)),e}const $d=t=>Mp.get(t);function nN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ur(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ur(o.result),c.oldVersion,c.newVersion,Ur(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const rN=["get","getKey","getAll","getAllKeys","count"],iN=["put","add","delete","clear"],Hd=new Map;function Qy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hd.get(e))return Hd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=iN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rN.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return Hd.set(e,s),s}Zk(t=>({...t,get:(e,n,r)=>Qy(e,n)||t.get(e,n,r),has:(e,n)=>!!Qy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",Xy="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new _u("@firebase/app"),aN="@firebase/app-compat",lN="@firebase/analytics-compat",cN="@firebase/analytics",uN="@firebase/app-check-compat",dN="@firebase/app-check",hN="@firebase/auth",fN="@firebase/auth-compat",pN="@firebase/database",mN="@firebase/data-connect",gN="@firebase/database-compat",yN="@firebase/functions",vN="@firebase/functions-compat",_N="@firebase/installations",wN="@firebase/installations-compat",EN="@firebase/messaging",xN="@firebase/messaging-compat",SN="@firebase/performance",CN="@firebase/performance-compat",IN="@firebase/remote-config",TN="@firebase/remote-config-compat",kN="@firebase/storage",NN="@firebase/storage-compat",RN="@firebase/firestore",PN="@firebase/vertexai",bN="@firebase/firestore-compat",AN="firebase",jN="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",ON={[rf]:"fire-core",[aN]:"fire-core-compat",[cN]:"fire-analytics",[lN]:"fire-analytics-compat",[dN]:"fire-app-check",[uN]:"fire-app-check-compat",[hN]:"fire-auth",[fN]:"fire-auth-compat",[pN]:"fire-rtdb",[mN]:"fire-data-connect",[gN]:"fire-rtdb-compat",[yN]:"fire-fn",[vN]:"fire-fn-compat",[_N]:"fire-iid",[wN]:"fire-iid-compat",[EN]:"fire-fcm",[xN]:"fire-fcm-compat",[SN]:"fire-perf",[CN]:"fire-perf-compat",[IN]:"fire-rc",[TN]:"fire-rc-compat",[kN]:"fire-gcs",[NN]:"fire-gcs-compat",[RN]:"fire-fst",[bN]:"fire-fst-compat",[PN]:"fire-vertex","fire-js":"fire-js",[AN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,DN=new Map,of=new Map;function Jy(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ii(t){const e=t.name;if(of.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;of.set(e,t);for(const n of jc.values())Jy(n,t);for(const n of DN.values())Jy(n,t);return!0}function wu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new $a("app","Firebase",LN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=jN;function dE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zr.create("bad-app-name",{appName:String(i)});if(n||(n=nE()),!n)throw zr.create("no-options");const s=jc.get(i);if(s){if(Vr(n,s.options)&&Vr(r,s.config))return s;throw zr.create("duplicate-app",{appName:i})}const o=new lE(i);for(const c of of.values())o.addComponent(c);const l=new MN(n,r,o);return jc.set(i,l),l}function Fp(t=sf){const e=jc.get(t);if(!e&&t===sf&&nE())return dE();if(!e)throw zr.create("no-app",{appName:t});return e}function jn(t,e,n){var r;let i=(r=ON[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}Ii(new Mn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firebase-heartbeat-database",UN=1,Ea="firebase-heartbeat-store";let Wd=null;function hE(){return Wd||(Wd=nN(FN,UN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw zr.create("idb-open",{originalErrorMessage:t.message})})),Wd}async function zN(t){try{const n=(await hE()).transaction(Ea),r=await n.objectStore(Ea).get(fE(t));return await n.done,r}catch(e){if(e instanceof ur)or.warn(e.message);else{const n=zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function Zy(t,e){try{const r=(await hE()).transaction(Ea,"readwrite");await r.objectStore(Ea).put(e,fE(t)),await r.done}catch(n){if(n instanceof ur)or.warn(n.message);else{const r=zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function fE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=1024,$N=30;class HN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ev();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>$N){const o=GN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ev(),{heartbeatsToSend:r,unsentEntries:i}=WN(this._heartbeatsCache.heartbeats),s=Rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return or.warn(n),""}}}function ev(){return new Date().toISOString().substring(0,10)}function WN(t,e=BN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pk()?bk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tv(t){return Rc(JSON.stringify({version:2,heartbeats:t})).length}function GN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){Ii(new Mn("platform-logger",e=>new sN(e),"PRIVATE")),Ii(new Mn("heartbeat",e=>new HN(e),"PRIVATE")),jn(rf,Xy,t),jn(rf,Xy,"esm2017"),jn("fire-js","")}qN("");var KN="firebase",YN="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(KN,YN,"app");const nv="@firebase/database",rv="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pE="";function mE(t){pE=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Je(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:wa(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Sn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QN(e)}}catch{}return new XN},pi=gE("localStorage"),af=gE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new _u("@firebase/database"),yE=function(){let t=1;return function(){return t++}}(),vE=function(t){const e=Bk(t),n=new Mk;n.update(e);const r=n.digest();return Op.encodeByteArray(r)},Ha=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ha.apply(null,r):typeof r=="object"?e+=Je(r):e+=r,e+=" "}return e};let yi=null,iv=!0;const _E=function(t,e){U(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ws.logLevel=me.VERBOSE,yi=ws.log.bind(ws),e&&af.set("logging_enabled",!0)):typeof t=="function"?yi=t:(yi=null,af.remove("logging_enabled"))},it=function(...t){if(iv===!0&&(iv=!1,yi===null&&af.get("logging_enabled")===!0&&_E(!0)),yi){const e=Ha.apply(null,t);yi(e)}},Wa=function(t){return function(...e){it(t,...e)}},lf=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ha(...t);ws.error(e)},Fn=function(...t){const e=`FIREBASE FATAL ERROR: ${Ha(...t)}`;throw ws.error(e),new Error(e)},vt=function(...t){const e="FIREBASE WARNING: "+Ha(...t);ws.warn(e)},JN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Eu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ZN=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Gr="[MIN_NAME]",ar="[MAX_NAME]",Ui=function(t,e){if(t===e)return 0;if(t===Gr||e===ar)return-1;if(e===Gr||t===ar)return 1;{const n=sv(t),r=sv(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},eR=function(t,e){return t===e?0:t<e?-1:1},Co=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Je(e))},Up=function(t){if(typeof t!="object"||t===null)return Je(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Je(e[r]),n+=":",n+=Up(t[e[r]]);return n+="}",n},wE=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ot(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const EE=function(t){U(!Eu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(c=n;c;c-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(i?1:0),d.reverse();const m=d.join("");let p="";for(c=0;c<64;c+=8){let g=parseInt(m.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),p=p+g}return p.toLowerCase()},tR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},nR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function rR(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const iR=new RegExp("^-?(0*)\\d{1,10}$"),sR=-2147483648,oR=2147483647,sv=function(t){if(iR.test(t)){const e=Number(t);if(e>=sR&&e<=oR)return e}return null},Qs=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw vt("Exception was thrown by user callback.",n),e},Math.floor(0))}},aR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,$t(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(it("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vt(e)}}class Es{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Es.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="5",xE="v",SE="s",CE="r",IE="f",TE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kE="ls",NE="p",cf="ac",RE="websocket",PE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,i,s=!1,o="",l=!1,c=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function uR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function AE(t,e,n){U(typeof e=="string","typeof type must == string"),U(typeof n=="object","typeof params must == object");let r;if(e===RE)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===PE)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);uR(t)&&(n.ns=t.namespace);const i=[];return ot(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.counters_={}}incrementCounter(e,n=1){Sn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ek(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd={},Gd={};function Bp(t){const e=t.toString();return Vd[e]||(Vd[e]=new dR),Vd[e]}function hR(t,e){const n=t.toString();return Gd[n]||(Gd[n]=e()),Gd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Qs(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="start",pR="close",mR="pLPCommand",gR="pRTLPCB",jE="id",OE="pw",DE="ser",yR="cb",vR="seg",_R="ts",wR="d",ER="dframe",LE=1870,ME=30,xR=LE-ME,SR=25e3,CR=3e4;class Nr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wa(e),this.stats_=Bp(n),this.urlFn=c=>(this.appCheckToken&&(c[cf]=this.appCheckToken),AE(n,PE,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new fR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(CR)),ZN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $p((...s)=>{const[o,l,c,d,m]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ov)this.id=l,this.password=c;else if(o===pR)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[ov]="t",r[DE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[yR]=this.scriptTagHolder.uniqueCallbackIdentifier),r[xE]=zp,this.transportSessionId&&(r[SE]=this.transportSessionId),this.lastSessionId&&(r[kE]=this.lastSessionId),this.applicationId&&(r[NE]=this.applicationId),this.appCheckToken&&(r[cf]=this.appCheckToken),typeof location<"u"&&location.hostname&&TE.test(location.hostname)&&(r[CE]=IE);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Nr.forceAllow_=!0}static forceDisallow(){Nr.forceDisallow_=!0}static isAvailable(){return Nr.forceAllow_?!0:!Nr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!tR()&&!nR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Je(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Jw(n),i=wE(r,xR);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[ER]="t",r[jE]=e,r[OE]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Je(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class $p{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=yE(),window[mR+this.uniqueCallbackIdentifier]=e,window[gR+this.uniqueCallbackIdentifier]=n,this.myIFrame=$p.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){it("frame writing exception"),l.stack&&it(l.stack),it(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||it("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[jE]=this.myID,e[OE]=this.myPW,e[DE]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ME+r.length<=LE;){const o=this.pendingSegs.shift();r=r+"&"+vR+i+"="+o.seg+"&"+_R+i+"="+o.ts+"&"+wR+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(SR)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{it("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=16384,TR=45e3;let Oc=null;typeof MozWebSocket<"u"?Oc=MozWebSocket:typeof WebSocket<"u"&&(Oc=WebSocket);class en{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wa(this.connId),this.stats_=Bp(n),this.connURL=en.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[xE]=zp,typeof location<"u"&&location.hostname&&TE.test(location.hostname)&&(o[CE]=IE),n&&(o[SE]=n),r&&(o[kE]=r),i&&(o[cf]=i),s&&(o[NE]=s),AE(e,RE,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pi.set("previous_websocket_failure",!0);try{let r;oE(),this.mySock=new Oc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){en.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Oc!==null&&!en.forceDisallow_}static previouslyFailed(){return pi.isInMemoryStorage||pi.get("previous_websocket_failure")===!0}markConnectionHealthy(){pi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=wa(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(U(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Je(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=wE(n,IR);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(TR))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}en.responsesRequiredToBeHealthy=2;en.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{static get ALL_TRANSPORTS(){return[Nr,en]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=en&&en.isAvailable();let r=n&&!en.previouslyFailed();if(e.webSocketOnly&&(n||vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[en];else{const i=this.transports_=[];for(const s of Os.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Os.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Os.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=6e4,NR=5e3,RR=10*1024,PR=100*1024,qd="t",av="d",bR="s",lv="r",AR="e",cv="o",uv="a",dv="n",hv="p",jR="h";class OR{constructor(e,n,r,i,s,o,l,c,d,m){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wa("c:"+this.id+":"),this.transportManager_=new Os(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>PR?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>RR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(qd in e){const n=e[qd];n===uv?this.upgradeIfSecondaryHealthy_():n===lv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Co("t",e),r=Co("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:uv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Co("t",e),r=Co("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Co(qd,e);if(av in e){const r=e[av];if(n===jR){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===dv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===bR?this.onConnectionShutdown_(r):n===lv?this.onReset_(r):n===AR?lf("Server Error: "+r):n===cv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),zp!==r&&vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(kR))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(NR))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.allowedEvents_=e,this.listeners_={},U(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){U(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends UE{static getInstance(){return new Dc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return U(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=32,pv=768;class ye{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function pe(){return new ye("")}function Z(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function qr(t){return t.pieces_.length-t.pieceNum_}function Ee(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ye(t.pieces_,e)}function Hp(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function DR(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function xa(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function zE(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ye(e,0)}function De(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ye)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ye(n,0)}function ee(t){return t.pieceNum_>=t.pieces_.length}function Ct(t,e){const n=Z(t),r=Z(e);if(n===null)return e;if(n===r)return Ct(Ee(t),Ee(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function LR(t,e){const n=xa(t,0),r=xa(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Ui(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Wp(t,e){if(qr(t)!==qr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function nn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(qr(t)>qr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class MR{constructor(e,n){this.errorPrefix_=n,this.parts_=xa(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vu(this.parts_[r]);BE(this)}}function FR(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vu(e),BE(t)}function UR(t){const e=t.parts_.pop();t.byteLength_-=vu(e),t.parts_.length>0&&(t.byteLength_-=1)}function BE(t){if(t.byteLength_>pv)throw new Error(t.errorPrefix_+"has a key path longer than "+pv+" bytes ("+t.byteLength_+").");if(t.parts_.length>fv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fv+") or object contains a cycle "+ui(t))}function ui(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends UE{static getInstance(){return new Vp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return U(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=1e3,zR=60*5*1e3,mv=30*1e3,BR=1.3,$R=3e4,HR="server_kill",gv=3;class sn extends FE{constructor(e,n,r,i,s,o,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=sn.nextPersistentConnectionId_++,this.log_=Wa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Io,this.maxReconnectDelay_=zR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!oE())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Dc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Je(s)),U(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Bt,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),U(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),U(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const c=l.d,d=l.s;sn.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(d,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Sn(e,"w")){const r=Si(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Lk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Dk(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),U(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Je(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):lf("Unrecognized action received from server: "+Je(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){U(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Io,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Io,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$R&&(this.reconnectDelay_=Io),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*BR)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+sn.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,r())},d=function(p){U(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(p)};this.realtime_={close:c,sendRequest:d};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,g]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);o?it("getToken() completed but was canceled"):(it("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=g&&g.token,l=new OR(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,k=>{vt(k+" ("+this.repoInfo_.toString()+")"),this.interrupt(HR)},s))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&vt(p),c())}}}interrupt(e){it("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){it("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bc(this.interruptReasons_)&&(this.reconnectDelay_=Io,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Up(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ye(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){it("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gv&&(this.reconnectDelay_=mv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){it("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+pE.replace(/\./g,"-")]=1,Lp()?e["framework.cordova"]=1:sE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Dc.getInstance().currentlyOnline();return bc(this.interruptReasons_)&&e}}sn.nextPersistentConnectionId_=0;sn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new te(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new te(Gr,e),i=new te(Gr,n);return this.compare(r,i)!==0}minPost(){return te.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol;class $E extends xu{static get __EMPTY_NODE(){return Ol}static set __EMPTY_NODE(e){Ol=e}compare(e,n){return Ui(e.name,n.name)}isDefinedOn(e){throw Ks("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return te.MIN}maxPost(){return new te(ar,Ol)}makePost(e,n){return U(typeof e=="string","KeyIndex indexValue must always be a string."),new te(e,Ol)}toString(){return".key"}}const On=new $E;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??rt.RED,this.left=i??Dt.EMPTY_NODE,this.right=s??Dt.EMPTY_NODE}copy(e,n,r,i,s){return new rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Dt.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rt.RED=!0;rt.BLACK=!1;class WR{copy(e,n,r,i,s){return this}insert(e,n,r){return new rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Dt{constructor(e,n=Dt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Dt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rt.BLACK,null,null))}remove(e){return new Dt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Dl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Dl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Dl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Dl(this.root_,null,this.comparator_,!0,e)}}Dt.EMPTY_NODE=new WR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){return Ui(t.name,e.name)}function Gp(t,e){return Ui(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf;function GR(t){uf=t}const HE=function(t){return typeof t=="number"?"number:"+EE(t):"string:"+t},WE=function(t){if(t.isLeafNode()){const e=t.val();U(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Sn(e,".sv"),"Priority must be a string or number.")}else U(t===uf||t.isEmpty(),"priority of unexpected type.");U(t===uf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yv;class tt{static set __childrenNodeConstructor(e){yv=e}static get __childrenNodeConstructor(){return yv}constructor(e,n=tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,U(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),WE(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ee(e)?this:Z(e)===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Z(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(U(r!==".priority"||qr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ee(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+HE(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=EE(this.value_):e+=this.value_,this.lazyHash_=vE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof tt.__childrenNodeConstructor?-1:(U(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=tt.VALUE_TYPE_ORDER.indexOf(n),s=tt.VALUE_TYPE_ORDER.indexOf(r);return U(i>=0,"Unknown leaf type: "+n),U(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VE,GE;function qR(t){VE=t}function KR(t){GE=t}class YR extends xu{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ui(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return te.MIN}maxPost(){return new te(ar,new tt("[PRIORITY-POST]",GE))}makePost(e,n){const r=VE(e);return new te(n,new tt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ce=new YR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=Math.log(2);class XR{constructor(e){const n=s=>parseInt(Math.log(s)/QR,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Lc=function(t,e,n,r){t.sort(e);const i=function(c,d){const m=d-c;let p,g;if(m===0)return null;if(m===1)return p=t[c],g=n?n(p):p,new rt(g,p.node,rt.BLACK,null,null);{const k=parseInt(m/2,10)+c,T=i(c,k),R=i(k+1,d);return p=t[k],g=n?n(p):p,new rt(g,p.node,rt.BLACK,T,R)}},s=function(c){let d=null,m=null,p=t.length;const g=function(T,R){const O=p-T,x=p;p-=T;const _=i(O+1,x),I=t[O],j=n?n(I):I;k(new rt(j,I.node,R,null,_))},k=function(T){d?(d.left=T,d=T):(m=T,d=T)};for(let T=0;T<c.count;++T){const R=c.nextBitIsOne(),O=Math.pow(2,c.count-(T+1));R?g(O,rt.BLACK):(g(O,rt.BLACK),g(O,rt.RED))}return m},o=new XR(t.length),l=s(o);return new Dt(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd;const Ji={};class Yn{static get Default(){return U(Ji&&Ce,"ChildrenNode.ts has not been loaded"),Kd=Kd||new Yn({".priority":Ji},{".priority":Ce}),Kd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Si(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Dt?n:null}hasIndex(e){return Sn(this.indexSet_,e.toString())}addIndex(e,n){U(e!==On,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(te.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Lc(r,e.getCompare()):l=Ji;const c=e.toString(),d=Object.assign({},this.indexSet_);d[c]=e;const m=Object.assign({},this.indexes_);return m[c]=l,new Yn(m,d)}addToIndexes(e,n){const r=Ac(this.indexes_,(i,s)=>{const o=Si(this.indexSet_,s);if(U(o,"Missing index implementation for "+s),i===Ji)if(o.isDefinedOn(e.node)){const l=[],c=n.getIterator(te.Wrap);let d=c.getNext();for(;d;)d.name!==e.name&&l.push(d),d=c.getNext();return l.push(e),Lc(l,o.getCompare())}else return Ji;else{const l=n.get(e.name);let c=i;return l&&(c=c.remove(new te(e.name,l))),c.insert(e,e.node)}});return new Yn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ac(this.indexes_,i=>{if(i===Ji)return i;{const s=n.get(e.name);return s?i.remove(new te(e.name,s)):i}});return new Yn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To;class X{static get EMPTY_NODE(){return To||(To=new X(new Dt(Gp),null,Yn.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&WE(this.priorityNode_),this.children_.isEmpty()&&U(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||To}updatePriority(e){return this.children_.isEmpty()?this:new X(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?To:n}}getChild(e){const n=Z(e);return n===null?this:this.getImmediateChild(n).getChild(Ee(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(U(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new te(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?To:this.priorityNode_;return new X(i,o,s)}}updateChild(e,n){const r=Z(e);if(r===null)return n;{U(Z(e)!==".priority"||qr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Ee(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ce,(o,l)=>{n[o]=l.val(e),r++,s&&X.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+HE(this.getPriority().val())+":"),this.forEachChild(Ce,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":vE(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new te(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new te(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new te(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,te.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,te.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Va?-1:0}withIndex(e){if(e===On||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new X(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===On||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ce),i=n.getIterator(Ce);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===On?null:this.indexMap_.get(e.toString())}}X.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class JR extends X{constructor(){super(new Dt(Gp),X.EMPTY_NODE,Yn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return X.EMPTY_NODE}isEmpty(){return!1}}const Va=new JR;Object.defineProperties(te,{MIN:{value:new te(Gr,X.EMPTY_NODE)},MAX:{value:new te(ar,Va)}});$E.__EMPTY_NODE=X.EMPTY_NODE;tt.__childrenNodeConstructor=X;GR(Va);KR(Va);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=!0;function Ue(t,e=null){if(t===null)return X.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),U(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new tt(n,Ue(e))}if(!(t instanceof Array)&&ZR){const n=[];let r=!1;if(ot(t,(o,l)=>{if(o.substring(0,1)!=="."){const c=Ue(l);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new te(o,c)))}}),n.length===0)return X.EMPTY_NODE;const s=Lc(n,VR,o=>o.name,Gp);if(r){const o=Lc(n,Ce.getCompare());return new X(s,Ue(e),new Yn({".priority":o},{".priority":Ce}))}else return new X(s,Ue(e),Yn.Default)}else{let n=X.EMPTY_NODE;return ot(t,(r,i)=>{if(Sn(t,r)&&r.substring(0,1)!=="."){const s=Ue(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ue(e))}}qR(Ue);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp extends xu{constructor(e){super(),this.indexPath_=e,U(!ee(e)&&Z(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ui(e.name,n.name):s}makePost(e,n){const r=Ue(e),i=X.EMPTY_NODE.updateChild(this.indexPath_,r);return new te(n,i)}maxPost(){const e=X.EMPTY_NODE.updateChild(this.indexPath_,Va);return new te(ar,e)}toString(){return xa(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP extends xu{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ui(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return te.MIN}maxPost(){return te.MAX}makePost(e,n){const r=Ue(e);return new te(n,r)}toString(){return".value"}}const Kp=new eP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t){return{type:"value",snapshotNode:t}}function Ds(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Sa(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ca(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function tP(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){U(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Sa(n,l)):U(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Ds(n,r)):o.trackChildChange(Ca(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ce,(i,s)=>{n.hasChild(i)||r.trackChildChange(Sa(i,s))}),n.isLeafNode()||n.forEachChild(Ce,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ca(i,s,o))}else r.trackChildChange(Ds(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?X.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.indexedFilter_=new Yp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ia.getStartPost_(e),this.endPost_=Ia.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new te(n,r))||(r=X.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=X.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(X.EMPTY_NODE);const s=this;return n.forEachChild(Ce,(o,l)=>{s.matches(new te(o,l))||(i=i.updateImmediateChild(o,X.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ia(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new te(n,r))||(r=X.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=X.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=X.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(X.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,X.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const p=this.index_.getCompare();o=(g,k)=>p(k,g)}else o=this.index_.getCompare();const l=e;U(l.numChildren()===this.limit_,"");const c=new te(n,r),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),m=this.rangedFilter_.matches(c);if(l.hasChild(n)){const p=l.getImmediateChild(n);let g=i.getChildAfterChild(this.index_,d,this.reverse_);for(;g!=null&&(g.name===n||l.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);const k=g==null?1:o(g,c);if(m&&!r.isEmpty()&&k>=0)return s!=null&&s.trackChildChange(Ca(n,r,p)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Sa(n,p));const R=l.updateImmediateChild(n,X.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s!=null&&s.trackChildChange(Ds(g.name,g.node)),R.updateImmediateChild(g.name,g.node)):R}}else return r.isEmpty()?e:m&&o(d,c)>=0?(s!=null&&(s.trackChildChange(Sa(d.name,d.node)),s.trackChildChange(Ds(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(d.name,X.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ce}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return U(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return U(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gr}hasEnd(){return this.endSet_}getIndexEndValue(){return U(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return U(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ar}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return U(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ce}copy(){const e=new Qp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rP(t){return t.loadsAllData()?new Yp(t.getIndex()):t.hasLimit()?new nP(t):new Ia(t)}function iP(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function sP(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function df(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function oP(t,e,n){let r;return t.index_===On||n?r=df(t,e,n):r=df(t,e,ar),r.startAfterSet_=!0,r}function hf(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function aP(t,e,n){let r;return t.index_===On||n?r=hf(t,e,n):r=hf(t,e,Gr),r.endBeforeSet_=!0,r}function Su(t,e){const n=t.copy();return n.index_=e,n}function vv(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ce?n="$priority":t.index_===Kp?n="$value":t.index_===On?n="$key":(U(t.index_ instanceof qp,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Je(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Je(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Je(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Je(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Je(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _v(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ce&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends FE{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(U(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Wa("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Mc.getListenId_(e,r),l={};this.listens_[o]=l;const c=vv(e._queryParams);this.restRequest_(s+".json",c,(d,m)=>{let p=m;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(s,p,!1,r),Si(this.listens_,o)===l){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",i(g,null)}})}unlisten(e,n){const r=Mc.getListenId_(e,n);delete this.listens_[r]}get(e){const n=vv(e._queryParams),r=e._path.toString(),i=new Bt;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ys(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=wa(l.responseText)}catch{vt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,c)}else l.status!==401&&l.status!==404&&vt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.rootNode_=X.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(){return{value:null,children:new Map}}function Xs(t,e,n){if(ee(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Z(e);t.children.has(r)||t.children.set(r,Fc());const i=t.children.get(r);e=Ee(e),Xs(i,e,n)}}function ff(t,e){if(ee(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Ce,(r,i)=>{Xs(t,new ye(r),i)}),ff(t,e)}}else if(t.children.size>0){const n=Z(e);return e=Ee(e),t.children.has(n)&&ff(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function pf(t,e,n){t.value!==null?n(e,t.value):cP(t,(r,i)=>{const s=new ye(e.toString()+"/"+r);pf(i,s,n)})}function cP(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ot(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=10*1e3,dP=30*1e3,hP=5*60*1e3;class fP{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new uP(e);const r=wv+(dP-wv)*Math.random();qo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ot(e,(i,s)=>{s>0&&Sn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),qo(this.reportStats_.bind(this),Math.floor(Math.random()*2*hP))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mn||(mn={}));function Xp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Jp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mn.ACK_USER_WRITE,this.source=Xp()}operationForChild(e){if(ee(this.path)){if(this.affectedTree.value!=null)return U(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ye(e));return new Uc(pe(),n,this.revert)}}else return U(Z(this.path)===e,"operationForChild called for unrelated child."),new Uc(Ee(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.source=e,this.path=n,this.type=mn.LISTEN_COMPLETE}operationForChild(e){return ee(this.path)?new Ta(this.source,pe()):new Ta(this.source,Ee(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mn.OVERWRITE}operationForChild(e){return ee(this.path)?new Ti(this.source,pe(),this.snap.getImmediateChild(e)):new Ti(this.source,Ee(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mn.MERGE}operationForChild(e){if(ee(this.path)){const n=this.children.subtree(new ye(e));return n.isEmpty()?null:n.value?new Ti(this.source,pe(),n.value):new Ls(this.source,pe(),n)}else return U(Z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ls(this.source,Ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ee(e))return this.isFullyInitialized()&&!this.filtered_;const n=Z(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function mP(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(tP(o.childName,o.snapshotNode))}),ko(t,i,"child_removed",e,r,n),ko(t,i,"child_added",e,r,n),ko(t,i,"child_moved",s,r,n),ko(t,i,"child_changed",e,r,n),ko(t,i,"value",e,r,n),i}function ko(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,c)=>yP(t,l,c)),o.forEach(l=>{const c=gP(t,l,s);i.forEach(d=>{d.respondsTo(l.type)&&e.push(d.createEvent(c,t.query_))})})}function gP(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function yP(t,e,n){if(e.childName==null||n.childName==null)throw Ks("Should only compare child_ events.");const r=new te(e.childName,e.snapshotNode),i=new te(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e){return{eventCache:t,serverCache:e}}function Ko(t,e,n,r){return Cu(new Kr(e,n,r),t.serverCache)}function KE(t,e,n,r){return Cu(t.eventCache,new Kr(e,n,r))}function zc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ki(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd;const vP=()=>(Yd||(Yd=new Dt(eR)),Yd);class xe{static fromObject(e){let n=new xe(null);return ot(e,(r,i)=>{n=n.set(new ye(r),i)}),n}constructor(e,n=vP()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:pe(),value:this.value};if(ee(e))return null;{const r=Z(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Ee(e),n);return s!=null?{path:De(new ye(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ee(e))return this;{const n=Z(e),r=this.children.get(n);return r!==null?r.subtree(Ee(e)):new xe(null)}}set(e,n){if(ee(e))return new xe(n,this.children);{const r=Z(e),s=(this.children.get(r)||new xe(null)).set(Ee(e),n),o=this.children.insert(r,s);return new xe(this.value,o)}}remove(e){if(ee(e))return this.children.isEmpty()?new xe(null):new xe(null,this.children);{const n=Z(e),r=this.children.get(n);if(r){const i=r.remove(Ee(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new xe(null):new xe(this.value,s)}else return this}}get(e){if(ee(e))return this.value;{const n=Z(e),r=this.children.get(n);return r?r.get(Ee(e)):null}}setTree(e,n){if(ee(e))return n;{const r=Z(e),s=(this.children.get(r)||new xe(null)).setTree(Ee(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new xe(this.value,o)}}fold(e){return this.fold_(pe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(De(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,pe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ee(e))return null;{const s=Z(e),o=this.children.get(s);return o?o.findOnPath_(Ee(e),De(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,pe(),n)}foreachOnPath_(e,n,r){if(ee(e))return this;{this.value&&r(n,this.value);const i=Z(e),s=this.children.get(i);return s?s.foreachOnPath_(Ee(e),De(n,i),r):new xe(null)}}foreach(e){this.foreach_(pe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(De(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.writeTree_=e}static empty(){return new _n(new xe(null))}}function Yo(t,e,n){if(ee(e))return new _n(new xe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ct(i,e);return s=s.updateChild(o,n),new _n(t.writeTree_.set(i,s))}else{const i=new xe(n),s=t.writeTree_.setTree(e,i);return new _n(s)}}}function mf(t,e,n){let r=t;return ot(n,(i,s)=>{r=Yo(r,De(e,i),s)}),r}function Ev(t,e){if(ee(e))return _n.empty();{const n=t.writeTree_.setTree(e,new xe(null));return new _n(n)}}function gf(t,e){return zi(t,e)!=null}function zi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ct(n.path,e)):null}function xv(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ce,(r,i)=>{e.push(new te(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new te(r,i.value))}),e}function Br(t,e){if(ee(e))return t;{const n=zi(t,e);return n!=null?new _n(new xe(n)):new _n(t.writeTree_.subtree(e))}}function yf(t){return t.writeTree_.isEmpty()}function Ms(t,e){return YE(pe(),t.writeTree_,e)}function YE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(U(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=YE(De(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(De(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t,e){return ZE(e,t)}function _P(t,e,n,r,i){U(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Yo(t.visibleWrites,e,n)),t.lastWriteId=r}function wP(t,e,n,r){U(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=mf(t.visibleWrites,e,n),t.lastWriteId=r}function EP(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function xP(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);U(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&SP(l,r.path)?i=!1:nn(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return CP(t),!0;if(r.snap)t.visibleWrites=Ev(t.visibleWrites,r.path);else{const l=r.children;ot(l,c=>{t.visibleWrites=Ev(t.visibleWrites,De(r.path,c))})}return!0}else return!1}function SP(t,e){if(t.snap)return nn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&nn(De(t.path,n),e))return!0;return!1}function CP(t){t.visibleWrites=QE(t.allWrites,IP,pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function IP(t){return t.visible}function QE(t,e,n){let r=_n.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)nn(n,o)?(l=Ct(n,o),r=Yo(r,l,s.snap)):nn(o,n)&&(l=Ct(o,n),r=Yo(r,pe(),s.snap.getChild(l)));else if(s.children){if(nn(n,o))l=Ct(n,o),r=mf(r,l,s.children);else if(nn(o,n))if(l=Ct(o,n),ee(l))r=mf(r,pe(),s.children);else{const c=Si(s.children,Z(l));if(c){const d=c.getChild(Ee(l));r=Yo(r,pe(),d)}}}else throw Ks("WriteRecord should have .snap or .children")}}return r}function XE(t,e,n,r,i){if(!r&&!i){const s=zi(t.visibleWrites,e);if(s!=null)return s;{const o=Br(t.visibleWrites,e);if(yf(o))return n;if(n==null&&!gf(o,pe()))return null;{const l=n||X.EMPTY_NODE;return Ms(o,l)}}}else{const s=Br(t.visibleWrites,e);if(!i&&yf(s))return n;if(!i&&n==null&&!gf(s,pe()))return null;{const o=function(d){return(d.visible||i)&&(!r||!~r.indexOf(d.writeId))&&(nn(d.path,e)||nn(e,d.path))},l=QE(t.allWrites,o,e),c=n||X.EMPTY_NODE;return Ms(l,c)}}}function TP(t,e,n){let r=X.EMPTY_NODE;const i=zi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ce,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Br(t.visibleWrites,e);return n.forEachChild(Ce,(o,l)=>{const c=Ms(Br(s,new ye(o)),l);r=r.updateImmediateChild(o,c)}),xv(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Br(t.visibleWrites,e);return xv(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function kP(t,e,n,r,i){U(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=De(e,n);if(gf(t.visibleWrites,s))return null;{const o=Br(t.visibleWrites,s);return yf(o)?i.getChild(n):Ms(o,i.getChild(n))}}function NP(t,e,n,r){const i=De(e,n),s=zi(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Br(t.visibleWrites,i);return Ms(o,r.getNode().getImmediateChild(n))}else return null}function RP(t,e){return zi(t.visibleWrites,e)}function PP(t,e,n,r,i,s,o){let l;const c=Br(t.visibleWrites,e),d=zi(c,pe());if(d!=null)l=d;else if(n!=null)l=Ms(c,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const m=[],p=o.getCompare(),g=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let k=g.getNext();for(;k&&m.length<i;)p(k,r)!==0&&m.push(k),k=g.getNext();return m}else return[]}function bP(){return{visibleWrites:_n.empty(),allWrites:[],lastWriteId:-1}}function Bc(t,e,n,r){return XE(t.writeTree,t.treePath,e,n,r)}function em(t,e){return TP(t.writeTree,t.treePath,e)}function Sv(t,e,n,r){return kP(t.writeTree,t.treePath,e,n,r)}function $c(t,e){return RP(t.writeTree,De(t.treePath,e))}function AP(t,e,n,r,i,s){return PP(t.writeTree,t.treePath,e,n,r,i,s)}function tm(t,e,n){return NP(t.writeTree,t.treePath,e,n)}function JE(t,e){return ZE(De(t.treePath,e),t.writeTree)}function ZE(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;U(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),U(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ca(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Sa(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ds(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ca(r,e.snapshotNode,i.oldSnap));else throw Ks("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const ex=new OP;class nm{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Kr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tm(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ki(this.viewCache_),s=AP(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){return{filter:t}}function LP(t,e){U(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),U(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function MP(t,e,n,r,i){const s=new jP;let o,l;if(n.type===mn.OVERWRITE){const d=n;d.source.fromUser?o=vf(t,e,d.path,d.snap,r,i,s):(U(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered()&&!ee(d.path),o=Hc(t,e,d.path,d.snap,r,i,l,s))}else if(n.type===mn.MERGE){const d=n;d.source.fromUser?o=UP(t,e,d.path,d.children,r,i,s):(U(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered(),o=_f(t,e,d.path,d.children,r,i,l,s))}else if(n.type===mn.ACK_USER_WRITE){const d=n;d.revert?o=$P(t,e,d.path,r,i,s):o=zP(t,e,d.path,d.affectedTree,r,i,s)}else if(n.type===mn.LISTEN_COMPLETE)o=BP(t,e,n.path,r,s);else throw Ks("Unknown operation type: "+n.type);const c=s.getChanges();return FP(e,o,c),{viewCache:o,changes:c}}function FP(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=zc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(qE(zc(e)))}}function tx(t,e,n,r,i,s){const o=e.eventCache;if($c(r,n)!=null)return e;{let l,c;if(ee(n))if(U(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=ki(e),m=d instanceof X?d:X.EMPTY_NODE,p=em(r,m);l=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const d=Bc(r,ki(e));l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const d=Z(n);if(d===".priority"){U(qr(n)===1,"Can't have a priority with additional path components");const m=o.getNode();c=e.serverCache.getNode();const p=Sv(r,n,m,c);p!=null?l=t.filter.updatePriority(m,p):l=o.getNode()}else{const m=Ee(n);let p;if(o.isCompleteForChild(d)){c=e.serverCache.getNode();const g=Sv(r,n,o.getNode(),c);g!=null?p=o.getNode().getImmediateChild(d).updateChild(m,g):p=o.getNode().getImmediateChild(d)}else p=tm(r,d,e.serverCache);p!=null?l=t.filter.updateChild(o.getNode(),d,p,m,i,s):l=o.getNode()}}return Ko(e,l,o.isFullyInitialized()||ee(n),t.filter.filtersNodes())}}function Hc(t,e,n,r,i,s,o,l){const c=e.serverCache;let d;const m=o?t.filter:t.filter.getIndexedFilter();if(ee(n))d=m.updateFullNode(c.getNode(),r,null);else if(m.filtersNodes()&&!c.isFiltered()){const k=c.getNode().updateChild(n,r);d=m.updateFullNode(c.getNode(),k,null)}else{const k=Z(n);if(!c.isCompleteForPath(n)&&qr(n)>1)return e;const T=Ee(n),O=c.getNode().getImmediateChild(k).updateChild(T,r);k===".priority"?d=m.updatePriority(c.getNode(),O):d=m.updateChild(c.getNode(),k,O,T,ex,null)}const p=KE(e,d,c.isFullyInitialized()||ee(n),m.filtersNodes()),g=new nm(i,p,s);return tx(t,p,n,i,g,l)}function vf(t,e,n,r,i,s,o){const l=e.eventCache;let c,d;const m=new nm(i,e,s);if(ee(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ko(e,d,!0,t.filter.filtersNodes());else{const p=Z(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ko(e,d,l.isFullyInitialized(),l.isFiltered());else{const g=Ee(n),k=l.getNode().getImmediateChild(p);let T;if(ee(g))T=r;else{const R=m.getCompleteChild(p);R!=null?Hp(g)===".priority"&&R.getChild(zE(g)).isEmpty()?T=R:T=R.updateChild(g,r):T=X.EMPTY_NODE}if(k.equals(T))c=e;else{const R=t.filter.updateChild(l.getNode(),p,T,g,m,o);c=Ko(e,R,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Cv(t,e){return t.eventCache.isCompleteForChild(e)}function UP(t,e,n,r,i,s,o){let l=e;return r.foreach((c,d)=>{const m=De(n,c);Cv(e,Z(m))&&(l=vf(t,l,m,d,i,s,o))}),r.foreach((c,d)=>{const m=De(n,c);Cv(e,Z(m))||(l=vf(t,l,m,d,i,s,o))}),l}function Iv(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function _f(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,d;ee(n)?d=r:d=new xe(null).setTree(n,r);const m=e.serverCache.getNode();return d.children.inorderTraversal((p,g)=>{if(m.hasChild(p)){const k=e.serverCache.getNode().getImmediateChild(p),T=Iv(t,k,g);c=Hc(t,c,new ye(p),T,i,s,o,l)}}),d.children.inorderTraversal((p,g)=>{const k=!e.serverCache.isCompleteForChild(p)&&g.value===null;if(!m.hasChild(p)&&!k){const T=e.serverCache.getNode().getImmediateChild(p),R=Iv(t,T,g);c=Hc(t,c,new ye(p),R,i,s,o,l)}}),c}function zP(t,e,n,r,i,s,o){if($c(i,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ee(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Hc(t,e,n,c.getNode().getChild(n),i,s,l,o);if(ee(n)){let d=new xe(null);return c.getNode().forEachChild(On,(m,p)=>{d=d.set(new ye(m),p)}),_f(t,e,n,d,i,s,l,o)}else return e}else{let d=new xe(null);return r.foreach((m,p)=>{const g=De(n,m);c.isCompleteForPath(g)&&(d=d.set(m,c.getNode().getChild(g)))}),_f(t,e,n,d,i,s,l,o)}}function BP(t,e,n,r,i){const s=e.serverCache,o=KE(e,s.getNode(),s.isFullyInitialized()||ee(n),s.isFiltered());return tx(t,o,n,r,ex,i)}function $P(t,e,n,r,i,s){let o;if($c(r,n)!=null)return e;{const l=new nm(r,e,i),c=e.eventCache.getNode();let d;if(ee(n)||Z(n)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Bc(r,ki(e));else{const p=e.serverCache.getNode();U(p instanceof X,"serverChildren would be complete if leaf node"),m=em(r,p)}m=m,d=t.filter.updateFullNode(c,m,s)}else{const m=Z(n);let p=tm(r,m,e.serverCache);p==null&&e.serverCache.isCompleteForChild(m)&&(p=c.getImmediateChild(m)),p!=null?d=t.filter.updateChild(c,m,p,Ee(n),l,s):e.eventCache.getNode().hasChild(m)?d=t.filter.updateChild(c,m,X.EMPTY_NODE,Ee(n),l,s):d=c,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Bc(r,ki(e)),o.isLeafNode()&&(d=t.filter.updateFullNode(d,o,s)))}return o=e.serverCache.isFullyInitialized()||$c(r,pe())!=null,Ko(e,d,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Yp(r.getIndex()),s=rP(r);this.processor_=DP(s);const o=n.serverCache,l=n.eventCache,c=i.updateFullNode(X.EMPTY_NODE,o.getNode(),null),d=s.updateFullNode(X.EMPTY_NODE,l.getNode(),null),m=new Kr(c,o.isFullyInitialized(),i.filtersNodes()),p=new Kr(d,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Cu(p,m),this.eventGenerator_=new pP(this.query_)}get query(){return this.query_}}function WP(t){return t.viewCache_.serverCache.getNode()}function VP(t){return zc(t.viewCache_)}function GP(t,e){const n=ki(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ee(e)&&!n.getImmediateChild(Z(e)).isEmpty())?n.getChild(e):null}function Tv(t){return t.eventRegistrations_.length===0}function qP(t,e){t.eventRegistrations_.push(e)}function kv(t,e,n){const r=[];if(n){U(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Nv(t,e,n,r){e.type===mn.MERGE&&e.source.queryId!==null&&(U(ki(t.viewCache_),"We should always have a full cache before handling merges"),U(zc(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=MP(t.processor_,i,e,n,r);return LP(t.processor_,s.viewCache),U(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,nx(t,s.changes,s.viewCache.eventCache.getNode(),null)}function KP(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ce,(s,o)=>{r.push(Ds(s,o))}),n.isFullyInitialized()&&r.push(qE(n.getNode())),nx(t,r,n.getNode(),e)}function nx(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return mP(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc;class rx{constructor(){this.views=new Map}}function YP(t){U(!Wc,"__referenceConstructor has already been defined"),Wc=t}function QP(){return U(Wc,"Reference.ts has not been loaded"),Wc}function XP(t){return t.views.size===0}function rm(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return U(s!=null,"SyncTree gave us an op for an invalid query."),Nv(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Nv(o,e,n,r));return s}}function ix(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=Bc(n,i?r:null),c=!1;l?c=!0:r instanceof X?(l=em(n,r),c=!1):(l=X.EMPTY_NODE,c=!1);const d=Cu(new Kr(l,c,!1),new Kr(r,i,!1));return new HP(e,d)}return o}function JP(t,e,n,r,i,s){const o=ix(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),qP(o,n),KP(o,n)}function ZP(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=Yr(t);if(i==="default")for(const[c,d]of t.views.entries())o=o.concat(kv(d,n,r)),Tv(d)&&(t.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{const c=t.views.get(i);c&&(o=o.concat(kv(c,n,r)),Tv(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return l&&!Yr(t)&&s.push(new(QP())(e._repo,e._path)),{removed:s,events:o}}function sx(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $r(t,e){let n=null;for(const r of t.views.values())n=n||GP(r,e);return n}function ox(t,e){if(e._queryParams.loadsAllData())return Tu(t);{const r=e._queryIdentifier;return t.views.get(r)}}function ax(t,e){return ox(t,e)!=null}function Yr(t){return Tu(t)!=null}function Tu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc;function e2(t){U(!Vc,"__referenceConstructor has already been defined"),Vc=t}function t2(){return U(Vc,"Reference.ts has not been loaded"),Vc}let n2=1;class Rv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xe(null),this.pendingWriteTree_=bP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function im(t,e,n,r,i){return _P(t.pendingWriteTree_,e,n,r,i),i?Js(t,new Ti(Xp(),e,n)):[]}function r2(t,e,n,r){wP(t.pendingWriteTree_,e,n,r);const i=xe.fromObject(n);return Js(t,new Ls(Xp(),e,i))}function Rr(t,e,n=!1){const r=EP(t.pendingWriteTree_,e);if(xP(t.pendingWriteTree_,e)){let s=new xe(null);return r.snap!=null?s=s.set(pe(),!0):ot(r.children,o=>{s=s.set(new ye(o),!0)}),Js(t,new Uc(r.path,s,n))}else return[]}function Ga(t,e,n){return Js(t,new Ti(Jp(),e,n))}function i2(t,e,n){const r=xe.fromObject(n);return Js(t,new Ls(Jp(),e,r))}function s2(t,e){return Js(t,new Ta(Jp(),e))}function o2(t,e,n){const r=sm(t,n);if(r){const i=om(r),s=i.path,o=i.queryId,l=Ct(s,e),c=new Ta(Zp(o),l);return am(t,s,c)}else return[]}function Gc(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||ax(o,e))){const c=ZP(o,e,n,r);XP(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const d=c.removed;if(l=c.events,!i){const m=d.findIndex(g=>g._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(s,(g,k)=>Yr(k));if(m&&!p){const g=t.syncPointTree_.subtree(s);if(!g.isEmpty()){const k=c2(g);for(let T=0;T<k.length;++T){const R=k[T],O=R.query,x=dx(t,R);t.listenProvider_.startListening(Qo(O),ka(t,O),x.hashFn,x.onComplete)}}}!p&&d.length>0&&!r&&(m?t.listenProvider_.stopListening(Qo(e),null):d.forEach(g=>{const k=t.queryToTagMap.get(Nu(g));t.listenProvider_.stopListening(Qo(g),k)}))}u2(t,d)}return l}function lx(t,e,n,r){const i=sm(t,r);if(i!=null){const s=om(i),o=s.path,l=s.queryId,c=Ct(o,e),d=new Ti(Zp(l),c,n);return am(t,o,d)}else return[]}function a2(t,e,n,r){const i=sm(t,r);if(i){const s=om(i),o=s.path,l=s.queryId,c=Ct(o,e),d=xe.fromObject(n),m=new Ls(Zp(l),c,d);return am(t,o,m)}else return[]}function wf(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(g,k)=>{const T=Ct(g,i);s=s||$r(k,T),o=o||Yr(k)});let l=t.syncPointTree_.get(i);l?(o=o||Yr(l),s=s||$r(l,pe())):(l=new rx,t.syncPointTree_=t.syncPointTree_.set(i,l));let c;s!=null?c=!0:(c=!1,s=X.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((k,T)=>{const R=$r(T,pe());R&&(s=s.updateImmediateChild(k,R))}));const d=ax(l,e);if(!d&&!e._queryParams.loadsAllData()){const g=Nu(e);U(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");const k=d2();t.queryToTagMap.set(g,k),t.tagToQueryMap.set(k,g)}const m=Iu(t.pendingWriteTree_,i);let p=JP(l,e,n,m,s,c);if(!d&&!o&&!r){const g=ox(l,e);p=p.concat(h2(t,e,g))}return p}function ku(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const c=Ct(o,e),d=$r(l,c);if(d)return d});return XE(i,e,s,n,!0)}function l2(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,m)=>{const p=Ct(d,n);r=r||$r(m,p)});let i=t.syncPointTree_.get(n);i?r=r||$r(i,pe()):(i=new rx,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Kr(r,!0,!1):null,l=Iu(t.pendingWriteTree_,e._path),c=ix(i,e,l,s?o.getNode():X.EMPTY_NODE,s);return VP(c)}function Js(t,e){return cx(e,t.syncPointTree_,null,Iu(t.pendingWriteTree_,pe()))}function cx(t,e,n,r){if(ee(t.path))return ux(t,e,n,r);{const i=e.get(pe());n==null&&i!=null&&(n=$r(i,pe()));let s=[];const o=Z(t.path),l=t.operationForChild(o),c=e.children.get(o);if(c&&l){const d=n?n.getImmediateChild(o):null,m=JE(r,o);s=s.concat(cx(l,c,d,m))}return i&&(s=s.concat(rm(i,t,r,n))),s}}function ux(t,e,n,r){const i=e.get(pe());n==null&&i!=null&&(n=$r(i,pe()));let s=[];return e.children.inorderTraversal((o,l)=>{const c=n?n.getImmediateChild(o):null,d=JE(r,o),m=t.operationForChild(o);m&&(s=s.concat(ux(m,l,c,d)))}),i&&(s=s.concat(rm(i,t,r,n))),s}function dx(t,e){const n=e.query,r=ka(t,n);return{hashFn:()=>(WP(e)||X.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?o2(t,n._path,r):s2(t,n._path);{const s=rR(i,n);return Gc(t,n,null,s)}}}}function ka(t,e){const n=Nu(e);return t.queryToTagMap.get(n)}function Nu(t){return t._path.toString()+"$"+t._queryIdentifier}function sm(t,e){return t.tagToQueryMap.get(e)}function om(t){const e=t.indexOf("$");return U(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ye(t.substr(0,e))}}function am(t,e,n){const r=t.syncPointTree_.get(e);U(r,"Missing sync point for query tag that we're tracking");const i=Iu(t.pendingWriteTree_,e);return rm(r,n,i,null)}function c2(t){return t.fold((e,n,r)=>{if(n&&Yr(n))return[Tu(n)];{let i=[];return n&&(i=sx(n)),ot(r,(s,o)=>{i=i.concat(o)}),i}})}function Qo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(t2())(t._repo,t._path):t}function u2(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Nu(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function d2(){return n2++}function h2(t,e,n){const r=e._path,i=ka(t,e),s=dx(t,n),o=t.listenProvider_.startListening(Qo(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)U(!Yr(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((d,m,p)=>{if(!ee(d)&&m&&Yr(m))return[Tu(m).query];{let g=[];return m&&(g=g.concat(sx(m).map(k=>k.query))),ot(p,(k,T)=>{g=g.concat(T)}),g}});for(let d=0;d<c.length;++d){const m=c[d];t.listenProvider_.stopListening(Qo(m),ka(t,m))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new lm(n)}node(){return this.node_}}class cm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=De(this.path_,e);return new cm(this.syncTree_,n)}node(){return ku(this.syncTree_,this.path_)}}const f2=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Pv=function(t,e,n){if(!t||typeof t!="object")return t;if(U(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return p2(t[".sv"],e,n);if(typeof t[".sv"]=="object")return m2(t[".sv"],e);U(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},p2=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:U(!1,"Unexpected server value: "+t)}},m2=function(t,e,n){t.hasOwnProperty("increment")||U(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&U(!1,"Unexpected increment value: "+r);const i=e.node();if(U(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},hx=function(t,e,n,r){return dm(e,new cm(n,t),r)},um=function(t,e,n){return dm(t,new lm(e),n)};function dm(t,e,n){const r=t.getPriority().val(),i=Pv(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Pv(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new tt(l,Ue(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new tt(i))),o.forEachChild(Ce,(l,c)=>{const d=dm(c,e.getImmediateChild(l),n);d!==c&&(s=s.updateImmediateChild(l,d))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Ru(t,e){let n=e instanceof ye?e:new ye(e),r=t,i=Z(n);for(;i!==null;){const s=Si(r.node.children,i)||{children:{},childCount:0};r=new hm(i,r,s),n=Ee(n),i=Z(n)}return r}function Bi(t){return t.node.value}function fm(t,e){t.node.value=e,Ef(t)}function fx(t){return t.node.childCount>0}function g2(t){return Bi(t)===void 0&&!fx(t)}function Pu(t,e){ot(t.node.children,(n,r)=>{e(new hm(n,t,r))})}function px(t,e,n,r){n&&!r&&e(t),Pu(t,i=>{px(i,e,!0,r)}),n&&r&&e(t)}function y2(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function qa(t){return new ye(t.parent===null?t.name:qa(t.parent)+"/"+t.name)}function Ef(t){t.parent!==null&&v2(t.parent,t.name,t)}function v2(t,e,n){const r=g2(n),i=Sn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ef(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ef(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=/[\[\].#$\/\u0000-\u001F\u007F]/,w2=/[\[\].#$\u0000-\u001F\u007F]/,Qd=10*1024*1024,bu=function(t){return typeof t=="string"&&t.length!==0&&!_2.test(t)},mx=function(t){return typeof t=="string"&&t.length!==0&&!w2.test(t)},E2=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mx(t)},Na=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Eu(t)||t&&typeof t=="object"&&Sn(t,".sv")},Un=function(t,e,n,r){r&&e===void 0||Ka(Ci(t,"value"),e,n)},Ka=function(t,e,n){const r=n instanceof ye?new MR(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ui(r));if(typeof e=="function")throw new Error(t+"contains a function "+ui(r)+" with contents = "+e.toString());if(Eu(e))throw new Error(t+"contains "+e.toString()+" "+ui(r));if(typeof e=="string"&&e.length>Qd/3&&vu(e)>Qd)throw new Error(t+"contains a string greater than "+Qd+" utf8 bytes "+ui(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ot(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!bu(o)))throw new Error(t+" contains an invalid key ("+o+") "+ui(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);FR(r,o),Ka(t,l,r),UR(r)}),i&&s)throw new Error(t+' contains ".value" child '+ui(r)+" in addition to actual children.")}},x2=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=xa(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!bu(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(LR);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&nn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},gx=function(t,e,n,r){if(r&&e===void 0)return;const i=Ci(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ot(e,(o,l)=>{const c=new ye(o);if(Ka(i,l,De(n,c)),Hp(c)===".priority"&&!Na(l))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),x2(i,s)},pm=function(t,e,n){if(!(n&&e===void 0)){if(Eu(e))throw new Error(Ci(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Na(e))throw new Error(Ci(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ya=function(t,e,n,r){if(!(r&&n===void 0)&&!bu(n))throw new Error(Ci(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},mm=function(t,e,n,r){if(!(r&&n===void 0)&&!mx(n))throw new Error(Ci(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},S2=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mm(t,e,n,r)},Rn=function(t,e){if(Z(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},yx=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!bu(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!E2(n))throw new Error(Ci(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Au(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Wp(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function vx(t,e,n){Au(t,n),_x(t,r=>Wp(r,e))}function Gt(t,e,n){Au(t,n),_x(t,r=>nn(r,e)||nn(e,r))}function _x(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(I2(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function I2(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();yi&&it("event: "+n.toString()),Qs(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="repo_interrupt",T2=25;class k2{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new C2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fc(),this.transactionQueueTree_=new hm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function N2(t,e,n){if(t.stats_=Bp(t.repoInfo_),t.forceRestClient_||aR())t.server_=new Mc(t.repoInfo_,(r,i,s,o)=>{bv(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Av(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Je(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new sn(t.repoInfo_,e,(r,i,s,o)=>{bv(t,r,i,s,o)},r=>{Av(t,r)},r=>{R2(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=hR(t.repoInfo_,()=>new fP(t.stats_,t.server_)),t.infoData_=new lP,t.infoSyncTree_=new Rv({startListening:(r,i,s,o)=>{let l=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(l=Ga(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),gm(t,"connected",!1),t.serverSyncTree_=new Rv({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,c)=>{const d=o(l,c);Gt(t.eventQueue_,r._path,d)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Ex(t){const n=t.infoData_.getNode(new ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Qa(t){return f2({timestamp:Ex(t)})}function bv(t,e,n,r,i){t.dataUpdateCount++;const s=new ye(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=Ac(n,d=>Ue(d));o=a2(t.serverSyncTree_,s,c,i)}else{const c=Ue(n);o=lx(t.serverSyncTree_,s,c,i)}else if(r){const c=Ac(n,d=>Ue(d));o=i2(t.serverSyncTree_,s,c)}else{const c=Ue(n);o=Ga(t.serverSyncTree_,s,c)}let l=s;o.length>0&&(l=Fs(t,s)),Gt(t.eventQueue_,l,o)}function Av(t,e){gm(t,"connected",e),e===!1&&A2(t)}function R2(t,e){ot(e,(n,r)=>{gm(t,n,r)})}function gm(t,e,n){const r=new ye("/.info/"+e),i=Ue(n);t.infoData_.updateSnapshot(r,i);const s=Ga(t.infoSyncTree_,r,i);Gt(t.eventQueue_,r,s)}function ju(t){return t.nextWriteId_++}function P2(t,e,n){const r=l2(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Ue(i).withIndex(e._queryParams.getIndex());wf(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Ga(t.serverSyncTree_,e._path,s);else{const l=ka(t.serverSyncTree_,e);o=lx(t.serverSyncTree_,e._path,s,l)}return Gt(t.eventQueue_,e._path,o),Gc(t.serverSyncTree_,e,n,null,!0),s},i=>(Zs(t,"get for query "+Je(e)+" failed: "+i),Promise.reject(new Error(i))))}function ym(t,e,n,r,i){Zs(t,"set",{path:e.toString(),value:n,priority:r});const s=Qa(t),o=Ue(n,r),l=ku(t.serverSyncTree_,e),c=um(o,l,s),d=ju(t),m=im(t.serverSyncTree_,e,c,d,!0);Au(t.eventQueue_,m),t.server_.put(e.toString(),o.val(!0),(g,k)=>{const T=g==="ok";T||vt("set at "+e+" failed: "+g);const R=Rr(t.serverSyncTree_,d,!T);Gt(t.eventQueue_,e,R),Qr(t,i,g,k)});const p=_m(t,e);Fs(t,p),Gt(t.eventQueue_,p,[])}function b2(t,e,n,r){Zs(t,"update",{path:e.toString(),value:n});let i=!0;const s=Qa(t),o={};if(ot(n,(l,c)=>{i=!1,o[l]=hx(De(e,l),Ue(c),t.serverSyncTree_,s)}),i)it("update() called with empty data.  Don't do anything."),Qr(t,r,"ok",void 0);else{const l=ju(t),c=r2(t.serverSyncTree_,e,o,l);Au(t.eventQueue_,c),t.server_.merge(e.toString(),n,(d,m)=>{const p=d==="ok";p||vt("update at "+e+" failed: "+d);const g=Rr(t.serverSyncTree_,l,!p),k=g.length>0?Fs(t,e):e;Gt(t.eventQueue_,k,g),Qr(t,r,d,m)}),ot(n,d=>{const m=_m(t,De(e,d));Fs(t,m)}),Gt(t.eventQueue_,e,[])}}function A2(t){Zs(t,"onDisconnectEvents");const e=Qa(t),n=Fc();pf(t.onDisconnect_,pe(),(i,s)=>{const o=hx(i,s,t.serverSyncTree_,e);Xs(n,i,o)});let r=[];pf(n,pe(),(i,s)=>{r=r.concat(Ga(t.serverSyncTree_,i,s));const o=_m(t,i);Fs(t,o)}),t.onDisconnect_=Fc(),Gt(t.eventQueue_,pe(),r)}function j2(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&ff(t.onDisconnect_,e),Qr(t,n,r,i)})}function jv(t,e,n,r){const i=Ue(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Xs(t.onDisconnect_,e,i),Qr(t,r,s,o)})}function O2(t,e,n,r,i){const s=Ue(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,l)=>{o==="ok"&&Xs(t.onDisconnect_,e,s),Qr(t,i,o,l)})}function D2(t,e,n,r){if(bc(n)){it("onDisconnect().update() called with empty data.  Don't do anything."),Qr(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&ot(n,(o,l)=>{const c=Ue(l);Xs(t.onDisconnect_,De(e,o),c)}),Qr(t,r,i,s)})}function L2(t,e,n){let r;Z(e._path)===".info"?r=wf(t.infoSyncTree_,e,n):r=wf(t.serverSyncTree_,e,n),vx(t.eventQueue_,e._path,r)}function xf(t,e,n){let r;Z(e._path)===".info"?r=Gc(t.infoSyncTree_,e,n):r=Gc(t.serverSyncTree_,e,n),vx(t.eventQueue_,e._path,r)}function xx(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wx)}function M2(t){t.persistentConnection_&&t.persistentConnection_.resume(wx)}function Zs(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),it(n,...e)}function Qr(t,e,n,r){e&&Qs(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function F2(t,e,n,r,i,s){Zs(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:yE(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=vm(t,e,void 0);o.currentInputSnapshot=l;const c=o.update(l.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ka("transaction failed: Data returned ",c,o.path),o.status=0;const d=Ru(t.transactionQueueTree_,e),m=Bi(d)||[];m.push(o),fm(d,m);let p;typeof c=="object"&&c!==null&&Sn(c,".priority")?(p=Si(c,".priority"),U(Na(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(ku(t.serverSyncTree_,e)||X.EMPTY_NODE).getPriority().val();const g=Qa(t),k=Ue(c,p),T=um(k,l,g);o.currentOutputSnapshotRaw=k,o.currentOutputSnapshotResolved=T,o.currentWriteId=ju(t);const R=im(t.serverSyncTree_,e,T,o.currentWriteId,o.applyLocally);Gt(t.eventQueue_,e,R),Ou(t,t.transactionQueueTree_)}}function vm(t,e,n){return ku(t.serverSyncTree_,e,n)||X.EMPTY_NODE}function Ou(t,e=t.transactionQueueTree_){if(e||Du(t,e),Bi(e)){const n=Cx(t,e);U(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&U2(t,qa(e),n)}else fx(e)&&Pu(e,n=>{Ou(t,n)})}function U2(t,e,n){const r=n.map(d=>d.currentWriteId),i=vm(t,e,r);let s=i;const o=i.hash();for(let d=0;d<n.length;d++){const m=n[d];U(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const p=Ct(e,m.path);s=s.updateChild(p,m.currentOutputSnapshotRaw)}const l=s.val(!0),c=e;t.server_.put(c.toString(),l,d=>{Zs(t,"transaction put response",{path:c.toString(),status:d});let m=[];if(d==="ok"){const p=[];for(let g=0;g<n.length;g++)n[g].status=2,m=m.concat(Rr(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&p.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();Du(t,Ru(t.transactionQueueTree_,e)),Ou(t,t.transactionQueueTree_),Gt(t.eventQueue_,e,m);for(let g=0;g<p.length;g++)Qs(p[g])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{vt("transaction at "+c.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}Fs(t,e)}},o)}function Fs(t,e){const n=Sx(t,e),r=qa(n),i=Cx(t,n);return z2(t,i,r),r}function z2(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],d=Ct(n,c.path);let m=!1,p;if(U(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)m=!0,p=c.abortReason,i=i.concat(Rr(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=T2)m=!0,p="maxretry",i=i.concat(Rr(t.serverSyncTree_,c.currentWriteId,!0));else{const g=vm(t,c.path,o);c.currentInputSnapshot=g;const k=e[l].update(g.val());if(k!==void 0){Ka("transaction failed: Data returned ",k,c.path);let T=Ue(k);typeof k=="object"&&k!=null&&Sn(k,".priority")||(T=T.updatePriority(g.getPriority()));const O=c.currentWriteId,x=Qa(t),_=um(T,g,x);c.currentOutputSnapshotRaw=T,c.currentOutputSnapshotResolved=_,c.currentWriteId=ju(t),o.splice(o.indexOf(O),1),i=i.concat(im(t.serverSyncTree_,c.path,_,c.currentWriteId,c.applyLocally)),i=i.concat(Rr(t.serverSyncTree_,O,!0))}else m=!0,p="nodata",i=i.concat(Rr(t.serverSyncTree_,c.currentWriteId,!0))}Gt(t.eventQueue_,n,i),i=[],m&&(e[l].status=2,function(g){setTimeout(g,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(p==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(p),!1,null))))}Du(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Qs(r[l]);Ou(t,t.transactionQueueTree_)}function Sx(t,e){let n,r=t.transactionQueueTree_;for(n=Z(e);n!==null&&Bi(r)===void 0;)r=Ru(r,n),e=Ee(e),n=Z(e);return r}function Cx(t,e){const n=[];return Ix(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Ix(t,e,n){const r=Bi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Pu(e,i=>{Ix(t,i,n)})}function Du(t,e){const n=Bi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,fm(e,n.length>0?n:void 0)}Pu(e,r=>{Du(t,r)})}function _m(t,e){const n=qa(Sx(t,e)),r=Ru(t.transactionQueueTree_,e);return y2(r,i=>{Xd(t,i)}),Xd(t,r),px(r,i=>{Xd(t,i)}),n}function Xd(t,e){const n=Bi(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(U(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(U(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Rr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?fm(e,void 0):n.length=s+1,Gt(t.eventQueue_,qa(e),i);for(let o=0;o<r.length;o++)Qs(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function $2(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Sf=function(t,e){const n=H2(t),r=n.namespace;n.domain==="firebase.com"&&Fn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Fn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||JN();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new bE(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ye(n.pathString)}},H2=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",c=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(l=t.substring(0,d-1),t=t.substring(d+2));let m=t.indexOf("/");m===-1&&(m=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(m,p)),m<p&&(i=B2(t.substring(m,p)));const g=$2(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(o=l==="https"||l==="wss",c=parseInt(e.substring(d+1),10)):d=e.length;const k=e.slice(0,d);if(k.toLowerCase()==="localhost")n="localhost";else if(k.split(".").length<=2)n=k;else{const T=e.indexOf(".");r=e.substring(0,T).toLowerCase(),n=e.substring(T+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",W2=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Ov.charAt(n%64),n=Math.floor(n/64);U(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Ov.charAt(e[i]);return U(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Je(this.snapshot.exportVal())}}class kx{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return U(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Bt;return j2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Rn("OnDisconnect.remove",this._path);const e=new Bt;return jv(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Rn("OnDisconnect.set",this._path),Un("OnDisconnect.set",e,this._path,!1);const n=new Bt;return jv(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Rn("OnDisconnect.setWithPriority",this._path),Un("OnDisconnect.setWithPriority",e,this._path,!1),pm("OnDisconnect.setWithPriority",n,!1);const r=new Bt;return O2(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Rn("OnDisconnect.update",this._path),gx("OnDisconnect.update",e,this._path,!1);const n=new Bt;return D2(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ee(this._path)?null:Hp(this._path)}get ref(){return new Cn(this._repo,this._path)}get _queryIdentifier(){const e=_v(this._queryParams),n=Up(e);return n==="{}"?"default":n}get _queryObject(){return _v(this._queryParams)}isEqual(e){if(e=$e(e),!(e instanceof Yt))return!1;const n=this._repo===e._repo,r=Wp(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+DR(this._path)}}function Lu(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function ei(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===On){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Gr)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==ar)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Ce){if(e!=null&&!Na(e)||n!=null&&!Na(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(U(t.getIndex()instanceof qp||t.getIndex()===Kp,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Mu(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Cn extends Yt{constructor(e,n){super(e,n,new Qp,!1)}get parent(){const e=zE(this._path);return e===null?null:new Cn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ni{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ye(e),r=Us(this.ref,e);return new Ni(this._node.getChild(n),r,Ce)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ni(i,Us(this.ref,r),Ce)))}hasChild(e){const n=new ye(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ra(t,e){return t=$e(t),t._checkNotDeleted("ref"),e!==void 0?Us(t._root,e):t._root}function TD(t,e){t=$e(t),t._checkNotDeleted("refFromURL");const n=Sf(e,t._repo.repoInfo_.nodeAdmin);yx("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Fn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ra(t,n.path.toString())}function Us(t,e){return t=$e(t),Z(t._path)===null?S2("child","path",e,!1):mm("child","path",e,!1),new Cn(t._repo,De(t._path,e))}function kD(t){return t=$e(t),new V2(t._repo,t._path)}function ND(t,e){t=$e(t),Rn("push",t._path),Un("push",e,t._path,!0);const n=Ex(t._repo),r=W2(n),i=Us(t,r),s=Us(t,r);let o;return e!=null?o=Em(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function G2(t){return Rn("remove",t._path),Em(t,null)}function Em(t,e){t=$e(t),Rn("set",t._path),Un("set",e,t._path,!1);const n=new Bt;return ym(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function RD(t,e){t=$e(t),Rn("setPriority",t._path),pm("setPriority",e,!1);const n=new Bt;return ym(t._repo,De(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function PD(t,e,n){if(Rn("setWithPriority",t._path),Un("setWithPriority",e,t._path,!1),pm("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Bt;return ym(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function bD(t,e){gx("update",e,t._path,!1);const n=new Bt;return b2(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function q2(t){t=$e(t);const e=new wm(()=>{}),n=new Xa(e);return P2(t._repo,t,n).then(r=>new Ni(r,new Cn(t._repo,t._path),t._queryParams.getIndex()))}class Xa{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Tx("value",this,new Ni(e.snapshotNode,new Cn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kx(this,e,n):null}matches(e){return e instanceof Xa?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Fu{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kx(this,e,n):null}createEvent(e,n){U(e.childName!=null,"Child events should have a childName.");const r=Us(new Cn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Tx(e.type,this,new Ni(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Fu?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Ja(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,d=(m,p)=>{xf(t._repo,t,l),c(m,p)};d.userCallback=n.userCallback,d.context=n.context,n=d}const o=new wm(n,s||void 0),l=e==="value"?new Xa(o):new Fu(e,o);return L2(t._repo,t,l),()=>xf(t._repo,t,l)}function Nx(t,e,n,r){return Ja(t,"value",e,n,r)}function AD(t,e,n,r){return Ja(t,"child_added",e,n,r)}function jD(t,e,n,r){return Ja(t,"child_changed",e,n,r)}function OD(t,e,n,r){return Ja(t,"child_moved",e,n,r)}function DD(t,e,n,r){return Ja(t,"child_removed",e,n,r)}function LD(t,e,n){let r=null;const i=n?new wm(n):null;e==="value"?r=new Xa(i):e&&(r=new Fu(e,i)),xf(t._repo,t,r)}class In{}class Rx extends In{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Un("endAt",this._value,e._path,!0);const n=hf(e._queryParams,this._value,this._key);if(Mu(n),ei(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Yt(e._repo,e._path,n,e._orderByCalled)}}function MD(t,e){return Ya("endAt","key",e,!0),new Rx(t,e)}class K2 extends In{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Un("endBefore",this._value,e._path,!1);const n=aP(e._queryParams,this._value,this._key);if(Mu(n),ei(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Yt(e._repo,e._path,n,e._orderByCalled)}}function FD(t,e){return Ya("endBefore","key",e,!0),new K2(t,e)}class Px extends In{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Un("startAt",this._value,e._path,!0);const n=df(e._queryParams,this._value,this._key);if(Mu(n),ei(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Yt(e._repo,e._path,n,e._orderByCalled)}}function UD(t=null,e){return Ya("startAt","key",e,!0),new Px(t,e)}class Y2 extends In{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Un("startAfter",this._value,e._path,!1);const n=oP(e._queryParams,this._value,this._key);if(Mu(n),ei(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Yt(e._repo,e._path,n,e._orderByCalled)}}function zD(t,e){return Ya("startAfter","key",e,!0),new Y2(t,e)}class Q2 extends In{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Yt(e._repo,e._path,iP(e._queryParams,this._limit),e._orderByCalled)}}function BD(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Q2(t)}class X2 extends In{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Yt(e._repo,e._path,sP(e._queryParams,this._limit),e._orderByCalled)}}function $D(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new X2(t)}class J2 extends In{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Lu(e,"orderByChild");const n=new ye(this._path);if(ee(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new qp(n),i=Su(e._queryParams,r);return ei(i),new Yt(e._repo,e._path,i,!0)}}function HD(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mm("orderByChild","path",t,!1),new J2(t)}class Z2 extends In{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Lu(e,"orderByKey");const n=Su(e._queryParams,On);return ei(n),new Yt(e._repo,e._path,n,!0)}}function WD(){return new Z2}class eb extends In{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Lu(e,"orderByPriority");const n=Su(e._queryParams,Ce);return ei(n),new Yt(e._repo,e._path,n,!0)}}function VD(){return new eb}class tb extends In{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Lu(e,"orderByValue");const n=Su(e._queryParams,Kp);return ei(n),new Yt(e._repo,e._path,n,!0)}}function GD(){return new tb}class nb extends In{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Un("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Rx(this._value,this._key)._apply(new Px(this._value,this._key)._apply(e))}}function qD(t,e){return Ya("equalTo","key",e,!0),new nb(t,e)}function KD(t,...e){let n=$e(t);for(const r of e)n=r._apply(n);return n}YP(Cn);e2(Cn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="FIREBASE_DATABASE_EMULATOR_HOST",Cf={};let bx=!1;function ib(t,e,n,r){t.repoInfo_=new bE(e,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function Ax(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Fn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),it("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Sf(s,i),l=o.repoInfo,c,d;typeof process<"u"&&process.env&&(d=process.env[rb]),d?(c=!0,s=`http://${d}?ns=${l.namespace}`,o=Sf(s,i),l=o.repoInfo):c=!o.repoInfo.secure;const m=i&&c?new Es(Es.OWNER):new cR(t.name,t.options,e);yx("Invalid Firebase Database URL",o),ee(o.path)||Fn("Database URL must point to the root of a Firebase Database (not including a child path).");const p=ob(l,t,m,new lR(t,n));return new lb(p,t)}function sb(t,e){const n=Cf[e];(!n||n[t.key]!==t)&&Fn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),xx(t),delete n[t.key]}function ob(t,e,n,r){let i=Cf[e.name];i||(i={},Cf[e.name]=i);let s=i[t.toURLString()];return s&&Fn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new k2(t,bx,n,r),i[t.toURLString()]=s,s}function ab(t){bx=t}class lb{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(N2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cn(this._repo,pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(sb(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Fn("Cannot call "+e+" on a deleted database.")}}function jx(){Os.IS_TRANSPORT_INITIALIZED&&vt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function YD(){jx(),Nr.forceDisallow()}function QD(){jx(),en.forceDisallow(),Nr.forceAllow()}function cb(t=Fp(),e){const n=wu(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=tE("database");r&&ub(n,...r)}return n}function ub(t,e,n,r={}){t=$e(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Vr(r,s.repoInfo_.emulatorOptions))return;Fn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Fn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Es(Es.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:iE(r.mockUserToken,t.app.options.projectId);o=new Es(l)}ib(s,i,r,o)}function XD(t){t=$e(t),t._checkNotDeleted("goOffline"),xx(t._repo)}function JD(t){t=$e(t),t._checkNotDeleted("goOnline"),M2(t._repo)}function ZD(t,e){_E(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t){mE(Fi),Ii(new Mn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Ax(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),jn(nv,rv,t),jn(nv,rv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={".sv":"timestamp"};function eL(){return hb}function tL(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function nL(t,e,n){var r;if(t=$e(t),Rn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Bt,o=(c,d,m)=>{let p=null;c?s.reject(c):(p=new Ni(m,new Cn(t._repo,t._path),Ce),s.resolve(new fb(d,p)))},l=Nx(t,()=>{});return F2(t._repo,t._path,e,o,l,i),s.promise}sn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};sn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};const rL=function(t){const e=sn.prototype.put;return sn.prototype.put=function(n,r,i,s){s!==void 0&&(s=t()),e.call(this,n,r,i,s)},function(){sn.prototype.put=e}},iL=function(t){ab(t)};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,nodeAdmin:s=!1}){mE(n);const o=new lE("database-standalone"),l=new ef("auth-internal",o);let c;return i&&(c=new ef("app-check-internal",o),c.setComponent(new Mn("app-check-internal",()=>i,"PRIVATE"))),l.setComponent(new Mn("auth-internal",()=>r,"PRIVATE")),Ax(t,l,c,e,s)}db();function xm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ox(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pb=Ox,Dx=new $a("auth","Firebase",Ox());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new _u("@firebase/auth");function mb(t,...e){qc.logLevel<=me.WARN&&qc.warn(`Auth (${Fi}): ${t}`,...e)}function Zl(t,...e){qc.logLevel<=me.ERROR&&qc.error(`Auth (${Fi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw Sm(t,...e)}function Dn(t,...e){return Sm(t,...e)}function Lx(t,e,n){const r=Object.assign(Object.assign({},pb()),{[e]:n});return new $a("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return Lx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Dx.create(t,...e)}function Q(t,e,...n){if(!t)throw Sm(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zl(e),new Error(e)}function lr(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gb(){return Dv()==="http:"||Dv()==="https:"}function Dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gb()||Nk()||"connection"in navigator)?navigator.onLine:!0}function vb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.shortDelay=e,this.longDelay=n,lr(n>e,"Short delay should be less than long delay!"),this.isMobile=Lp()||sE()}get(){return yb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new Za(3e4,6e4);function dr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zn(t,e,n,r,i={}){return Fx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Ys(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},s);return kk()||(d.referrerPolicy="no-referrer"),Mx.fetch()(Ux(t,t.config.apiHost,n,l),d)})}async function Fx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_b),e);try{const i=new xb(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ll(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ll(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ll(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ll(t,"user-disabled",o);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Lx(t,m,d);xn(t,m)}}catch(i){if(i instanceof ur)throw i;xn(t,"network-request-failed",{message:String(i)})}}async function el(t,e,n,r,i={}){const s=await zn(t,e,n,r,i);return"mfaPendingCredential"in s&&xn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Ux(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Cm(t.config,i):`${t.config.apiScheme}://${i}`}function Eb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dn(this.auth,"network-request-failed")),wb.get())})}}function Ll(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dn(t,e,r);return i.customData._tokenResponse=n,i}function Lv(t){return t!==void 0&&t.enterprise!==void 0}class Sb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Eb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Cb(t,e){return zn(t,"GET","/v2/recaptchaConfig",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ib(t,e){return zn(t,"POST","/v1/accounts:delete",e)}async function zx(t,e){return zn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tb(t,e=!1){const n=$e(t),r=await n.getIdToken(e),i=Im(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xo(Jd(i.auth_time)),issuedAtTime:Xo(Jd(i.iat)),expirationTime:Xo(Jd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Jd(t){return Number(t)*1e3}function Im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zl("JWT malformed, contained fewer than 3 sections"),null;try{const i=Pc(n);return i?JSON.parse(i):(Zl("Failed to decode base64 JWT payload"),null)}catch(i){return Zl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Mv(t){const e=Im(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ur&&kb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function kb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await zs(t,zx(n,{idToken:r}));Q(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Bx(s.providerUserInfo):[],l=Pb(t.providerData,o),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),m=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Tf(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function Rb(t){const e=$e(t);await Kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Pb(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Bx(t){return t.map(e=>{var{providerId:n}=e,r=xm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(t,e){const n=await Fx(t,{},async()=>{const r=Ys({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Ux(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Mx.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ab(t,e){return zn(t,"POST","/v2/accounts:revokeToken",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=Mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await bb(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xs;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xs,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=xm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zs(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Tb(this,e)}reload(){return Rb(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(tr(this.auth));const e=await this.getIdToken();return await zs(this,Ib(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,c,d,m;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,k=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,O=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:I,emailVerified:j,isAnonymous:L,providerData:z,stsTokenManager:E}=n;Q(I&&E,e,"internal-error");const v=xs.fromJSON(this.name,E);Q(typeof I=="string",e,"internal-error"),gr(p,e.name),gr(g,e.name),Q(typeof j=="boolean",e,"internal-error"),Q(typeof L=="boolean",e,"internal-error"),gr(k,e.name),gr(T,e.name),gr(R,e.name),gr(O,e.name),gr(x,e.name),gr(_,e.name);const w=new Xn({uid:I,auth:e,email:g,emailVerified:j,displayName:p,isAnonymous:L,photoURL:T,phoneNumber:k,tenantId:R,stsTokenManager:v,createdAt:x,lastLoginAt:_});return z&&Array.isArray(z)&&(w.providerData=z.map(C=>Object.assign({},C))),O&&(w._redirectEventId=O),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new xs;i.updateFromServerResponse(n);const s=new Xn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Kc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Q(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Bx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new xs;l.updateFromIdToken(r);const c=new Xn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Tf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;function Jn(t){lr(t instanceof Function,"Expected a class definition");let e=Fv.get(t);return e?(lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$x.type="NONE";const Uv=$x;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e,n){return`firebase:${t}:${e}:${n}`}class Ss{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ec(this.userKey,i.apiKey,s),this.fullPersistenceKey=ec("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ss(Jn(Uv),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Jn(Uv);const o=ec(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const m=await d._get(o);if(m){const p=Xn._fromJSON(e,m);d!==s&&(l=p),s=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ss(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Ss(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kx(e))return"Blackberry";if(Yx(e))return"Webos";if(Wx(e))return"Safari";if((e.includes("chrome/")||Vx(e))&&!e.includes("edge/"))return"Chrome";if(qx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Hx(t=Tt()){return/firefox\//i.test(t)}function Wx(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vx(t=Tt()){return/crios\//i.test(t)}function Gx(t=Tt()){return/iemobile/i.test(t)}function qx(t=Tt()){return/android/i.test(t)}function Kx(t=Tt()){return/blackberry/i.test(t)}function Yx(t=Tt()){return/webos/i.test(t)}function Tm(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jb(t=Tt()){var e;return Tm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ob(){return Rk()&&document.documentMode===10}function Qx(t=Tt()){return Tm(t)||qx(t)||Yx(t)||Kx(t)||/windows phone/i.test(t)||Gx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t,e=[]){let n;switch(t){case"Browser":n=zv(Tt());break;case"Worker":n=`${zv(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(t,e={}){return zn(t,"GET","/v2/passwordPolicy",dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=6;class Fb{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Mb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bv(this),this.idTokenSubscription=new Bv(this),this.beforeStateQueue=new Db(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ss.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zx(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if($t(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(tr(this));const n=e?$e(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lb(this),n=new Fb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $a("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ab(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Ss.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ti(t){return $e(t)}class Bv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fk(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zb(t){Uu=t}function Jx(t){return Uu.loadJS(t)}function Bb(){return Uu.recaptchaEnterpriseScript}function $b(){return Uu.gapiScript}function Hb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Wb{constructor(){this.enterprise=new Vb}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Vb{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Gb="recaptcha-enterprise",Zx="NO_RECAPTCHA";class qb{constructor(e){this.type=Gb,this.auth=ti(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Cb(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new Sb(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function i(s,o,l){const c=window.grecaptcha;Lv(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(Zx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Wb().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&Lv(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Bb();c.length!==0&&(c+=l),Jx(c).then(()=>{i(l,s,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function No(t,e,n,r=!1,i=!1){const s=new qb(t);let o;if(i)o=Zx;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Yc(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await No(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await No(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await No(t,e,n);return r(t,l).catch(async c=>{var d;if(((d=t._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const m=await No(t,e,n,!1,!0);return r(t,m)}return Promise.reject(c)})}else{const l=await No(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e){const n=wu(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Vr(s,e??{}))return i;xn(i,"already-initialized")}return n.initialize({options:e})}function Yb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Qb(t,e,n){const r=ti(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=e1(e),{host:o,port:l}=Xb(e),c=l===null?"":`:${l}`,d={url:`${s}//${o}${c}/`},m=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Vr(d,r.config.emulator)&&Vr(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,i||Jb()}function e1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Xb(t){const e=e1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:$v(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:$v(o)}}}function $v(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Jb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}async function Zb(t,e){return zn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(t,e){return el(t,"POST","/v1/accounts:signInWithPassword",dr(t,e))}async function tA(t,e){return zn(t,"POST","/v1/accounts:sendOobCode",dr(t,e))}async function nA(t,e){return tA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(t,e){return el(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,e))}async function iA(t,e){return el(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends km{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Pa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yc(e,n,"signInWithPassword",eA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rA(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yc(e,r,"signUpPassword",Zb,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return iA(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cs(t,e){return el(t,"POST","/v1/accounts:signInWithIdp",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="http://localhost";class Ri extends km{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ri(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=xm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ri(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Cs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Cs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cs(e,n)}buildRequest(){const e={requestUri:sA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ys(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aA(t){const e=Do(Lo(t)).link,n=e?Do(Lo(e)).deep_link_id:null,r=Do(Lo(t)).deep_link_id;return(r?Do(Lo(r)).link:null)||r||n||e||t}class Nm{constructor(e){var n,r,i,s,o,l;const c=Do(Lo(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,m=(r=c.oobCode)!==null&&r!==void 0?r:null,p=oA((i=c.mode)!==null&&i!==void 0?i:null);Q(d&&m&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=m,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=aA(e);try{return new Nm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.providerId=eo.PROVIDER_ID}static credential(e,n){return Pa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Nm.parseLink(n);return Q(r,"argument-error"),Pa._fromEmailAndCode(e,r.code,r.tenantId)}}eo.PROVIDER_ID="password";eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends t1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends tl{constructor(){super("facebook.com")}static credential(e){return Ri._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ri._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends tl{constructor(){super("github.com")}static credential(e){return Ri._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends tl{constructor(){super("twitter.com")}static credential(e,n){return Ri._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(t,e){return el(t,"POST","/v1/accounts:signUp",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Xn._fromIdTokenResponse(e,r,i),o=Hv(r);return new Pi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Hv(r);return new Pi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Hv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends ur{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Qc(e,n,r,i)}}function n1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(t,s,e,r):s})}async function cA(t,e,n=!1){const r=await zs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(t,e,n=!1){const{auth:r}=t;if($t(r.app))return Promise.reject(tr(r));const i="reauthenticate";try{const s=await zs(t,n1(r,i,e,t),n);Q(s.idToken,r,"internal-error");const o=Im(s.idToken);Q(o,r,"internal-error");const{sub:l}=o;return Q(t.uid===l,r,"user-mismatch"),Pi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t,e,n=!1){if($t(t.app))return Promise.reject(tr(t));const r="signIn",i=await n1(t,r,e),s=await Pi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function dA(t,e){return r1(ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e,n){var r;Q(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Q(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(t){const e=ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fA(t,e,n){const r=ti(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&hA(r,i,n),await Yc(r,i,"getOobCode",nA,"EMAIL_PASSWORD_PROVIDER")}async function pA(t,e,n){if($t(t.app))return Promise.reject(tr(t));const r=ti(t),o=await Yc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lA,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&i1(t),c}),l=await Pi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function mA(t,e,n){return $t(t.app)?Promise.reject(tr(t)):dA($e(t),eo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&i1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e){return zn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$e(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await zs(r,gA(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function vA(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function _A(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function s1(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}const Xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xc,"1"),this.storage.removeItem(Xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=1e3,EA=10;class a1 extends o1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Ob()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,EA):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}a1.type="LOCAL";const xA=a1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1 extends o1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}l1.type="SESSION";const c1=l1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,s)),c=await SA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const d=Rm("",20);i.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(m),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function IA(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function TA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NA(){return u1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="firebaseLocalStorageDb",RA=1,Jc="firebaseLocalStorage",h1="fbase_key";class nl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bu(t,e){return t.transaction([Jc],e?"readwrite":"readonly").objectStore(Jc)}function PA(){const t=indexedDB.deleteDatabase(d1);return new nl(t).toPromise()}function kf(){const t=indexedDB.open(d1,RA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jc,{keyPath:h1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jc)?e(r):(r.close(),await PA(),e(await kf()))})})}async function Wv(t,e,n){const r=Bu(t,!0).put({[h1]:e,value:n});return new nl(r).toPromise()}async function bA(t,e){const n=Bu(t,!1).get(e),r=await new nl(n).toPromise();return r===void 0?null:r.value}function Vv(t,e){const n=Bu(t,!0).delete(e);return new nl(n).toPromise()}const AA=800,jA=3;class f1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return u1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zu._getInstance(NA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TA(),!this.activeServiceWorker)return;this.sender=new CA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kf();return await Wv(e,Xc,"1"),await Vv(e,Xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Bu(i,!1).getAll();return new nl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}f1.type="LOCAL";const OA=f1;new Za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t,e){return e?Jn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends km{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LA(t){return r1(t.auth,new Pm(t),t.bypassAuthState)}function MA(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),uA(n,new Pm(t),t.bypassAuthState)}async function FA(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),cA(n,new Pm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LA;case"linkViaPopup":case"linkViaRedirect":return FA;case"reauthViaPopup":case"reauthViaRedirect":return MA;default:xn(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new Za(2e3,1e4);class hs extends p1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=Rm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UA.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="pendingRedirect",tc=new Map;class BA extends p1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tc.get(this.auth._key());if(!e){try{const r=await $A(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tc.set(this.auth._key(),e)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $A(t,e){const n=VA(e),r=WA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HA(t,e){tc.set(t._key(),e)}function WA(t){return Jn(t._redirectPersistence)}function VA(t){return ec(zA,t.config.apiKey,t.name)}async function GA(t,e,n=!1){if($t(t.app))return Promise.reject(tr(t));const r=ti(t),i=DA(r,e),o=await new BA(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=10*60*1e3;class KA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!m1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gv(e))}saveEventToCache(e){this.cachedEventUids.add(Gv(e)),this.lastProcessedEventTime=Date.now()}}function Gv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function m1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(t,e={}){return zn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JA=/^https?/;async function ZA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QA(t);for(const n of e)try{if(ej(n))return}catch{}xn(t,"unauthorized-domain")}function ej(t){const e=If(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!JA.test(n))return!1;if(XA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new Za(3e4,6e4);function qv(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nj(t){return new Promise((e,n)=>{var r,i,s;function o(){qv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qv(),n(Dn(t,"network-request-failed"))},timeout:tj.get()})}if(!((i=(r=Ln().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ln().gapi)===null||s===void 0)&&s.load)o();else{const l=Hb("iframefcb");return Ln()[l]=()=>{gapi.load?o():n(Dn(t,"network-request-failed"))},Jx(`${$b()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw nc=null,e})}let nc=null;function rj(t){return nc=nc||nj(t),nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new Za(5e3,15e3),sj="__/auth/iframe",oj="emulator/auth/iframe",aj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cj(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cm(e,oj):`https://${t.config.authDomain}/${sj}`,r={apiKey:e.apiKey,appName:t.name,v:Fi},i=lj.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ys(r).slice(1)}`}async function uj(t){const e=await rj(t),n=Ln().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:cj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Dn(t,"network-request-failed"),l=Ln().setTimeout(()=>{s(o)},ij.get());function c(){Ln().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hj=500,fj=600,pj="_blank",mj="http://localhost";class Kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gj(t,e,n,r=hj,i=fj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},dj),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Tt().toLowerCase();n&&(l=Vx(d)?pj:n),Hx(d)&&(e=e||mj,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[k,T])=>`${g}${k}=${T},`,"");if(jb(d)&&l!=="_self")return yj(e||"",l),new Kv(null);const p=window.open(e||"",l,m);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new Kv(p)}function yj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj="__/auth/handler",_j="emulator/auth/handler",wj=encodeURIComponent("fac");async function Yv(t,e,n,r,i,s){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fi,eventId:i};if(e instanceof t1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries(s||{}))o[m]=p}if(e instanceof tl){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await t._getAppCheckToken(),d=c?`#${wj}=${encodeURIComponent(c)}`:"";return`${Ej(t)}?${Ys(l).slice(1)}${d}`}function Ej({config:t}){return t.emulator?Cm(t,_j):`https://${t.authDomain}/${vj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="webStorageSupport";class xj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c1,this._completeRedirectFn=GA,this._overrideRedirectResult=HA}async _openPopup(e,n,r,i){var s;lr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Yv(e,n,r,If(),i);return gj(e,o,Rm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Yv(e,n,r,If(),i);return IA(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(lr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uj(e),r=new KA(e);return n.register("authEvent",i=>(Q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zd,{type:Zd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Zd];o!==void 0&&n(!!o),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qx()||Wx()||Tm()}}const Sj=xj;var Qv="@firebase/auth",Xv="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Tj(t){Ii(new Mn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xx(t)},d=new Ub(r,i,s,c);return Yb(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ii(new Mn("auth-internal",e=>{const n=ti(e.getProvider("auth").getImmediate());return(r=>new Cj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jn(Qv,Xv,Ij(t)),jn(Qv,Xv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=5*60,Nj=rE("authIdTokenMaxAge")||kj;let Jv=null;const Rj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Nj)return;const i=n==null?void 0:n.token;Jv!==i&&(Jv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Pj(t=Fp()){const e=wu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Kb(t,{popupRedirectResolver:Sj,persistence:[OA,xA,c1]}),r=rE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Rj(s.toString());_A(n,o,()=>o(n.currentUser)),vA(n,l=>o(l))}}const i=eE("auth");return i&&Qb(n,`http://${i}`),n}function bj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Dn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",bj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Tj("Browser");var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(C,N,P){for(var S=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)S[Le-2]=arguments[Le];return v.prototype[N].apply(C,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var C=Array(16);if(typeof v=="string")for(var N=0;16>N;++N)C[N]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(N=0;16>N;++N)C[N]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],N=E.g[2];var P=E.g[3],S=v+(P^w&(N^P))+C[0]+3614090360&4294967295;v=w+(S<<7&4294967295|S>>>25),S=P+(N^v&(w^N))+C[1]+3905402710&4294967295,P=v+(S<<12&4294967295|S>>>20),S=N+(w^P&(v^w))+C[2]+606105819&4294967295,N=P+(S<<17&4294967295|S>>>15),S=w+(v^N&(P^v))+C[3]+3250441966&4294967295,w=N+(S<<22&4294967295|S>>>10),S=v+(P^w&(N^P))+C[4]+4118548399&4294967295,v=w+(S<<7&4294967295|S>>>25),S=P+(N^v&(w^N))+C[5]+1200080426&4294967295,P=v+(S<<12&4294967295|S>>>20),S=N+(w^P&(v^w))+C[6]+2821735955&4294967295,N=P+(S<<17&4294967295|S>>>15),S=w+(v^N&(P^v))+C[7]+4249261313&4294967295,w=N+(S<<22&4294967295|S>>>10),S=v+(P^w&(N^P))+C[8]+1770035416&4294967295,v=w+(S<<7&4294967295|S>>>25),S=P+(N^v&(w^N))+C[9]+2336552879&4294967295,P=v+(S<<12&4294967295|S>>>20),S=N+(w^P&(v^w))+C[10]+4294925233&4294967295,N=P+(S<<17&4294967295|S>>>15),S=w+(v^N&(P^v))+C[11]+2304563134&4294967295,w=N+(S<<22&4294967295|S>>>10),S=v+(P^w&(N^P))+C[12]+1804603682&4294967295,v=w+(S<<7&4294967295|S>>>25),S=P+(N^v&(w^N))+C[13]+4254626195&4294967295,P=v+(S<<12&4294967295|S>>>20),S=N+(w^P&(v^w))+C[14]+2792965006&4294967295,N=P+(S<<17&4294967295|S>>>15),S=w+(v^N&(P^v))+C[15]+1236535329&4294967295,w=N+(S<<22&4294967295|S>>>10),S=v+(N^P&(w^N))+C[1]+4129170786&4294967295,v=w+(S<<5&4294967295|S>>>27),S=P+(w^N&(v^w))+C[6]+3225465664&4294967295,P=v+(S<<9&4294967295|S>>>23),S=N+(v^w&(P^v))+C[11]+643717713&4294967295,N=P+(S<<14&4294967295|S>>>18),S=w+(P^v&(N^P))+C[0]+3921069994&4294967295,w=N+(S<<20&4294967295|S>>>12),S=v+(N^P&(w^N))+C[5]+3593408605&4294967295,v=w+(S<<5&4294967295|S>>>27),S=P+(w^N&(v^w))+C[10]+38016083&4294967295,P=v+(S<<9&4294967295|S>>>23),S=N+(v^w&(P^v))+C[15]+3634488961&4294967295,N=P+(S<<14&4294967295|S>>>18),S=w+(P^v&(N^P))+C[4]+3889429448&4294967295,w=N+(S<<20&4294967295|S>>>12),S=v+(N^P&(w^N))+C[9]+568446438&4294967295,v=w+(S<<5&4294967295|S>>>27),S=P+(w^N&(v^w))+C[14]+3275163606&4294967295,P=v+(S<<9&4294967295|S>>>23),S=N+(v^w&(P^v))+C[3]+4107603335&4294967295,N=P+(S<<14&4294967295|S>>>18),S=w+(P^v&(N^P))+C[8]+1163531501&4294967295,w=N+(S<<20&4294967295|S>>>12),S=v+(N^P&(w^N))+C[13]+2850285829&4294967295,v=w+(S<<5&4294967295|S>>>27),S=P+(w^N&(v^w))+C[2]+4243563512&4294967295,P=v+(S<<9&4294967295|S>>>23),S=N+(v^w&(P^v))+C[7]+1735328473&4294967295,N=P+(S<<14&4294967295|S>>>18),S=w+(P^v&(N^P))+C[12]+2368359562&4294967295,w=N+(S<<20&4294967295|S>>>12),S=v+(w^N^P)+C[5]+4294588738&4294967295,v=w+(S<<4&4294967295|S>>>28),S=P+(v^w^N)+C[8]+2272392833&4294967295,P=v+(S<<11&4294967295|S>>>21),S=N+(P^v^w)+C[11]+1839030562&4294967295,N=P+(S<<16&4294967295|S>>>16),S=w+(N^P^v)+C[14]+4259657740&4294967295,w=N+(S<<23&4294967295|S>>>9),S=v+(w^N^P)+C[1]+2763975236&4294967295,v=w+(S<<4&4294967295|S>>>28),S=P+(v^w^N)+C[4]+1272893353&4294967295,P=v+(S<<11&4294967295|S>>>21),S=N+(P^v^w)+C[7]+4139469664&4294967295,N=P+(S<<16&4294967295|S>>>16),S=w+(N^P^v)+C[10]+3200236656&4294967295,w=N+(S<<23&4294967295|S>>>9),S=v+(w^N^P)+C[13]+681279174&4294967295,v=w+(S<<4&4294967295|S>>>28),S=P+(v^w^N)+C[0]+3936430074&4294967295,P=v+(S<<11&4294967295|S>>>21),S=N+(P^v^w)+C[3]+3572445317&4294967295,N=P+(S<<16&4294967295|S>>>16),S=w+(N^P^v)+C[6]+76029189&4294967295,w=N+(S<<23&4294967295|S>>>9),S=v+(w^N^P)+C[9]+3654602809&4294967295,v=w+(S<<4&4294967295|S>>>28),S=P+(v^w^N)+C[12]+3873151461&4294967295,P=v+(S<<11&4294967295|S>>>21),S=N+(P^v^w)+C[15]+530742520&4294967295,N=P+(S<<16&4294967295|S>>>16),S=w+(N^P^v)+C[2]+3299628645&4294967295,w=N+(S<<23&4294967295|S>>>9),S=v+(N^(w|~P))+C[0]+4096336452&4294967295,v=w+(S<<6&4294967295|S>>>26),S=P+(w^(v|~N))+C[7]+1126891415&4294967295,P=v+(S<<10&4294967295|S>>>22),S=N+(v^(P|~w))+C[14]+2878612391&4294967295,N=P+(S<<15&4294967295|S>>>17),S=w+(P^(N|~v))+C[5]+4237533241&4294967295,w=N+(S<<21&4294967295|S>>>11),S=v+(N^(w|~P))+C[12]+1700485571&4294967295,v=w+(S<<6&4294967295|S>>>26),S=P+(w^(v|~N))+C[3]+2399980690&4294967295,P=v+(S<<10&4294967295|S>>>22),S=N+(v^(P|~w))+C[10]+4293915773&4294967295,N=P+(S<<15&4294967295|S>>>17),S=w+(P^(N|~v))+C[1]+2240044497&4294967295,w=N+(S<<21&4294967295|S>>>11),S=v+(N^(w|~P))+C[8]+1873313359&4294967295,v=w+(S<<6&4294967295|S>>>26),S=P+(w^(v|~N))+C[15]+4264355552&4294967295,P=v+(S<<10&4294967295|S>>>22),S=N+(v^(P|~w))+C[6]+2734768916&4294967295,N=P+(S<<15&4294967295|S>>>17),S=w+(P^(N|~v))+C[13]+1309151649&4294967295,w=N+(S<<21&4294967295|S>>>11),S=v+(N^(w|~P))+C[4]+4149444226&4294967295,v=w+(S<<6&4294967295|S>>>26),S=P+(w^(v|~N))+C[11]+3174756917&4294967295,P=v+(S<<10&4294967295|S>>>22),S=N+(v^(P|~w))+C[2]+718787259&4294967295,N=P+(S<<15&4294967295|S>>>17),S=w+(P^(N|~v))+C[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,C=this.B,N=this.h,P=0;P<v;){if(N==0)for(;P<=w;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<v;)if(C[N++]=E.charCodeAt(P++),N==this.blockSize){i(this,C),N=0;break}}else for(;P<v;)if(C[N++]=E[P++],N==this.blockSize){i(this,C),N=0;break}}this.h=N,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var C=0;32>C;C+=8)E[w++]=this.g[v]>>>C&255;return E};function s(E,v){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function o(E,v){this.h=v;for(var w=[],C=!0,N=E.length-1;0<=N;N--){var P=E[N]|0;C&&P==v||(w[N]=P,C=!1)}this.g=w}var l={};function c(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return O(d(-E));for(var v=[],w=1,C=0;E>=w;C++)v[C]=E/w|0,w*=4294967296;return new o(v,0)}function m(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return O(m(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(v,8)),C=p,N=0;N<E.length;N+=8){var P=Math.min(8,E.length-N),S=parseInt(E.substring(N,N+P),v);8>P?(P=d(Math.pow(v,P)),C=C.j(P).add(d(S))):(C=C.j(w),C=C.add(d(S)))}return C}var p=c(0),g=c(1),k=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-O(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var C=this.i(w);E+=(0<=C?C:4294967296+C)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(R(this))return"-"+O(this).toString(E);for(var v=d(Math.pow(E,6)),w=this,C="";;){var N=j(w,v).g;w=x(w,N.j(v));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=N,T(w))return P+C;for(;6>P.length;)P="0"+P;C=P+C}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=x(this,E),R(E)?-1:T(E)?0:1};function O(E){for(var v=E.g.length,w=[],C=0;C<v;C++)w[C]=~E.g[C];return new o(w,~E.h).add(g)}t.abs=function(){return R(this)?O(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],C=0,N=0;N<=v;N++){var P=C+(this.i(N)&65535)+(E.i(N)&65535),S=(P>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);C=S>>>16,P&=65535,S&=65535,w[N]=S<<16|P}return new o(w,w[w.length-1]&-2147483648?-1:0)};function x(E,v){return E.add(O(v))}t.j=function(E){if(T(this)||T(E))return p;if(R(this))return R(E)?O(this).j(O(E)):O(O(this).j(E));if(R(E))return O(this.j(O(E)));if(0>this.l(k)&&0>E.l(k))return d(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],C=0;C<2*v;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var N=0;N<E.g.length;N++){var P=this.i(C)>>>16,S=this.i(C)&65535,Le=E.i(N)>>>16,Me=E.i(N)&65535;w[2*C+2*N]+=S*Me,_(w,2*C+2*N),w[2*C+2*N+1]+=P*Me,_(w,2*C+2*N+1),w[2*C+2*N+1]+=S*Le,_(w,2*C+2*N+1),w[2*C+2*N+2]+=P*Le,_(w,2*C+2*N+2)}for(C=0;C<v;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=v;C<2*v;C++)w[C]=0;return new o(w,0)};function _(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function I(E,v){this.g=E,this.h=v}function j(E,v){if(T(v))throw Error("division by zero");if(T(E))return new I(p,p);if(R(E))return v=j(O(E),v),new I(O(v.g),O(v.h));if(R(v))return v=j(E,O(v)),new I(O(v.g),v.h);if(30<E.g.length){if(R(E)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,C=v;0>=C.l(E);)w=L(w),C=L(C);var N=z(w,1),P=z(C,1);for(C=z(C,2),w=z(w,2);!T(C);){var S=P.add(C);0>=S.l(E)&&(N=N.add(w),P=S),C=z(C,1),w=z(w,1)}return v=x(E,N.j(v)),new I(N,v)}for(N=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),P=d(w),S=P.j(v);R(S)||0<S.l(E);)w-=C,P=d(w),S=P.j(v);T(P)&&(P=g),N=N.add(P),E=x(E,S)}return new I(N,E)}t.A=function(E){return j(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)&E.i(C);return new o(w,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)|E.i(C);return new o(w,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)^E.i(C);return new o(w,this.h^E.h)};function L(E){for(var v=E.g.length+1,w=[],C=0;C<v;C++)w[C]=E.i(C)<<1|E.i(C-1)>>>31;return new o(w,E.h)}function z(E,v){var w=v>>5;v%=32;for(var C=E.g.length-w,N=[],P=0;P<C;P++)N[P]=0<v?E.i(P+w)>>>v|E.i(P+w+1)<<32-v:E.i(P+w);return new o(N,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,g1=o}).apply(typeof Zv<"u"?Zv:typeof self<"u"?self:typeof window<"u"?window:{});var Ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ml=="object"&&Ml];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var b=a[y];if(!(b in f))break e;f=f[b]}a=a[a.length-1],y=f[a],h=h(y),h!=y&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var f=0,y=!1,b={next:function(){if(!y&&f<a.length){var A=f++;return{value:h(A,a[A]),done:!1}}return y=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function m(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,y),a.apply(h,b)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,g.apply(null,arguments)}function k(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function T(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,b,A){for(var W=Array(arguments.length-2),we=2;we<arguments.length;we++)W[we-2]=arguments[we];return h.prototype[b].apply(y,W)}}function R(a){const h=a.length;if(0<h){const f=Array(h);for(let y=0;y<h;y++)f[y]=a[y];return f}return[]}function O(a,h){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(c(y)){const b=a.length||0,A=y.length||0;a.length=b+A;for(let W=0;W<A;W++)a[b+W]=y[W]}else a.push(y)}}class x{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function z(a,h,f){for(const y in a)h.call(f,a[y],y,a)}function E(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function v(a){const h={};for(const f in a)h[f]=a[f];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(a,h){let f,y;for(let b=1;b<arguments.length;b++){y=arguments[b];for(f in y)a[f]=y[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function N(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function P(a){l.setTimeout(()=>{throw a},0)}function S(){var a=V;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Le{constructor(){this.h=this.g=null}add(h,f){const y=Me.get();y.set(h,f),this.h?this.h.next=y:this.g=y,this.h=y}}var Me=new x(()=>new Rt,a=>a.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let We,B=!1,V=new Le,q=()=>{const a=l.Promise.resolve(void 0);We=()=>{a.then(ie)}};var ie=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(f){P(f)}var h=Me;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ht=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return a}();function et(a,h){if(le.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{j(h.nodeName);var b=!0;break e}catch{}b=!1}b||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:at[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&et.aa.h.call(this)}}T(et,le);var at={2:"touch",3:"pen",4:"mouse"};et.prototype.h=function(){et.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),$=0;function se(a,h,f,y,b){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!y,this.ha=b,this.key=++$,this.da=this.fa=!1}function ce(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _e(a){this.src=a,this.g={},this.h=0}_e.prototype.add=function(a,h,f,y,b){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var W=Pe(a,h,y,b);return-1<W?(h=a[W],f||(h.fa=!1)):(h=new se(h,this.src,A,!!y,b),h.fa=f,a.push(h)),h};function Te(a,h){var f=h.type;if(f in a.g){var y=a.g[f],b=Array.prototype.indexOf.call(y,h,void 0),A;(A=0<=b)&&Array.prototype.splice.call(y,b,1),A&&(ce(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Pe(a,h,f,y){for(var b=0;b<a.length;++b){var A=a[b];if(!A.da&&A.listener==h&&A.capture==!!f&&A.ha==y)return b}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),$i={};function H(a,h,f,y,b){if(y&&y.once)return oe(a,h,f,y,b);if(Array.isArray(h)){for(var A=0;A<h.length;A++)H(a,h[A],f,y,b);return null}return f=de(f),a&&a[F]?a.K(h,f,d(y)?!!y.capture:!!y,b):K(a,h,f,!1,y,b)}function K(a,h,f,y,b,A){if(!h)throw Error("Invalid event type");var W=d(b)?!!b.capture:!!b,we=be(a);if(we||(a[ni]=we=new _e(a)),f=we.add(h,f,y,W,A),f.proxy)return f;if(y=Y(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)ht||(b=W),b===void 0&&(b=!1),a.addEventListener(h.toString(),y,b);else if(a.attachEvent)a.attachEvent(Pt(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Y(){function a(f){return h.call(a.src,a.listener,f)}const h=Qt;return a}function oe(a,h,f,y,b){if(Array.isArray(h)){for(var A=0;A<h.length;A++)oe(a,h[A],f,y,b);return null}return f=de(f),a&&a[F]?a.L(h,f,d(y)?!!y.capture:!!y,b):K(a,h,f,!0,y,b)}function J(a,h,f,y,b){if(Array.isArray(h))for(var A=0;A<h.length;A++)J(a,h[A],f,y,b);else y=d(y)?!!y.capture:!!y,f=de(f),a&&a[F]?(a=a.i,h=String(h).toString(),h in a.g&&(A=a.g[h],f=Pe(A,f,y,b),-1<f&&(ce(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[h],a.h--)))):a&&(a=be(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Pe(h,f,y,b)),(f=-1<a?h[a]:null)&&ge(f))}function ge(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[F])Te(h.i,a);else{var f=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(f,y,a.capture):h.detachEvent?h.detachEvent(Pt(f),y):h.addListener&&h.removeListener&&h.removeListener(y),(f=be(h))?(Te(f,a),f.h==0&&(f.src=null,h[ni]=null)):ce(a)}}}function Pt(a){return a in $i?$i[a]:$i[a]="on"+a}function Qt(a,h){if(a.da)a=!0;else{h=new et(h,this);var f=a.listener,y=a.ha||a.src;a.fa&&ge(a),a=f.call(y,h)}return a}function be(a){return a=a[ni],a instanceof _e?a:null}var Ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(a){return typeof a=="function"?a:(a[Ve]||(a[Ve]=function(h){return a.handleEvent(h)}),a[Ve])}function ne(){ae.call(this),this.i=new _e(this),this.M=this,this.F=null}T(ne,ae),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(a,h,f,y){J(this,a,h,f,y)};function Ae(a,h){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new le(h,a);else if(h instanceof le)h.target=h.target||a;else{var b=h;h=new le(y,a),C(h,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var W=h.g=f[A];b=Ut(W,y,!0,h)&&b}if(W=h.g=a,b=Ut(W,y,!0,h)&&b,b=Ut(W,y,!1,h)&&b,f)for(A=0;A<f.length;A++)W=h.g=f[A],b=Ut(W,y,!1,h)&&b}ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],y=0;y<f.length;y++)ce(f[y]);delete a.g[h],a.h--}}this.F=null},ne.prototype.K=function(a,h,f,y){return this.i.add(String(a),h,!1,f,y)},ne.prototype.L=function(a,h,f,y){return this.i.add(String(a),h,!0,f,y)};function Ut(a,h,f,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var b=!0,A=0;A<h.length;++A){var W=h[A];if(W&&!W.da&&W.capture==f){var we=W.listener,lt=W.ha||W.src;W.fa&&Te(a.i,W),b=we.call(lt,y)!==!1&&b}}return b&&!y.defaultPrevented}function Hi(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function to(a){a.g=Hi(()=>{a.g=null,a.i&&(a.i=!1,to(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ri extends ae{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:to(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(a){ae.call(this),this.h=a,this.g={}}T(ln,ae);var Wi=[];function Vi(a){z(a.g,function(h,f){this.g.hasOwnProperty(f)&&ge(h)},a),a.g={}}ln.prototype.N=function(){ln.aa.N.call(this),Vi(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yu=l.JSON.stringify,pS=l.JSON.parse,mS=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Qu(){}Qu.prototype.h=null;function Um(a){return a.h||(a.h=a.i())}function gS(){}var no={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xu(){le.call(this,"d")}T(Xu,le);function Ju(){le.call(this,"c")}T(Ju,le);var Gi={},zm=null;function Zu(){return zm=zm||new ne}Gi.La="serverreachability";function Bm(a){le.call(this,Gi.La,a)}T(Bm,le);function ro(a){const h=Zu();Ae(h,new Bm(h))}Gi.STAT_EVENT="statevent";function $m(a,h){le.call(this,Gi.STAT_EVENT,a),this.stat=h}T($m,le);function Et(a){const h=Zu();Ae(h,new $m(h,a))}Gi.Ma="timingevent";function Hm(a,h){le.call(this,Gi.Ma,a),this.size=h}T(Hm,le);function io(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function so(){this.g=!0}so.prototype.xa=function(){this.g=!1};function yS(a,h,f,y,b,A){a.info(function(){if(a.g)if(A)for(var W="",we=A.split("&"),lt=0;lt<we.length;lt++){var fe=we[lt].split("=");if(1<fe.length){var ft=fe[0];fe=fe[1];var pt=ft.split("_");W=2<=pt.length&&pt[1]=="type"?W+(ft+"="+fe+"&"):W+(ft+"=redacted&")}}else W=null;else W=A;return"XMLHTTP REQ ("+y+") [attempt "+b+"]: "+h+`
`+f+`
`+W})}function vS(a,h,f,y,b,A,W){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+b+"]: "+h+`
`+f+`
`+A+" "+W})}function qi(a,h,f,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+wS(a,f)+(y?" "+y:"")})}function _S(a,h){a.info(function(){return"TIMEOUT: "+h})}so.prototype.info=function(){};function wS(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var b=y[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var W=1;W<b.length;W++)b[W]=""}}}}return Yu(f)}catch{return h}}var ed={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ES={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},td;function sl(){}T(sl,Qu),sl.prototype.g=function(){return new XMLHttpRequest},sl.prototype.i=function(){return{}},td=new sl;function hr(a,h,f,y){this.j=a,this.i=h,this.l=f,this.R=y||1,this.U=new ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wm}function Wm(){this.i=null,this.g="",this.h=!1}var Vm={},nd={};function rd(a,h,f){a.L=1,a.v=cl($n(h)),a.m=f,a.P=!0,Gm(a,null)}function Gm(a,h){a.F=Date.now(),ol(a),a.A=$n(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),og(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Wm,a.g=Cg(a.j,f?h:null,!a.m),0<a.O&&(a.M=new ri(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,y=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(Wi[0]=b.toString()),b=Wi);for(var A=0;A<b.length;A++){var W=H(f,b[A],y||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ro(),yS(a.i,a.u,a.A,a.l,a.R,a.m)}hr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Hn(a)==3?h.j():this.Y(a)},hr.prototype.Y=function(a){try{if(a==this.g)e:{const pt=Hn(this.g);var h=this.g.Ba();const Qi=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||fg(this.g)))){this.J||pt!=4||h==7||(h==8||0>=Qi?ro(3):ro(2)),id(this);var f=this.g.Z();this.X=f;t:if(qm(this)){var y=fg(this.g);a="";var b=y.length,A=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),oo(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<b;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(A&&h==b-1)});y.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,vS(this.i,this.u,this.A,this.l,this.R,pt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,lt=this.g;if((we=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(we)){var fe=we;break t}}fe=null}if(f=fe)qi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sd(this,f);else{this.o=!1,this.s=3,Et(12),ii(this),oo(this);break e}}if(this.P){f=!0;let cn;for(;!this.J&&this.C<W.length;)if(cn=xS(this,W),cn==nd){pt==4&&(this.s=4,Et(14),f=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==Vm){this.s=4,Et(15),qi(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else qi(this.i,this.l,cn,null),sd(this,cn);if(qm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||W.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)qi(this.i,this.l,W,"[Invalid Chunked Response]"),ii(this),oo(this);else if(0<W.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),dd(ft),ft.M=!0,Et(11))}}else qi(this.i,this.l,W,null),sd(this,W);pt==4&&ii(this),this.o&&!this.J&&(pt==4?wg(this.j,this):(this.o=!1,ol(this)))}else US(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),ii(this),oo(this)}}}catch{}finally{}};function qm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function xS(a,h){var f=a.C,y=h.indexOf(`
`,f);return y==-1?nd:(f=Number(h.substring(f,y)),isNaN(f)?Vm:(y+=1,y+f>h.length?nd:(h=h.slice(y,y+f),a.C=y+f,h)))}hr.prototype.cancel=function(){this.J=!0,ii(this)};function ol(a){a.S=Date.now()+a.I,Km(a,a.I)}function Km(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=io(g(a.ba,a),h)}function id(a){a.B&&(l.clearTimeout(a.B),a.B=null)}hr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(_S(this.i,this.A),this.L!=2&&(ro(),Et(17)),ii(this),this.s=2,oo(this)):Km(this,this.S-a)};function oo(a){a.j.G==0||a.J||wg(a.j,a)}function ii(a){id(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Vi(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function sd(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||od(f.h,a))){if(!a.K&&od(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var b=y;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ml(f),fl(f);else break e;ud(f),Et(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=io(g(f.Za,f),6e3));if(1>=Xm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else oi(f,11)}else if((a.K||f.g==a)&&ml(f),!_(h))for(b=f.Da.g.parse(h),h=0;h<b.length;h++){let fe=b[h];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];const ft=fe[3];ft!=null&&(f.la=ft,f.j.info("VER="+f.la));const pt=fe[4];pt!=null&&(f.Aa=pt,f.j.info("SVER="+f.Aa));const Qi=fe[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(y=1.5*Qi,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const cn=a.g;if(cn){const gl=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gl){var A=y.h;A.g||gl.indexOf("spdy")==-1&&gl.indexOf("quic")==-1&&gl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ad(A,A.h),A.h=null))}if(y.D){const hd=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;hd&&(y.ya=hd,ke(y.I,y.D,hd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var W=a;if(y.qa=Sg(y,y.J?y.ia:null,y.W),W.K){Jm(y.h,W);var we=W,lt=y.L;lt&&(we.I=lt),we.B&&(id(we),ol(we)),y.g=W}else vg(y);0<f.i.length&&pl(f)}else fe[0]!="stop"&&fe[0]!="close"||oi(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?oi(f,7):cd(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}ro(4)}catch{}}var SS=class{constructor(a,h){this.g=a,this.map=h}};function Ym(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Xm(a){return a.h?1:a.g?a.g.size:0}function od(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ad(a,h){a.g?a.g.add(h):a.h=h}function Jm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ym.prototype.cancel=function(){if(this.i=Zm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Zm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return R(a.i)}function CS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],f=a.length,y=0;y<f;y++)h.push(a[y]);return h}h=[],f=0;for(y in a)h[f++]=a[y];return h}function IS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const y in a)h[f++]=y;return h}}}function eg(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=IS(a),y=CS(a),b=y.length,A=0;A<b;A++)h.call(void 0,y[A],f&&f[A],a)}var tg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TS(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),b=null;if(0<=y){var A=a[f].substring(0,y);b=a[f].substring(y+1)}else A=a[f];h(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function si(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof si){this.h=a.h,al(this,a.j),this.o=a.o,this.g=a.g,ll(this,a.s),this.l=a.l;var h=a.i,f=new co;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),ng(this,f),this.m=a.m}else a&&(h=String(a).match(tg))?(this.h=!1,al(this,h[1]||"",!0),this.o=ao(h[2]||""),this.g=ao(h[3]||"",!0),ll(this,h[4]),this.l=ao(h[5]||"",!0),ng(this,h[6]||"",!0),this.m=ao(h[7]||"")):(this.h=!1,this.i=new co(null,this.h))}si.prototype.toString=function(){var a=[],h=this.j;h&&a.push(lo(h,rg,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(lo(h,rg,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(lo(f,f.charAt(0)=="/"?RS:NS,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",lo(f,bS)),a.join("")};function $n(a){return new si(a)}function al(a,h,f){a.j=f?ao(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ll(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function ng(a,h,f){h instanceof co?(a.i=h,AS(a.i,a.h)):(f||(h=lo(h,PS)),a.i=new co(h,a.h))}function ke(a,h,f){a.i.set(h,f)}function cl(a){return ke(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ao(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function lo(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,kS),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function kS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var rg=/[#\/\?@]/g,NS=/[#\?:]/g,RS=/[#\?]/g,PS=/[#\?@]/g,bS=/#/g;function co(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function fr(a){a.g||(a.g=new Map,a.h=0,a.i&&TS(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=co.prototype,t.add=function(a,h){fr(this),this.i=null,a=Ki(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function ig(a,h){fr(a),h=Ki(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function sg(a,h){return fr(a),h=Ki(a,h),a.g.has(h)}t.forEach=function(a,h){fr(this),this.g.forEach(function(f,y){f.forEach(function(b){a.call(h,b,y,this)},this)},this)},t.na=function(){fr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let y=0;y<h.length;y++){const b=a[y];for(let A=0;A<b.length;A++)f.push(h[y])}return f},t.V=function(a){fr(this);let h=[];if(typeof a=="string")sg(this,a)&&(h=h.concat(this.g.get(Ki(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return fr(this),this.i=null,a=Ki(this,a),sg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function og(a,h,f){ig(a,h),0<f.length&&(a.i=null,a.g.set(Ki(a,h),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var y=h[f];const A=encodeURIComponent(String(y)),W=this.V(y);for(y=0;y<W.length;y++){var b=A;W[y]!==""&&(b+="="+encodeURIComponent(String(W[y]))),a.push(b)}}return this.i=a.join("&")};function Ki(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function AS(a,h){h&&!a.j&&(fr(a),a.i=null,a.g.forEach(function(f,y){var b=y.toLowerCase();y!=b&&(ig(this,y),og(this,b,f))},a)),a.j=h}function jS(a,h){const f=new so;if(l.Image){const y=new Image;y.onload=k(pr,f,"TestLoadImage: loaded",!0,h,y),y.onerror=k(pr,f,"TestLoadImage: error",!1,h,y),y.onabort=k(pr,f,"TestLoadImage: abort",!1,h,y),y.ontimeout=k(pr,f,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function OS(a,h){const f=new so,y=new AbortController,b=setTimeout(()=>{y.abort(),pr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(A=>{clearTimeout(b),A.ok?pr(f,"TestPingServer: ok",!0,h):pr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),pr(f,"TestPingServer: error",!1,h)})}function pr(a,h,f,y,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),y(f)}catch{}}function DS(){this.g=new mS}function LS(a,h,f){const y=f||"";try{eg(a,function(b,A){let W=b;d(b)&&(W=Yu(b)),h.push(y+A+"="+encodeURIComponent(W))})}catch(b){throw h.push(y+"type="+encodeURIComponent("_badmap")),b}}function ul(a){this.l=a.Ub||null,this.j=a.eb||!1}T(ul,Qu),ul.prototype.g=function(){return new dl(this.l,this.j)},ul.prototype.i=function(a){return function(){return a}}({});function dl(a,h){ne.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(dl,ne),t=dl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ho(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ag(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ag(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?uo(this):ho(this),this.readyState==3&&ag(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,uo(this))},t.Qa=function(a){this.g&&(this.response=a,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ho(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function ho(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function lg(a){let h="";return z(a,function(f,y){h+=y,h+=":",h+=f,h+=`\r
`}),h}function ld(a,h,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=lg(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):ke(a,h,f))}function Ge(a){ne.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ge,ne);var MS=/^https?$/i,FS=["POST","PUT"];t=Ge.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():td.g(),this.v=this.o?Um(this.o):Um(td),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(A){cg(this,A);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var b in y)f.set(b,y[b]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const A of y.keys())f.set(A,y.get(A));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(FS,h,void 0))||y||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[A,W]of f)this.g.setRequestHeader(A,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hg(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){cg(this,A)}};function cg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,ug(a),hl(a)}function ug(a){a.A||(a.A=!0,Ae(a,"complete"),Ae(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ae(this,"complete"),Ae(this,"abort"),hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hl(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dg(this):this.bb())},t.bb=function(){dg(this)};function dg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Hn(a)!=4||a.Z()!=2)){if(a.u&&Hn(a)==4)Hi(a.Ea,0,a);else if(Ae(a,"readystatechange"),Hn(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var y;if(y=W===0){var b=String(a.D).match(tg)[1]||null;!b&&l.self&&l.self.location&&(b=l.self.location.protocol.slice(0,-1)),y=!MS.test(b?b.toLowerCase():"")}f=y}if(f)Ae(a,"complete"),Ae(a,"success");else{a.m=6;try{var A=2<Hn(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",ug(a)}}finally{hl(a)}}}}function hl(a,h){if(a.g){hg(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Ae(a,"ready");try{f.onreadystatechange=y}catch{}}}function hg(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Hn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),pS(h)}};function fg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function US(a){const h={};a=(a.g&&2<=Hn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var f=N(a[y]);const b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const A=h[b]||[];h[b]=A,A.push(f)}E(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fo(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function pg(a){this.Aa=0,this.i=[],this.j=new so,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fo("baseRetryDelayMs",5e3,a),this.cb=fo("retryDelaySeedMs",1e4,a),this.Wa=fo("forwardChannelMaxRetries",2,a),this.wa=fo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ym(a&&a.concurrentRequestLimit),this.Da=new DS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pg.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,y){Et(0),this.W=a,this.H=h||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=Sg(this,null,this.W),pl(this)};function cd(a){if(mg(a),a.G==3){var h=a.U++,f=$n(a.I);if(ke(f,"SID",a.K),ke(f,"RID",h),ke(f,"TYPE","terminate"),po(a,f),h=new hr(a,a.j,h),h.L=2,h.v=cl($n(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=Cg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ol(h)}xg(a)}function fl(a){a.g&&(dd(a),a.g.cancel(),a.g=null)}function mg(a){fl(a),a.u&&(l.clearTimeout(a.u),a.u=null),ml(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function pl(a){if(!Qm(a.h)&&!a.s){a.s=!0;var h=a.Ga;We||q(),B||(We(),B=!0),V.add(h,a),a.B=0}}function zS(a,h){return Xm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=io(g(a.Ga,a,h),Eg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const b=new hr(this,this.j,a);let A=this.o;if(this.S&&(A?(A=v(A),C(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=yg(this,b,h),f=$n(this.I),ke(f,"RID",a),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),po(this,f),A&&(this.O?h="headers="+encodeURIComponent(String(lg(A)))+"&"+h:this.m&&ld(f,this.m,A)),ad(this.h,b),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",h),ke(f,"SID","null"),b.T=!0,rd(b,f,null)):rd(b,f,h),this.G=2}}else this.G==3&&(a?gg(this,a):this.i.length==0||Qm(this.h)||gg(this))};function gg(a,h){var f;h?f=h.l:f=a.U++;const y=$n(a.I);ke(y,"SID",a.K),ke(y,"RID",f),ke(y,"AID",a.T),po(a,y),a.m&&a.o&&ld(y,a.m,a.o),f=new hr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=yg(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ad(a.h,f),rd(f,y,h)}function po(a,h){a.H&&z(a.H,function(f,y){ke(h,y,f)}),a.l&&eg({},function(f,y){ke(h,y,f)})}function yg(a,h,f){f=Math.min(a.i.length,f);var y=a.l?g(a.l.Na,a.l,a):null;e:{var b=a.i;let A=-1;for(;;){const W=["count="+f];A==-1?0<f?(A=b[0].g,W.push("ofs="+A)):A=0:W.push("ofs="+A);let we=!0;for(let lt=0;lt<f;lt++){let fe=b[lt].g;const ft=b[lt].map;if(fe-=A,0>fe)A=Math.max(0,b[lt].g-100),we=!1;else try{LS(ft,W,"req"+fe+"_")}catch{y&&y(ft)}}if(we){y=W.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,y}function vg(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;We||q(),B||(We(),B=!0),V.add(h,a),a.v=0}}function ud(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=io(g(a.Fa,a),Eg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,_g(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=io(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),fl(this),_g(this))};function dd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function _g(a){a.g=new hr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=$n(a.qa);ke(h,"RID","rpc"),ke(h,"SID",a.K),ke(h,"AID",a.T),ke(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ke(h,"TO",a.ja),ke(h,"TYPE","xmlhttp"),po(a,h),a.m&&a.o&&ld(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=cl($n(h)),f.m=null,f.P=!0,Gm(f,a)}t.Za=function(){this.C!=null&&(this.C=null,fl(this),ud(this),Et(19))};function ml(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function wg(a,h){var f=null;if(a.g==h){ml(a),dd(a),a.g=null;var y=2}else if(od(a.h,h))f=h.D,Jm(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var b=a.B;y=Zu(),Ae(y,new Hm(y,f)),pl(a)}else vg(a);else if(b=h.s,b==3||b==0&&0<h.X||!(y==1&&zS(a,h)||y==2&&ud(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),b){case 1:oi(a,5);break;case 4:oi(a,10);break;case 3:oi(a,6);break;default:oi(a,2)}}}function Eg(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function oi(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),y=a.Xa;const b=!y;y=new si(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||al(y,"https"),cl(y),b?jS(y.toString(),f):OS(y.toString(),f)}else Et(2);a.G=0,a.l&&a.l.sa(h),xg(a),mg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function xg(a){if(a.G=0,a.ka=[],a.l){const h=Zm(a.h);(h.length!=0||a.i.length!=0)&&(O(a.ka,h),O(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function Sg(a,h,f){var y=f instanceof si?$n(f):new si(f);if(y.g!="")h&&(y.g=h+"."+y.g),ll(y,y.s);else{var b=l.location;y=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;var A=new si(null);y&&al(A,y),h&&(A.g=h),b&&ll(A,b),f&&(A.l=f),y=A}return f=a.D,h=a.ya,f&&h&&ke(y,f,h),ke(y,"VER",a.la),po(a,y),y}function Cg(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ge(new ul({eb:f})):new Ge(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ig(){}t=Ig.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xt(a,h){ne.call(this),this.g=new pg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Yi(this)}T(Xt,ne),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){cd(this.g)},Xt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Yu(a),a=f);h.i.push(new SS(h.Ya++,a)),h.G==3&&pl(h)},Xt.prototype.N=function(){this.g.l=null,delete this.j,cd(this.g),delete this.g,Xt.aa.N.call(this)};function Tg(a){Xu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}T(Tg,Xu);function kg(){Ju.call(this),this.status=1}T(kg,Ju);function Yi(a){this.g=a}T(Yi,Ig),Yi.prototype.ua=function(){Ae(this.g,"a")},Yi.prototype.ta=function(a){Ae(this.g,new Tg(a))},Yi.prototype.sa=function(a){Ae(this.g,new kg)},Yi.prototype.ra=function(){Ae(this.g,"b")},Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,ed.NO_ERROR=0,ed.TIMEOUT=8,ed.HTTP_ERROR=6,ES.COMPLETE="complete",gS.EventType=no,no.OPEN="a",no.CLOSE="b",no.ERROR="c",no.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha}).apply(typeof Ml<"u"?Ml:typeof self<"u"?self:typeof window<"u"?window:{});const e_="@firebase/firestore",t_="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new _u("@firebase/firestore");function gn(t,...e){if(Bs.logLevel<=me.DEBUG){const n=e.map(bm);Bs.debug(`Firestore (${rl}): ${t}`,...n)}}function y1(t,...e){if(Bs.logLevel<=me.ERROR){const n=e.map(bm);Bs.error(`Firestore (${rl}): ${t}`,...n)}}function Aj(t,...e){if(Bs.logLevel<=me.WARN){const n=e.map(bm);Bs.warn(`Firestore (${rl}): ${t}`,...n)}}function bm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t="Unexpected state"){const e=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: `+t;throw y1(e),new Error(e)}function Jo(t,e){t||Am()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jt extends ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class Oj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Dj{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Jo(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Zo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zo,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{gn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(gn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zo)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(gn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jo(typeof r.accessToken=="string"),new v1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Jo(e===null||typeof e=="string"),new St(e)}}class Lj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Mj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Lj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fj{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,$t(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Jo(this.o===void 0);const r=s=>{s.error!=null&&gn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,gn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{gn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):gn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new n_(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Jo(typeof n.token=="string"),this.R=n.token,new n_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Uj(t){return t.name==="IndexedDbTransactionError"}const Nf="(default)";class Zc{constructor(e,n){this.projectId=e,this.database=n||Nf}static empty(){return new Zc("","")}get isDefaultDatabase(){return this.database===Nf}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r_,ue;(ue=r_||(r_={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new g1([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=1048576;function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-r);i>0&&gn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new jm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new jt(At.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var i_,s_;(s_=i_||(i_={}))._a="default",s_.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new Map;function Wj(t,e,n,r){if(e===!0&&r===!0)throw new jt(At.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Am()}function Gj(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new jt(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vj(t);throw new jt(At.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="firestore.googleapis.com",a_=!0;class l_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new jt(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_1,this.ssl=a_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:a_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bj)throw new jt(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new jt(At.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new jt(At.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new jt(At.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class w1{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new jt(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new jt(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jj;switch(r.type){case"firstParty":return new Mj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new jt(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=o_.get(n);r&&(gn("ComponentProvider","Removing Datastore"),o_.delete(n),r.terminate())}(this),Promise.resolve()}}function qj(t,e,n,r={}){var i;const s=(t=Gj(t,w1))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s.host!==_1&&s.host!==l&&Aj("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:l,ssl:!1,emulatorOptions:r});if(!Vr(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=St.MOCK_USER;else{d=iE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new jt(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new St(p)}t._authCredentials=new Oj(new v1(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="AsyncQueue";class u_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new $j(this,"async_queue_retry"),this.bu=()=>{const r=eh();r&&gn(c_,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const n=eh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=eh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Zo;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Uj(e))throw e;gn(c_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw y1("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const i=jm.createAndSchedule(this,e,n,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&Am()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class Kj extends w1{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new u_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u_(e),this._firestoreClient=void 0,await e}}}function Yj(t,e){const n=typeof t=="object"?t:Fp(),r=typeof t=="string"?t:e||Nf,i=wu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=tE("firestore");s&&qj(i,...s)}return i}(function(e,n=!0){(function(i){rl=i})(Fi),Ii(new Mn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Kj(new Dj(r.getProvider("auth-internal")),new Fj(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new jt(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(d.options.projectId,m)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),jn(e_,t_,e),jn(e_,t_,"esm2017")})();let Gn="Guest",Mo="",Rf=!1;function Qj(t=10){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";const r=new Uint8Array(t);window.crypto.getRandomValues(r);for(let i=0;i<t;i++)n+=e[r[i]%e.length];return n}function E1(){s1(je,async t=>{if(t){Rf=!0;try{const e=t.email.replace(".",",");if(Mo=await Ke(`emailToCompanyDirectory/${e}`),Mo){const n=await Ke(`Companies/${Mo}/users/${e}`);n&&n.name?Gn=n.name:Gn=t.email.split("@")[0]}else Gn=t.email.split("@")[0]}catch(e){console.error("Error fetching username:",e),Gn="User"}}else Gn="Guest",Mo="",Rf=!1})}async function Ke(t){const e=Ra(Aa,t);return q2(e).then(n=>n.exists()?n.val():(console.log(`No data available at path: ${t}`),null)).catch(n=>{throw console.error(`Error getting data at path ${t}:`,n),n})}function Pn(t,e){const n=Ra(Aa,t);return Em(n,e).then(()=>(console.log(`Data successfully saved at path: ${t}`),!0)).catch(r=>{throw console.error(`Error saving data at path ${t}:`,r),r})}async function x1(t,e,n,r){var i=t;if(n&&n!=""){var s=await Ke(`inviteCodes/${n}/companyEmail`);if(s&&s!="")i=s,Pn(`inviteCodes/${n}`,null);else throw console.error("Invalid invite code"),Zn("Invalid invite code","error"),new Error("Invalid invite code")}return pA(je,t,e).then(async o=>{const l=o.user;await yA(l,{displayName:r}),console.log("User account created successfully:",l.uid),Pn(`Companies/${i.replace(".",",")}/users/${t.replace(".",",")}`,{createdAt:new Date().toISOString(),email:t,name:r}),Pn(`emailToCompanyDirectory/${t.replace(".",",")}`,i.replace(".",","));var c=await Ke(`Companies/${i.replace(".",",")}/projects/default`);return c||Pn(`Companies/${i.replace(".",",")}/projects/default`,{name:"default",created:new Date().toISOString()}),window.location.href="/",l}).catch(o=>{const l=o.code,c=o.message;throw console.error(`Failed to create account: ${l} - ${c}`),Zn(c,"error"),o})}function S1(t,e){return mA(je,t,e).then(n=>{const r=n.user;return console.log("User signed in successfully:",r.uid),window.location.href="/",r}).catch(n=>{const r=n.code,i=n.message;throw console.error(`Failed to sign in: ${r} - ${i}`),Zn("Failed to sign in","error"),n})}function Zn(t,e){const n=document.querySelector(".toast");n&&n.remove();const r=document.createElement("div");r.className=`toast toast-${e}`,r.textContent=t,document.body.appendChild(r),requestAnimationFrame(()=>{r.classList.add("show")}),setTimeout(()=>{r.classList.remove("show"),setTimeout(()=>r.remove(),300)},3e3)}const Ro=Object.freeze(Object.defineProperty({__proto__:null,get currentCompanyEmail(){return Mo},get currentUsername(){return Gn},firebaseCreateAccount:x1,firebaseLogin:S1,generateUniqueId:Qj,getFirebaseData:Ke,initUsernameFetcher:E1,get isLoggedIn(){return Rf},saveFirebaseData:Pn,showToast:Zn},Symbol.toStringTag,{value:"Module"})),Xj={apiKey:"AIzaSyDo14yGOxdQDTJ7YfczJReS7UmLPrPvuy8",authDomain:"phraze-d7b77.firebaseapp.com",databaseURL:"https://phraze-d7b77-default-rtdb.firebaseio.com",projectId:"phraze-d7b77",storageBucket:"phraze-d7b77.firebasestorage.app",messagingSenderId:"143602089096",appId:"1:143602089096:web:d078397665ab66ddbdb33d",measurementId:"G-HZEM3PFL6N"},ba=dE(Xj),Aa=cb(ba),je=Pj(ba),Jj=Yj(ba),Pf=Object.freeze(Object.defineProperty({__proto__:null,app:ba,auth:je,database:Aa,default:ba,firestore:Jj},Symbol.toStringTag,{value:"Module"})),C1=D.createContext();function Zj({children:t}){const[e,n]=D.useState(!1);return u.jsx(C1.Provider,{value:{isInsideExtension:e,setIsInsideExtension:n},children:t})}function $u(){return D.useContext(C1)}const eO="/assets/p-a7bbc61a.png";function tO({currentProject:t,onProjectChange:e}){const[n,r]=D.useState(!1),[i,s]=D.useState(!1),{isInsideExtension:o}=$u(),[l,c]=D.useState([]),[d,m]=D.useState(t||"default"),[p,g]=D.useState(null);D.useEffect(()=>{const R=()=>{window.scrollY>20?r(!0):r(!1)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),D.useEffect(()=>{const R=je.onAuthStateChanged(O=>{s(!!O)});return()=>R()},[]),D.useEffect(()=>{const R=async()=>{const I=je.currentUser;if(I){const j=I.email.replace(".",","),L=await Ke(`emailToCompanyDirectory/${j}`);if(g(L),L){const z=await Ke(`Companies/${L}/projects`);c(z?Object.keys(z):["default"])}}};i&&R();let O=null,x=()=>{};return(async()=>{if(!o&&je&&je.currentUser&&je.currentUser.email)try{var I=await Ke(`emailToCompanyDirectory/${je.currentUser.email.replace(".",",")}`);const j=await dn(()=>import("./index.esm-aa2af6a8.js"),[]),{ref:L,onValue:z,off:E}=j,{database:v}=await dn(()=>Promise.resolve().then(()=>Pf),void 0),w=`Companies/${I}/projects`;console.log("[Listener] Setting up listener for path:",w),O=L(v,w);const C=N=>{R()};z(O,C),x=()=>{O&&(console.log("[Listener] Detaching listener from path:",w),E(O,"value",C),O=null)}}catch(j){console.error("[Listener] Error setting up Firebase listener:",j)}})(),()=>{x()}},[i]);const k=R=>{m(R.target.value),e&&e(R.target.value)},T=async()=>{try{const R=new CustomEvent("clearChats");window.dispatchEvent(R),await je.signOut()}catch(R){console.error("Error signing out:",R)}};return o?null:u.jsx("nav",{className:"navbar",style:{backgroundColor:n?"rgb(250, 250, 250)":"rgb(255, 255, 255)",transition:"background-color 0.3s ease"},children:u.jsxs("div",{className:"nav-container",children:[u.jsx("div",{className:"nav-left",children:u.jsx(So,{to:"/",className:"logo",children:u.jsx("img",{src:eO,alt:"Phraze Logo",className:"logo-img"})})}),u.jsxs("div",{className:"nav-center",children:[u.jsx(So,{to:"/",className:"nav-link",children:"Home"}),u.jsx(So,{to:"/features",className:"nav-link",children:"Features"}),u.jsx(So,{to:"/demonstration",className:"nav-link",children:"Demonstration"})]}),u.jsxs("div",{className:"nav-right",style:{display:"flex",alignItems:"center",gap:"12px"},children:[i&&l.length>0&&u.jsxs("div",{children:[u.jsx("span",{children:"Project:"}),u.jsx("select",{id:"projectSelect",value:d,onChange:k,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #ccc",background:"#fff",fontWeight:500,width:"250px"},title:"Select Project",children:l.map(R=>u.jsx("option",{value:R,children:R=="default"?"Default Project":R},R))})]}),u.jsxs("a",{href:"https://chrome.google.com/webstore/detail/your-extension-id",className:"add-to-chrome",children:[u.jsx("i",{className:"fab fa-chrome"}),"Add to Chrome"]}),i?u.jsx("button",{onClick:T,className:"logout-button",style:{padding:"8px 16px",backgroundColor:"rgb(235, 235, 235)",color:"black",borderRadius:"6px",border:"none",fontWeight:"500",transition:"all 0.2s ease",cursor:"pointer"},children:"Logout"}):u.jsx(So,{to:"/auth",id:"login-button",className:"login-button",style:{padding:"8px 16px",backgroundColor:"rgb(235, 235, 235)",color:"black",borderRadius:"6px",textDecoration:"none",fontWeight:"500",transition:"all 0.2s ease",display:"inline-block"},children:"Login"})]})]})})}function nO(){const t=e=>{const n=["hero","platforms","demonstration"];document.querySelector(`.${n[e]}`).scrollIntoView({behavior:"smooth"})};return u.jsxs("div",{className:"timeline-nav",children:[u.jsx("div",{className:"timeline-dot","data-section":"Home",onClick:()=>t(0)}),u.jsx("div",{className:"timeline-dot","data-section":"Essential Tools",onClick:()=>t(1)}),u.jsx("div",{className:"timeline-dot","data-section":"Demonstration",onClick:()=>t(2)})]})}function rO(){const{isInsideExtension:t}=$u();return t?null:u.jsx("footer",{children:u.jsxs("div",{className:"container",children:[u.jsx("div",{className:"footer-grid",children:u.jsxs("div",{className:"footer-col",children:[u.jsx("a",{href:"/pricing",children:"Pricing"}),u.jsx("a",{href:"/documentation",children:"Documentation"}),u.jsx("a",{href:"/contact",children:"Contact"}),u.jsx("a",{href:"/privacy",children:"Privacy Policy"})]})}),u.jsx("div",{className:"footer-bottom",children:u.jsx("p",{children:" 2024 Phraze. All rights reserved."})})]})})}function iO({children:t,currentProject:e,onProjectChange:n}){const r=Mi();return D.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0)},0),r.pathname==="/demonstration"&&(window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0);const i=document.querySelector("main"),s=document.querySelector(".navbar");if(i&&i.classList.add("reveal"),s&&s.classList.add("reveal"),r.pathname==="/"){const o=["hero","platforms","demonstration"],l=document.querySelectorAll(".timeline-dot"),c=()=>{o.forEach((d,m)=>{const p=document.querySelector(`.${d}`);if(p){const g=p.getBoundingClientRect();g.top<=window.innerHeight/2&&g.bottom>=window.innerHeight/2&&(l.forEach(T=>T.classList.remove("active")),l[m].classList.add("active"))}})};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)}},[r]),u.jsxs(u.Fragment,{children:[u.jsx(tO,{currentProject:e,onProjectChange:n}),r.pathname==="/"&&u.jsx(nO,{}),t,u.jsx(rO,{})]})}function sO(){return u.jsxs("div",{className:"preloader",children:[u.jsxs("div",{className:"bubble-container",children:[u.jsx("div",{className:"bubble"}),u.jsx("div",{className:"bubble"}),u.jsx("div",{className:"bubble"}),u.jsx("div",{className:"bubble"})]}),u.jsxs("div",{className:"loader-container",children:[u.jsx("div",{className:"loader",children:u.jsxs("div",{className:"book",children:[u.jsx("div",{className:"page"}),u.jsx("div",{className:"page page2"})]})}),u.jsx("div",{className:"loader-slogan",children:"Highlight. Save. Learn."}),u.jsx("div",{className:"research-credit",children:"A project by HCCG - Human Centered Computing Group"})]})]})}function oO(){return u.jsx("section",{className:"hero",children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"hero-grid",children:[u.jsxs("div",{className:"hero-content",children:[u.jsx("h1",{children:"Annotate AI Models with Interactive Annotations"}),u.jsx("p",{className:"hero-subtitle",children:"Annotate conversations with LLMs to help debug and improve their behavior. Create training data from real interactions to enhance model performance."}),u.jsxs("div",{className:"hero-cta",children:[u.jsxs("a",{href:"#get-started",className:"btn btn-primary btn-large",children:[u.jsx("i",{className:"fas fa-play-circle"}),"Start Annotating"]}),u.jsxs("a",{href:"#demo",className:"btn btn-secondary btn-large",children:[u.jsx("i",{className:"fas fa-desktop"}),"See How It Works"]})]})]}),u.jsx("div",{className:"hero-demo",children:u.jsxs("div",{className:"demo-container",children:[u.jsxs("div",{className:"demo-window chat-window",children:[u.jsxs("div",{className:"demo-header",children:[u.jsxs("div",{className:"demo-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx("div",{className:"demo-title",children:"AI Chat Session"})]}),u.jsxs("div",{className:"demo-content",children:[u.jsx("div",{className:"chat-message user",children:u.jsx("p",{children:"How do I implement a factorial function?"})}),u.jsx("div",{className:"chat-message ai",children:u.jsxs("p",{children:["To calculate the factorial, we need to",u.jsxs("span",{className:"highlight",children:["use a recursive function",u.jsx("span",{className:"highlight-label highlight-method",children:"Technical: Method"})]}),"or",u.jsxs("span",{className:"highlight",children:["implement an iterative loop",u.jsx("span",{className:"highlight-label highlight-feedback",children:"Technical: Feedback"})]}),"that multiplies numbers from 1 to n."]})}),u.jsxs("div",{className:"chat-message ai",children:[u.jsx("p",{children:"Here's a simple implementation in Python:"}),u.jsx("pre",{className:"code-block",children:u.jsx("code",{children:"def factorial(n): if n == 0: return 1 return n * factorial(n-1)"})})]})]})]}),u.jsxs("div",{className:"demo-window popup-window",style:{minHeight:"130px"},children:[u.jsxs("div",{className:"demo-header",children:[u.jsxs("div",{className:"demo-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx("div",{className:"demo-title",children:"Annotation Tools"})]}),u.jsxs("div",{className:"demo-content popup-content",children:[u.jsxs("div",{className:"popup-item active",children:[u.jsx("i",{className:"fas fa-plus"}),u.jsx("span",{children:"Add New Label"})]}),u.jsxs("div",{className:"popup-item",children:[u.jsx("i",{className:"fas fa-camera"}),u.jsx("span",{children:"Take Screenshot"})]})]})]})]})})]})})})}function aO(){return u.jsx("section",{className:"platforms",children:u.jsxs("div",{className:"container",children:[u.jsx("h2",{children:"Essential Tools for LLM Training"}),u.jsxs("div",{className:"features-grid",children:[u.jsxs("div",{className:"feature-card",children:[u.jsxs("div",{className:"feature-header",children:[u.jsx("div",{className:"feature-icon",children:u.jsx("i",{className:"fas fa-tag"})}),u.jsx("h3",{children:"Conversation Annotation"})]}),u.jsxs("div",{className:"feature-content",children:[u.jsx("p",{children:"Label and categorize model responses to identify patterns in behavior and output quality."}),u.jsx("div",{className:"feature-details",children:u.jsxs("div",{className:"feature-points",children:[u.jsxs("div",{className:"feature-point",children:[u.jsx("i",{className:"fas fa-check"}),u.jsx("span",{children:"Capture and label key segments of LLM responses"})]}),u.jsxs("div",{className:"feature-point",children:[u.jsx("i",{className:"fas fa-check"}),u.jsx("span",{children:"Classify replies as helpful, incomplete, or irrelevant"})]})]})})]})]}),u.jsxs("div",{className:"feature-card",children:[u.jsxs("div",{className:"feature-header",children:[u.jsx("div",{className:"feature-icon",children:u.jsx("i",{className:"fas fa-code"})}),u.jsx("h3",{children:"Debug Assistant"})]}),u.jsxs("div",{className:"feature-content",children:[u.jsx("p",{children:"Track and analyze model outputs to understand where and why your LLM needs improvement."}),u.jsx("div",{className:"feature-details",children:u.jsxs("div",{className:"feature-points",children:[u.jsxs("div",{className:"feature-point",children:[u.jsx("i",{className:"fas fa-check"}),u.jsx("span",{children:"Track conversation errors to optimize behavior"})]}),u.jsxs("div",{className:"feature-point",children:[u.jsx("i",{className:"fas fa-check"}),u.jsx("span",{children:"Identify patterns in model failures"})]})]})})]})]}),u.jsxs("div",{className:"feature-card",children:[u.jsxs("div",{className:"feature-header",children:[u.jsx("div",{className:"feature-icon",children:u.jsx("i",{className:"fas fa-database"})}),u.jsx("h3",{children:"Training Data Creation"})]}),u.jsxs("div",{className:"feature-content",children:[u.jsx("p",{children:"Convert annotated conversations into structured training data for model refinement."}),u.jsx("div",{className:"feature-details",children:u.jsxs("div",{className:"feature-points",children:[u.jsxs("div",{className:"feature-point",children:[u.jsx("i",{className:"fas fa-check"}),u.jsx("span",{children:"Create structured datasets for fine-tuning"})]}),u.jsxs("div",{className:"feature-point",children:[u.jsx("i",{className:"fas fa-check"}),u.jsx("span",{children:"Export annotations for model retraining"})]})]})})]})]})]})]})})}function lO(){return u.jsx("section",{className:"demonstration",children:u.jsxs("div",{className:"container",children:[u.jsx("h2",{children:"Demonstration"}),u.jsxs("div",{className:"demo-container",children:[u.jsxs("div",{className:"demo-section",children:[u.jsx("div",{className:"demo-step-container",children:u.jsx("p",{className:"demo-step",children:"Step 1: Highlight any text from any webpage, including conversations with LLMs"})}),u.jsxs("div",{className:"demo-window search-results",children:[u.jsxs("div",{className:"demo-header",children:[u.jsxs("div",{className:"demo-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx("div",{className:"demo-title",children:"Search Results"})]}),u.jsxs("div",{className:"demo-content",children:[u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Understanding Large Language Models: A Technical Overview"}),u.jsxs("p",{children:["Recent advances in ",u.jsx("span",{className:"highlight",children:"transformer architectures"})," have led to significant improvements in natural language processing tasks..."]})]}),u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Optimizing Training Parameters for Better Results"}),u.jsxs("p",{children:["The model's performance heavily depends on ",u.jsx("span",{className:"highlight","data-no-popup":!0,children:"hyperparameter tuning"})," and ",u.jsx("span",{className:"highlight","data-no-popup":!0,children:"proper data preprocessing"})," steps..."]})]}),u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Common Issues in LLM Development"}),u.jsx("p",{children:"Developers often encounter challenges with token limitation constraints and maintaining context across longer conversations..."})]})]})]})]}),u.jsxs("div",{className:"demo-section",children:[u.jsx("div",{className:"demo-step-container",children:u.jsx("p",{className:"demo-step",children:"Step 3: Create labels, codes, and notes in the Phraze app"})}),u.jsxs("div",{className:"demo-window app-interface",children:[u.jsxs("div",{className:"demo-header",children:[u.jsxs("div",{className:"demo-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx("div",{className:"demo-title",children:"Phraze App"})]}),u.jsx("div",{className:"demo-content app-content",children:u.jsxs("div",{className:"annotation-options",children:[u.jsxs("div",{className:"annotation-option",children:[u.jsx("div",{className:"option-icon",children:u.jsx("i",{className:"fas fa-tag"})}),u.jsxs("div",{className:"option-content",children:[u.jsx("h4",{children:"Add Label"}),u.jsx("p",{children:"Create and assign custom labels to categorize your selected text. Choose from predefined labels or create your own."})]})]}),u.jsxs("div",{className:"annotation-option",children:[u.jsx("div",{className:"option-icon",children:u.jsx("i",{className:"fas fa-code"})}),u.jsxs("div",{className:"option-content",children:[u.jsx("h4",{children:"Add Code"}),u.jsx("p",{children:"Add structured codes to analyze and organize your text selections. Use predefined code categories or customize your own."})]})]}),u.jsxs("div",{className:"annotation-option",children:[u.jsx("div",{className:"option-icon",children:u.jsx("i",{className:"fas fa-sticky-note"})}),u.jsxs("div",{className:"option-content",children:[u.jsx("h4",{children:"Note Board"}),u.jsx("p",{children:"Create detailed notes with rich text formatting. Add context, observations, or additional information to your annotations."})]})]}),u.jsxs("div",{className:"annotation-option",children:[u.jsx("div",{className:"option-icon",children:u.jsx("i",{className:"fas fa-microphone"})}),u.jsxs("div",{className:"option-content",children:[u.jsx("h4",{children:"Voice Annotation"}),u.jsx("p",{children:"Record and attach voice notes to your annotations. Perfect for capturing detailed verbal explanations or quick thoughts."})]})]}),u.jsxs("div",{className:"annotation-option",children:[u.jsx("div",{className:"option-icon",children:u.jsx("i",{className:"fas fa-video"})}),u.jsxs("div",{className:"option-content",children:[u.jsx("h4",{children:"Video Annotation"}),u.jsx("p",{children:"Add video annotations to your selected text. Capture and link visual explanations or demonstrations to your annotations."})]})]})]})})]})]}),u.jsxs("div",{className:"demo-section",children:[u.jsx("div",{className:"demo-step-container",children:u.jsx("p",{className:"demo-step",children:"Step 2: Right click to annotate and organize your highlights"})}),u.jsxs("div",{className:"demo-window search-results with-zoom",children:[u.jsxs("div",{className:"demo-header",children:[u.jsxs("div",{className:"demo-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx("div",{className:"demo-title",children:"Annotation Menu"})]}),u.jsxs("div",{className:"demo-content",children:[u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Understanding Large Language Models: A Technical Overview"}),u.jsxs("p",{children:["Recent advances in ",u.jsx("span",{className:"highlight active",children:"transformer architectures"})," have led to significant improvements in natural language processing tasks..."]})]}),u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Optimizing Training Parameters for Better Results"}),u.jsxs("p",{children:["The model's performance heavily depends on ",u.jsx("span",{className:"highlight","data-no-popup":!0,children:"hyperparameter tuning"})," and ",u.jsx("span",{className:"highlight","data-no-popup":!0,children:"proper data preprocessing"})," steps..."]})]}),u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Common Issues in LLM Development"}),u.jsxs("p",{children:["Developers often encounter challenges with ",u.jsx("span",{className:"highlight no-animation",children:"token limitation constraints"})," and maintaining context across longer conversations..."]})]})]}),u.jsxs("div",{className:"context-menu",children:[u.jsxs("div",{className:"popup-item active",children:[u.jsx("i",{className:"fas fa-plus"}),u.jsx("span",{children:"Open Phraze App"})]}),u.jsxs("div",{className:"popup-item",children:[u.jsx("i",{className:"fas fa-camera"}),u.jsx("span",{children:"Take Screenshot"})]})]})]})]}),u.jsxs("div",{className:"demo-section",children:[u.jsx("div",{className:"demo-step-container",children:u.jsx("p",{className:"demo-step",children:"Step 4: Adding Labels and Codes to Your Highlights"})}),u.jsxs("div",{className:"demo-window search-results",children:[u.jsxs("div",{className:"demo-header",children:[u.jsxs("div",{className:"demo-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx("div",{className:"demo-title",children:"Labeled Content"})]}),u.jsxs("div",{className:"demo-content",children:[u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Understanding Large Language Models: A Technical Overview"}),u.jsxs("p",{children:["Recent advances in ",u.jsxs("span",{className:"highlight with-tag",children:[u.jsx("span",{className:"highlight-tag",children:"Label: Underlying Technology"}),"transformer architectures"]})," have led to significant improvements in natural language processing tasks..."]})]}),u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Optimizing Training Parameters for Better Results"}),u.jsxs("p",{children:["The model's performance heavily depends on ",u.jsxs("span",{className:"highlight with-tag",children:[u.jsx("span",{className:"highlight-tag",children:"Label: Arguments"}),"hyperparameter tuning"]})," and ",u.jsxs("span",{className:"highlight with-tag",children:[u.jsx("span",{className:"highlight-tag",children:"Label: Arguments"}),"proper data preprocessing"]})," steps..."]})]}),u.jsxs("div",{className:"search-result",children:[u.jsx("h3",{children:"Common Issues in LLM Development"}),u.jsxs("p",{children:["Developers often encounter challenges with ",u.jsxs("span",{className:"highlight with-tag",children:[u.jsx("span",{className:"highlight-tag",children:"Label: Arguments"}),"token limitation constraints"]})," and maintaining context across longer conversations..."]})]})]})]})]})]})]})})}function cO(){return D.useEffect(()=>{const t=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting?n.target.classList.add("fade-in"):n.target.classList.remove("fade-in")})},{threshold:.2,rootMargin:"-10% 0px"});return document.querySelectorAll(".demo-section").forEach(e=>{t.observe(e)}),()=>{document.querySelectorAll(".demo-section").forEach(e=>{t.unobserve(e)})}},[]),u.jsxs("main",{style:{background:"linear-gradient(to bottom,rgb(255, 255, 255), #f5f5f7 50%, #FAF9F6)"},children:[u.jsx(oO,{}),u.jsx(aO,{}),u.jsx(lO,{})]})}function uO(){D.useEffect(()=>{},[]);const t=["Precision Annotations","Custom Labels","Conversation Analysis","Model Debugging","Training Data Creation","Performance Metrics"],e=["Real-time Feedback","Error Detection","Context Tracking","Response Quality","Pattern Recognition","Behavior Analysis"],n=["Data Export","Model Fine-tuning","Collaborative Tools","Version Control","API Integration","Workflow Automation"],r=l=>[...l,...l],i={position:"relative",overflow:"hidden"},s={position:"absolute",top:0,left:0,width:"10%",height:"100%",background:"linear-gradient(to right, rgb(252,252,250) 0%, rgba(252,252,250,0) 100%)",zIndex:2,pointerEvents:"none"},o={position:"absolute",top:0,right:0,width:"10%",height:"100%",background:"linear-gradient(to left, rgb(252,252,250) 0%, rgba(252,252,250,0) 100%)",zIndex:2,pointerEvents:"none"};return u.jsx("div",{className:"sliding-rectangles-container",style:{background:"transparent"},children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"sliding-row",style:i,children:[u.jsx("div",{style:s}),u.jsx("div",{style:o}),u.jsx("div",{className:"sliding-left",children:r(t).map((l,c)=>u.jsx("div",{className:"sliding-rectangle",style:{background:"rgb(240,240,240)",color:"#444",border:"none",boxShadow:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"400"},children:l},`row1-${c}`))})]}),u.jsxs("div",{className:"sliding-row",style:i,children:[u.jsx("div",{style:s}),u.jsx("div",{style:o}),u.jsx("div",{className:"sliding-right",children:r(e).map((l,c)=>u.jsx("div",{className:"sliding-rectangle",style:{background:"rgb(240,240,240)",color:"#444",border:"none",boxShadow:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"400"},children:l},`row2-${c}`))})]}),u.jsxs("div",{className:"sliding-row",style:i,children:[u.jsx("div",{style:s}),u.jsx("div",{style:o}),u.jsx("div",{className:"sliding-left",children:r(n).map((l,c)=>u.jsx("div",{className:"sliding-rectangle",style:{background:"rgb(240,240,240)",color:"#444",border:"none",boxShadow:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"400"},children:l},`row3-${c}`))})]})]})})}function dO(){D.useEffect(()=>{const t=()=>{document.querySelectorAll(".features-section:not(:first-of-type), .features-section:not(:first-of-type) .feature-card-openai, .demo-window img").forEach(n=>{const r=n.getBoundingClientRect().top,i=window.innerHeight;r<i*.85?n.classList.add("is-visible"):n.classList.remove("is-visible")})};return t(),window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[])}const hO="/assets/pic1-b69618c7.png",fO="/assets/pic3-8bd78b5a.png",pO="/assets/pic4-0c469849.png",mO="/assets/pic5-4f9aadbe.png",gO="/assets/pic7-69a25143.png";function yO(){return dO(),u.jsxs("main",{className:"features-page",style:{background:"linear-gradient(to bottom,rgb(255, 255, 255), #f5f5f7 50%, #FAF9F6)"},children:[u.jsx("section",{className:"features-hero",style:{paddingTop:"120px",background:"transparent"},children:u.jsxs("div",{className:"container",children:[u.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},children:u.jsx("p",{className:"small-text",style:{margin:0},children:"Phraze"})}),u.jsx("h1",{children:"Advanced Features for LLM Development"}),u.jsx("p",{className:"small-text",style:{margin:0,whiteSpace:"nowrap"},children:"Highlight, annotate, and organize text from any webpage or LLM conversation"})]})}),u.jsx(uO,{}),u.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"40px 0"},children:u.jsxs("a",{href:"#",className:"small-text",style:{backgroundColor:"rgb(240,240,240)",borderRadius:"18px",padding:"10px 20px",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",color:"#333",fontWeight:"500",transition:"all 0.3s ease",cursor:"pointer",margin:0},children:["Start now",u.jsx("span",{style:{marginLeft:"8px"},children:""})]})}),u.jsx("section",{className:"features-detailed",style:{background:"transparent",paddingBottom:"0px",marginBottom:"-100px"},children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"features-section",children:[u.jsx("h2",{children:"Annotation Tools"}),u.jsxs("div",{className:"features-grid-detailed",children:[u.jsxs("div",{className:"feature-card-openai",children:[u.jsx("div",{className:"feature-icon-openai",children:u.jsx("i",{className:"fas fa-highlighter"})}),u.jsxs("div",{className:"feature-content-openai",children:[u.jsx("h3",{children:"Smart Highlighting"}),u.jsx("p",{children:"Highlight and categorize specific parts of LLM responses with custom labels and categories."}),u.jsxs("ul",{className:"feature-list-openai",children:[u.jsx("li",{children:"Custom label creation"}),u.jsx("li",{children:"Hierarchical categorization"}),u.jsx("li",{children:"Bulk annotation tools"}),u.jsx("li",{children:"Keyboard shortcuts"})]})]})]}),u.jsxs("div",{className:"feature-card-openai",children:[u.jsx("div",{className:"feature-icon-openai",children:u.jsx("i",{className:"fas fa-comments"})}),u.jsxs("div",{className:"feature-content-openai",children:[u.jsx("h3",{children:"Conversation Analysis"}),u.jsx("p",{children:"Deep dive into conversation patterns and model behavior with advanced analytics."}),u.jsxs("ul",{className:"feature-list-openai",children:[u.jsx("li",{children:"Response time analysis"}),u.jsx("li",{children:"Context retention metrics"}),u.jsx("li",{children:"Topic drift detection"}),u.jsx("li",{children:"Sentiment tracking"})]})]})]}),u.jsxs("div",{className:"feature-card-openai",children:[u.jsx("div",{className:"feature-icon-openai",children:u.jsx("i",{className:"fas fa-chart-line"})}),u.jsxs("div",{className:"feature-content-openai",children:[u.jsx("h3",{children:"Performance Metrics"}),u.jsx("p",{children:"Track and visualize your model's performance across different dimensions."}),u.jsxs("ul",{className:"feature-list-openai",children:[u.jsx("li",{children:"Accuracy metrics"}),u.jsx("li",{children:"Response consistency"}),u.jsx("li",{children:"Custom KPI tracking"}),u.jsx("li",{children:"Trend analysis"})]})]})]})]})]}),u.jsx("div",{className:"features-section collaboration-section",style:{marginTop:"120px",paddingBottom:"80px",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"80px",alignItems:"center"},children:[u.jsxs("div",{className:"feature-content-openai",style:{maxWidth:"560px"},children:[u.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"24px",color:"#202123",letterSpacing:"-0.03em",lineHeight:"1.2",fontWeight:"600"},children:"Organize and Access Your Conversations Using Separated Projects"}),u.jsx("p",{style:{fontSize:"1.125rem",lineHeight:"1.6",color:"#353740",marginBottom:"32px",opacity:"0.9"},children:"Stay organized by creating individual projects for each set of annotations. Each project keeps its own notes, history, comments, and highlights, allowing for easy access and management of your work."}),u.jsxs("div",{className:"feature-list-container",style:{display:"grid",gap:"24px",marginTop:"40px"},children:[u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-folder-open"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Organized Workspaces"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Create projects to keep related annotations, feedback, and notes together in one place."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-sliders-h"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Tailored Projects"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Customize each project to fit your specific needs, making it easier to stay focused and efficient."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-history"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Annotation History"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Track every change and update within each project, so you can see how things have evolved over time."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-comment-dots"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Comments and Highlights"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Leave comments and highlights specific to each project, helping you keep your thoughts clear and organized."})]})]})]})]}),u.jsxs("div",{style:{position:"relative",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",background:"#fff",transition:"transform 0.3s ease, box-shadow 0.3s ease"},children:[u.jsx("img",{src:fO,alt:"Project organization interface",style:{width:"100%",height:"auto",display:"block",borderRadius:"16px"}}),u.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, rgba(255,255,255,0) 80%, rgba(255,255,255,0.1))",pointerEvents:"none",borderRadius:"16px"}})]})]})}),u.jsx("div",{className:"features-section collaboration-section",style:{marginTop:"120px",paddingBottom:"80px",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"80px",alignItems:"center"},children:[u.jsxs("div",{className:"feature-content-openai",style:{maxWidth:"560px"},children:[u.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"24px",color:"#202123",letterSpacing:"-0.03em",lineHeight:"1.2",fontWeight:"600"},children:"Real-Time Collaboration with AI-Powered Insights"}),u.jsx("p",{style:{fontSize:"1.125rem",lineHeight:"1.6",color:"#353740",marginBottom:"32px",opacity:"0.9"},children:"Enhance your annotation workflow with role-based collaboration, enabling multiple users to discuss, suggest, and refine labels, codes, and notes in real time. Designed for efficiency, this feature streamlines the decision-making process and improves annotation quality."}),u.jsxs("div",{className:"feature-list-container",style:{display:"grid",gap:"24px",marginTop:"40px"},children:[u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-users"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Role-Based Access"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Assign roles such as Admin, Reviewer, or Contributor to manage permissions for suggesting, editing, and approving annotations."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-comments"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Live Discussions"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Team members can add comments and provide feedback directly within the annotation process."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-robot"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"AI-Powered Suggestions"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Generate smart label recommendations and message refinements with a single click."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-check-circle"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Instant Approval Workflow"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Easily review, approve, or modify suggestions for seamless annotation management."})]})]})]})]}),u.jsxs("div",{style:{position:"relative",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",background:"#fff",transition:"transform 0.3s ease, box-shadow 0.3s ease"},children:[u.jsx("img",{src:hO,alt:"Real-time collaboration interface",style:{width:"100%",height:"auto",display:"block",borderRadius:"16px"}}),u.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, rgba(255,255,255,0) 80%, rgba(255,255,255,0.1))",pointerEvents:"none",borderRadius:"16px"}})]})]})}),u.jsx("div",{className:"features-section collaboration-section",style:{marginTop:"120px",paddingBottom:"80px",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"80px",alignItems:"center"},children:[u.jsxs("div",{className:"feature-content-openai",style:{maxWidth:"560px"},children:[u.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"24px",color:"#202123",letterSpacing:"-0.03em",lineHeight:"1.2",fontWeight:"600"},children:"Manual Logging: Capture and Annotate Key Interactions"}),u.jsx("p",{style:{fontSize:"1.125rem",lineHeight:"1.6",color:"#353740",marginBottom:"32px",opacity:"0.9"},children:"Some interactions may not be automatically recorded, but they are still essential for analysis. Manual Logging enables users to capture screenshots of conversations or text and manually annotate them, ensuring no critical insights are overlooked."}),u.jsxs("div",{className:"feature-list-container",style:{display:"grid",gap:"24px",marginTop:"40px"},children:[u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-tags"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Customizable Annotations"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Add labels, notes, and codes to any manually captured text."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-clipboard-list"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Detailed Documentation"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Maintain a structured record of key discussions and decisions."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-sync-alt"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Seamless Review Process"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Easily reference past interactions for improved collaboration and training."})]})]})]})]}),u.jsxs("div",{style:{position:"relative",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",background:"#fff",transition:"transform 0.3s ease, box-shadow 0.3s ease"},children:[u.jsx("img",{src:pO,alt:"Manual logging interface",style:{width:"100%",height:"auto",display:"block",borderRadius:"16px"}}),u.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, rgba(255,255,255,0) 80%, rgba(255,255,255,0.1))",pointerEvents:"none",borderRadius:"16px"}})]})]})}),u.jsx("div",{className:"features-section collaboration-section",style:{marginTop:"120px",paddingBottom:"80px",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"80px",alignItems:"center"},children:[u.jsxs("div",{className:"feature-content-openai",style:{maxWidth:"560px"},children:[u.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"24px",color:"#202123",letterSpacing:"-0.03em",lineHeight:"1.2",fontWeight:"600"},children:"Effortless Data Import & Export"}),u.jsx("p",{style:{fontSize:"1.125rem",lineHeight:"1.6",color:"#353740",marginBottom:"32px",opacity:"0.9"},children:"Seamlessly manage your annotation history with flexible import and export options. Whether you're collaborating with a team or integrating annotations into your workflows, our system ensures smooth data handling."}),u.jsxs("div",{className:"feature-list-container",style:{display:"grid",gap:"24px",marginTop:"40px"},children:[u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-file-export"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Export with Ease"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Download your annotation history as a structured JSON file for backup, sharing, or further processing."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-share-alt"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Multiple Transfer Options"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Get your JSON file via QR code, email, or direct copy, making it easy to share and migrate data."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-file-import"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Simple Importing"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Re-upload your JSON file to restore annotations instantly, ensuring continuity and efficiency."})]})]})]})]}),u.jsxs("div",{style:{position:"relative",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",background:"#fff",transition:"transform 0.3s ease, box-shadow 0.3s ease"},children:[u.jsx("img",{src:mO,alt:"Data import and export interface",style:{width:"100%",height:"auto",display:"block",borderRadius:"16px"}}),u.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, rgba(255,255,255,0) 80%, rgba(255,255,255,0.1))",pointerEvents:"none",borderRadius:"16px"}})]})]})}),u.jsx("div",{className:"features-section collaboration-section",style:{marginTop:"120px",paddingBottom:"80px"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"80px",alignItems:"center"},children:[u.jsxs("div",{className:"feature-content-openai",style:{maxWidth:"560px"},children:[u.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"24px",color:"#202123",letterSpacing:"-0.03em",lineHeight:"1.2",fontWeight:"600"},children:"Track & Share Your Annotations with Ease"}),u.jsx("p",{style:{fontSize:"1.125rem",lineHeight:"1.6",color:"#353740",marginBottom:"32px",opacity:"0.9"},children:"Stay on top of your work with interactive graphs that help you understand your annotation patterns. Whether you're analyzing trends or sharing insights, this feature makes it simple."}),u.jsxs("div",{className:"feature-list-container",style:{display:"grid",gap:"24px",marginTop:"40px"},children:[u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-chart-bar"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"See Your Progress"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Get a visual breakdown of your labels and codes, making it easier to track how your annotations evolve over time."})]})]}),u.jsxs("div",{className:"feature-item",style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[u.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(148, 163, 184, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",fontSize:"1rem",flexShrink:0},children:u.jsx("i",{className:"fas fa-share"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#202123",marginBottom:"8px"},children:"Effortless Sharing"}),u.jsx("p",{style:{fontSize:"1rem",color:"#6e6e80",lineHeight:"1.6"},children:"Instantly create a view-only link to share your entire annotation history. Anyone with the link can explore and filter your annotationsno edits, just insights."})]})]})]})]}),u.jsxs("div",{style:{position:"relative",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",background:"#fff",transition:"transform 0.3s ease, box-shadow 0.3s ease"},children:[u.jsx("img",{src:gO,alt:"Annotation tracking and sharing interface",style:{width:"100%",height:"auto",display:"block",borderRadius:"16px"}}),u.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, rgba(255,255,255,0) 80%, rgba(255,255,255,0.1))",pointerEvents:"none",borderRadius:"16px"}})]})]})})]})})]})}function vO(){const[t,e]=D.useState("loginForm"),[n,r]=D.useState(""),[i,s]=D.useState(""),[o,l]=D.useState(""),[c,d]=D.useState(""),[m,p]=D.useState(""),[g,k]=D.useState(""),T=async R=>{R.preventDefault(),k("");try{if(t=="loginForm")await S1(n,i);else if(t=="signupForm"){if(i!==c){k("Passwords do not match");return}const O=await x1(n,i,m,o);window.alert("Account created successfully! Page is reloading...")}else t=="forgotPasswordForm"&&(await fA(je,n),Zn("Password reset email sent! Please check your inbox.","success"),e("loginForm"))}catch(O){k(O.message||"An error occurred during authentication"),console.error(O)}};return u.jsxs("div",{className:"auth-container",children:[u.jsxs("div",{className:"auth-hero",children:[u.jsx("div",{className:"grid-pattern"}),u.jsxs("div",{className:"auth-hero-content",children:[u.jsx("div",{className:"auth-logo",children:"Phraze"}),u.jsx("h1",{children:"Develop better language models"}),u.jsx("p",{children:"Powerful tools for annotating, analyzing, and improving LLM conversations. Create high-quality training data from real user interactions."}),u.jsxs("div",{className:"auth-features",children:[u.jsxs("div",{className:"auth-feature",children:[u.jsx("div",{className:"feature-icon",children:u.jsx("i",{className:"fas fa-check"})}),u.jsx("div",{className:"feature-text",children:"Annotate conversations with custom labels and categories"})]}),u.jsxs("div",{className:"auth-feature",children:[u.jsx("div",{className:"feature-icon",children:u.jsx("i",{className:"fas fa-check"})}),u.jsx("div",{className:"feature-text",children:"Track model performance with comprehensive analytics"})]}),u.jsxs("div",{className:"auth-feature",children:[u.jsx("div",{className:"feature-icon",children:u.jsx("i",{className:"fas fa-check"})}),u.jsx("div",{className:"feature-text",children:"Export structured data for model fine-tuning"})]})]})]})]}),u.jsx("div",{className:"auth-form-container",children:u.jsxs("div",{className:"auth-card",children:[u.jsxs("div",{className:"auth-header",children:[u.jsx("h2",{children:(()=>{switch(t){case"loginForm":return"Sign in to Phraze";case"signupForm":return"Create your account";case"forgotPasswordForm":return"Reset your password"}})()}),u.jsxs("p",{children:[(t=="loginForm",""),(()=>{switch(t){case"loginForm":return"Welcome back";case"signupForm":return"Start improving your LLMs today";case"forgotPasswordForm":return"Send a reset email"}})()]})]}),u.jsxs("div",{className:"auth-toggle",children:[u.jsx("button",{className:`toggle-btn ${t=="loginForm"?"active":""}`,onClick:()=>e("loginForm"),children:"Sign in"}),u.jsx("button",{className:`toggle-btn ${t=="signupForm"?"active":""}`,onClick:()=>e("signupForm"),children:"Sign up"})]}),g&&u.jsx("div",{className:"auth-error",children:g}),u.jsxs("form",{className:"auth-form",onSubmit:T,children:[t=="signupForm"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Invite Code"}),u.jsx("input",{type:"text",id:"invite-code",placeholder:"Invite Code (Optional)",value:m,onChange:R=>p(R.target.value)})]}),t=="signupForm"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Name"}),u.jsx("input",{type:"text",placeholder:"Enter your name",value:o,onChange:R=>l(R.target.value),required:t=="signupForm"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Email address"}),u.jsx("input",{type:"email",placeholder:"Enter your email",value:n,onChange:R=>r(R.target.value),required:!0})]}),t!="forgotPasswordForm"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",placeholder:"Enter your password",value:i,onChange:R=>s(R.target.value),required:!0})]}),t=="signupForm"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Confirm password"}),u.jsx("input",{type:"password",placeholder:"Confirm your password",value:c,onChange:R=>d(R.target.value),required:t=="signupForm"})]}),t=="loginForm"&&u.jsx("div",{id:"forgot-password",style:{cursor:"pointer",color:" #72A1FA",marginTop:"-15px",fontSize:"12pt",marginLeft:"13px"},onClick:()=>e("forgotPasswordForm"),children:"Forgot password?"}),u.jsx("button",{type:"submit",className:"auth-submit",children:(()=>{switch(t){case"loginForm":return"Sign in";case"signupForm":return"Create account";case"forgotPasswordForm":return"Send password reset email";default:return"Submit"}})()})]}),t!="forgotPasswordForm"&&u.jsx("div",{className:"auth-footer",children:u.jsxs("p",{children:[t=="loginForm"?"Don't have an account? ":"Already have an account? ",u.jsx("button",{className:"toggle-link",onClick:()=>e(t=="loginForm"?"signupForm":"loginForm"),children:t=="loginForm"?"Sign up":"Sign in"})]})})]})})]})}function _O({onChatSelect:t,isCollapsed:e,setIsCollapsed:n,currentProject:r}){const[i,s]=D.useState(Gn),[o,l]=D.useState(!1),[c,d]=D.useState([]),[m,p]=D.useState([]),[g,k]=D.useState(""),[T,R]=D.useState(null),[O,x]=D.useState(""),[_,I]=D.useState(!1),[j,L]=D.useState(""),[z,E]=D.useState([]),v=jp(),w=Mi(),{isInsideExtension:C}=$u();D.useEffect(()=>{E1();const F=setInterval(()=>{Gn!==i&&s(Gn)},1e3),$=s1(je,async _e=>{if(_e){l(!0);try{const Te=_e.email.replace(".",","),Pe=await Ke(`emailToCompanyDirectory/${Te}`);Pe&&(k(Pe),N(Pe))}catch(Te){console.error("Error fetching company email:",Te)}}else l(!1),d([])}),ce=new URLSearchParams(w.search).get("share");return ce&&P(ce),S(),()=>{clearInterval(F),$()}},[i,w.search,r]);const N=F=>{const $=Ra(Aa,`Companies/${F}/projects/${r}/groqChats`);Nx($,se=>{if(se.exists()){const ce=se.val(),_e=Object.entries(ce).map(([Te,Pe])=>({id:Te,title:Pe.title||"Untitled Chat",timestamp:Pe.timestamp||Date.now(),...Pe})).sort((Te,Pe)=>Pe.timestamp-Te.timestamp);d(_e)}else d([])})},P=async F=>{try{const $=await Ke(`sharedChats/${F}`);if($){const se=JSON.parse(localStorage.getItem("accessedSharedChats")||"[]");se.includes(F)||(se.push(F),localStorage.setItem("accessedSharedChats",JSON.stringify(se)));const ce={...$,id:F,isShared:!0};p(_e=>_e.some(Pe=>Pe.id===F)?_e:[..._e,ce].sort((Pe,ni)=>ni.timestamp-Pe.timestamp)),t&&typeof t=="function"&&t(ce),v("/demonstration",{replace:!0})}}catch($){console.error("Error loading shared chat:",$)}},S=async()=>{try{const F=JSON.parse(localStorage.getItem("accessedSharedChats")||"[]");if(F.length===0)return;const $=[];for(const se of F){const ce=await Ke(`sharedChats/${se}`);ce&&$.push({...ce,id:se,isShared:!0})}$.length>0&&p($.sort((se,ce)=>ce.timestamp-se.timestamp))}catch(F){console.error("Error loading all shared chats:",F)}},Le=async()=>{if(!o||!g){console.error("User is not logged in or company email not found");return}const F=`chat_${Date.now()}`,$={title:"New Chat",timestamp:Date.now(),messages:[]};try{await Pn(`Companies/${g}/projects/${r}/groqChats/${F}`,$),t&&typeof t=="function"&&t({id:F,...$})}catch(se){console.error("Error creating new chat:",se)}},Me=(F,$=!1)=>{const ce=($?m:c).find(_e=>_e.id===F);ce&&t&&typeof t=="function"&&t(ce)},Rt=async(F,$)=>{if(F.stopPropagation(),!o||!g){console.error("User is not logged in or company email not found");return}if(window.confirm("Are you sure you want to delete this chat?"))try{const se=Ra(Aa,`Companies/${g}/projects/${r}/groqChats/${$}`);if(await G2(se),c.find(_e=>_e.id===$)&&t&&typeof t=="function")if(c.length>1){const _e=c.find(Te=>Te.id!==$);_e&&t(_e)}else Le()}catch(se){console.error("Error deleting chat:",se)}},We=(F,$,se)=>{F.stopPropagation(),R($),x(se)},B=F=>{x(F.target.value)},V=async(F,$)=>{if(F.preventDefault(),F.stopPropagation(),O.trim()||x("Untitled Chat"),!o||!g){console.error("User is not logged in or company email not found");return}try{await Pn(`Companies/${g}/projects/${r}/groqChats/${$}/title`,O.trim());const se=c.find(ce=>ce.id===$);if(se&&t&&typeof t=="function"){const ce={...se,title:O.trim()};t(ce)}R(null)}catch(se){console.error("Error renaming chat:",se)}},q=(F,$)=>{F.key==="Enter"?V(F,$):F.key==="Escape"&&R(null)},ie=(F,$)=>{V(F,$)},ae=F=>{L(F.target.value),le(F.target.value)},le=F=>{if(!F.trim()){E([]);return}const $=F.toLowerCase(),se=[...c,...m].filter(ce=>{const _e=ce.title.toLowerCase().includes($);let Te=!1;return ce.messages&&Array.isArray(ce.messages)&&(Te=ce.messages.some(Pe=>Pe.content&&Pe.content.toLowerCase().includes($))),_e||Te});E(se)},ht=()=>{L(""),E([]),I(!1)},et=()=>{I(!_),_||(L(""),E([]))},at=(F,$)=>{if(F.stopPropagation(),window.confirm("Remove this shared chat from your list? This won't delete it completely."))try{const ce=JSON.parse(localStorage.getItem("accessedSharedChats")||"[]").filter(Te=>Te!==$);localStorage.setItem("accessedSharedChats",JSON.stringify(ce)),p(Te=>Te.filter(Pe=>Pe.id!==$));const _e=m.find(Te=>Te.id!==$)||c.length>0?c[0]:null;_e&&t&&typeof t=="function"?t(_e):t&&typeof t=="function"&&t(null)}catch(se){console.error("Error removing shared chat:",se)}};return u.jsxs("div",{style:{width:C?e?"60px":"100%":e?"60px":"280px",height:"100vh",background:"#F5F5F5",borderRight:"1px solid rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)"},children:[u.jsx("div",{style:{padding:e?"1rem 0":"1.2rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",background:"#EBEBEB",display:"flex",alignItems:"center",justifyContent:e?"center":"flex-start"},children:!e&&u.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#333333",letterSpacing:"-0.025em"},children:"Phraze"})}),u.jsxs("div",{style:{padding:"1rem",display:"flex",gap:"1rem",justifyContent:"space-between",marginTop:e?"1.5rem":"0"},children:[u.jsx("div",{children:u.jsx("button",{onClick:()=>n(!e),style:{padding:"0.5rem",background:"none",border:"none",color:"#666666",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s",":hover":{color:"#333333"}},children:u.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e?u.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"}):u.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})})}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:Le,disabled:!o,style:{padding:"0.5rem",background:"none",border:"none",color:o?"#666666":"#AAAAAA",display:"flex",alignItems:"center",justifyContent:"center",cursor:o?"pointer":"not-allowed",transition:"all 0.2s",":hover":{color:"#333333"}},children:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("path",{d:"M14 2v6h6"}),u.jsx("path",{d:"M12 18v-6"}),u.jsx("path",{d:"M9 15h6"})]})}),u.jsx("button",{onClick:et,style:{padding:"0.5rem",background:_?"#E0E0E0":"none",border:"none",color:"#666666",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s",borderRadius:"4px",":hover":{color:"#333333",background:"#E0E0E0"}},children:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]})})]})]}),!e&&_&&u.jsx("div",{style:{padding:"0 1rem 1rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",background:"white",borderRadius:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",overflow:"hidden",padding:"0 0.5rem"},children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#666666",marginRight:"0.5rem"},children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]}),u.jsx("input",{type:"text",value:j,onChange:ae,placeholder:"Search chats...",style:{border:"none",padding:"0.75rem 0.5rem 0.75rem 0",outline:"none",width:"100%",fontSize:"0.875rem"},autoFocus:!0}),j&&u.jsx("button",{onClick:ht,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem"},children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#666666"},children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}),!e&&u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"0.5rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o&&c.length>0&&!_&&u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#666",marginBottom:"0.5rem",padding:"0 0.5rem"},children:"YOUR CHATS"}),c.map(F=>u.jsxs("button",{onClick:()=>Me(F.id),style:{padding:"0.875rem",background:"#EBEBEB",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"0.75rem",color:"#333333",textAlign:"left",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",marginBottom:"0.5rem",width:"100%"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",overflow:"hidden",width:"100%"},children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"rgba(0, 0, 0, 0.5)",flexShrink:0},children:u.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),T===F.id?u.jsx("form",{onSubmit:$=>V($,F.id),onClick:$=>$.stopPropagation(),style:{width:"100%"},children:u.jsx("input",{type:"text",value:O,onChange:B,onKeyDown:$=>q($,F.id),onBlur:$=>ie($,F.id),autoFocus:!0,style:{width:"100%",padding:"4px 8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"0.875rem",background:"white"}})}):u.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"text"},onClick:$=>We($,F.id,F.title),title:"Click to edit",children:F.title})]}),u.jsx("button",{onClick:$=>Rt($,F.id),style:{background:"none",border:"none",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666",opacity:.7,cursor:"pointer",borderRadius:"4px",transition:"all 0.2s",flexShrink:0},onMouseOver:$=>$.currentTarget.style.opacity=1,onMouseOut:$=>$.currentTarget.style.opacity=.7,title:"Delete chat",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]},F.id))]}),m.length>0&&!_&&u.jsxs("div",{style:{marginTop:c.length>0?"1.5rem":"0"},children:[u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#666",marginBottom:"0.5rem",padding:"0 0.5rem"},children:"SHARED CHATS"}),m.map(F=>u.jsxs("button",{onClick:()=>Me(F.id,!0),style:{padding:"0.875rem",background:"#EBEBEB",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"0.75rem",color:"#333333",textAlign:"left",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",marginBottom:"0.5rem",width:"100%"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",overflow:"hidden",width:"100%"},children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"rgba(0, 0, 0, 0.5)",flexShrink:0},children:[u.jsx("circle",{cx:"18",cy:"5",r:"3"}),u.jsx("circle",{cx:"6",cy:"12",r:"3"}),u.jsx("circle",{cx:"18",cy:"19",r:"3"}),u.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),u.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),u.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:F.title})]}),u.jsx("button",{onClick:$=>at($,F.id),style:{background:"none",border:"none",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666",opacity:.7,cursor:"pointer",borderRadius:"4px",transition:"all 0.2s",flexShrink:0},onMouseOver:$=>$.currentTarget.style.opacity=1,onMouseOut:$=>$.currentTarget.style.opacity=.7,title:"Remove from list",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},F.id))]}),_&&j&&u.jsx("div",{children:z.length>0?z.map(F=>u.jsxs("button",{onClick:()=>Me(F.id,F.isShared),style:{padding:"0.875rem",background:"#EBEBEB",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"0.75rem",color:"#333333",textAlign:"left",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",marginBottom:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",overflow:"hidden",width:"100%"},children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"rgba(0, 0, 0, 0.5)",flexShrink:0},children:F.isShared?u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"18",cy:"5",r:"3"}),u.jsx("circle",{cx:"6",cy:"12",r:"3"}),u.jsx("circle",{cx:"18",cy:"19",r:"3"}),u.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),u.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}):u.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),u.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[F.title,F.messages&&Array.isArray(F.messages)&&F.messages.some($=>$.content&&$.content.toLowerCase().includes(j.toLowerCase()))&&u.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"0.25rem",fontStyle:"italic"},children:[F.messages.filter($=>$.content&&$.content.toLowerCase().includes(j.toLowerCase())).length," matching messages"]})]})]}),u.jsx("button",{onClick:$=>F.isShared?at($,F.id):Rt($,F.id),style:{background:"none",border:"none",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666",opacity:.7,cursor:"pointer",borderRadius:"4px",transition:"all 0.2s",flexShrink:0},onMouseOver:$=>$.currentTarget.style.opacity=1,onMouseOut:$=>$.currentTarget.style.opacity=.7,title:F.isShared?"Remove from list":"Delete chat",children:F.isShared?u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]},F.id)):u.jsx("div",{style:{textAlign:"center",padding:"2rem 0",color:"#666666",fontSize:"0.875rem"},children:"No matching chats found."})}),(!o||c.length===0&&m.length===0)&&!_&&u.jsx("div",{style:{textAlign:"center",padding:"2rem 0",color:"#666666",fontSize:"0.875rem"},children:o?"No chats yet. Click the new chat button to get started.":"Please log in to see your chats."})]}),u.jsx("div",{style:{borderTop:"1px solid rgba(0, 0, 0, 0.1)",padding:e?"1rem 0":"1rem",background:"#EBEBEB",display:"flex",alignItems:"center",justifyContent:e?"center":"space-between",gap:"0.75rem"},children:!e&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[u.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#E0E0E0",border:"1px solid rgba(0, 0, 0, 0.1)",color:"#333333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"500"},children:i.charAt(0).toUpperCase()}),u.jsx("div",{style:{fontSize:"0.875rem",color:"#333333",fontWeight:"500"},children:i}),u.jsx("div",{style:{fontSize:"0.75rem",color:o?"#4CAF50":"#FF5722",marginLeft:"auto",fontWeight:"500"},children:o?"Online":"Offline"})]})})]})}async function Om(){return!0}var I1="";function Hu(){return I1}function wO(t){I1=t}async function Is(){return"default"}async function ja(t){const e=await Hu(),n=await Is(),r=`Companies/${e}/projects/${n}/highlights`;Pn(r,t)}async function $s(){const t=await Hu();if(!t)throw new Error("No company email found for logged-in user.");const e=await Is(),n=`Companies/${t}/projects/${e}/highlights`;return await Ke(n)}async function EO(t,e,n){if(!e||!n||e==="local"||n==="local")return;const r=e.replace(".",","),i=`Companies/${n}/users/${r}/profileImage`;var s=await Ke(i);s&&(t.src=s,t.style.display="block")}async function xO(){let t=await T1("annotationHistory");t==null&&(t={});var e=Object.values(t);return e.length==0?[]:e[0]?e[0].length==0?[]:JSON.parse(e[0]):[]}async function SO(t){let e=await xO();var n=[];for(var r of e)for(var i of r)i.highlightID&&i.highlightID===t&&n.push(r);return n}async function CO(t){var e={};if(t)for(let n of t)e[n.id]=await SO(n.id);return e}async function T1(t,e=!0){console.warn(`-- callGetItem(key = ${t}) --`);var n=await Hu(),r=await Is(),i=`Companies/${n}/projects/${r}/${t}`,s=await Ke(i);return e&&(t=r+"/"+t),{[t]:s}}function IO(t){return t.replace(/[.#$\/\[\]]/g,"_")}function bf(t,e,n=0){const r=e.querySelector('mark[id="PhrazeHighlight"]');if(!r)return;let i=null;for(let p of r.childNodes)if(p.nodeType===Node.TEXT_NODE){i=p;break}if(!i)return;const s=i.textContent,o=s.indexOf(`
`),l=o===-1?s.length:o,c=document.createRange();c.setStart(i,0),c.setEnd(i,l);const d=c.getBoundingClientRect(),m=t.getBoundingClientRect();t.style.left=`${d.x+d.width/2}px`,t.style.top=`${d.y-(m.height-1)+n}px`}async function TO(t){const n=(await $s()).filter(s=>s.id!==t);if(ja(n),await Om()){const s=await Is();var r=await Hu();const o=`Companies/${r}/projects/${s}/annotationHistory`;var i=await Ke(o);if(i){let l=i;if(typeof l=="string")try{l=JSON.parse(l)}catch(c){console.error("Error parsing annotation history:",c)}if(Array.isArray(l)){const c=l.filter(d=>{const m=d.find(p=>p.highlightID!==void 0);return!m||m.highlightID!==t});Pn(o,JSON.stringify(c)),console.log(`Deleted ${l.length-c.length} annotation entries for highlight: "${t}"`)}else console.warn("Annotation history is not an array:",l)}}else{const s=await Is(),o=await T1("annotationHistory");if(o&&o[`${s}/annotationHistory`]){let l;try{l=JSON.parse(o[`${s}/annotationHistory`])}catch(c){console.error("Error parsing annotation history:",c),l=o[`${s}/annotationHistory`]}if(Array.isArray(l)){const c=l.filter(m=>{const p=m.find(g=>g.highlightID!==void 0);return!p||p.highlightID!==t});let d=await Is();chrome.storage.local.set({[d+"/annotationHistory"]:JSON.stringify(c)}),console.log(`Deleted ${l.length-c.length} annotation entries for highlight: "${t}"`)}else console.warn("Annotation history is not an array:",l)}}}async function kO(t,e){if(await Om()){const r=await $s();let i=!1;const s=r.map(o=>(o.id===t&&(o.notes||(o.notes=[]),o.notes.push(e),i=!0),o));if(!i)throw new Error(`Highlight with id "${t}" not found.`);ja(s)}else{var n=await $s();let r=!1;if(n=n.map(i=>(i.id===t&&(i.notes||(i.notes=[]),i.notes.push(e),r=!0),i)),!r)throw new Error(`Highlight with id "${t}" not found locally.`);await ja(n)}}async function NO(t,e){if(IO(window.location.href),await Om()){const r=await $s();let i=!1;if(r.map(s=>{if(s.id===t&&s.notes){const o=s.notes.indexOf(e);o>-1&&(s.notes.splice(o,1),i=!0)}return s}),!i)throw new Error(`Note "${e}" for highlight "${t}" not found.`);ja(r)}else{var n=await $s();let r=!1;if(n=n.map(i=>{if(i.id===t&&i.notes){const s=i.notes.indexOf(e);s>-1&&(i.notes.splice(s,1),r=!0)}return i}),!r)throw new Error(`Note "${e}" for highlight "${t}" not found locally.`);await ja(n)}}function RO(t){const e=document.createElement("div");e.className="phraze-note-dropdown PhrazeMark";const n=document.createElement("div");n.className="phraze-note-input-container PhrazeMark";const r=document.createElement("input");r.type="text",r.placeholder="Add a note...",n.appendChild(r);const i=document.createElement("button");i.textContent="+",i.className="phraze-dropdown-add-btn PhrazeMark",i.title="Add note to list",n.appendChild(i),e.appendChild(n);const s=document.createElement("ul");s.className="phraze-note-list PhrazeMark",e.appendChild(s);const o=l=>{const c=document.createElement("li"),d=document.createElement("span");d.className="phraze-note-text PhrazeMark",d.textContent=l,c.appendChild(d);const m=document.createElement("button");return m.className="phraze-note-delete-btn PhrazeMark",m.innerHTML="&times;",m.title="Delete note",c.appendChild(m),m.addEventListener("click",async p=>{p.stopPropagation();try{await NO(t.id,l),c.remove();const g=t.notes.indexOf(l);g>-1&&t.notes.splice(g,1),console.log("Note deleted successfully")}catch(g){console.error("Failed to delete note:",g),alert(`Failed to delete note: ${g.message}`)}}),c};return t.notes&&Array.isArray(t.notes)&&t.notes.forEach(l=>{s.appendChild(o(l))}),i.addEventListener("click",async l=>{l.preventDefault(),l.stopPropagation();const c=r.value.trim();if(c){const d=document.createElement("li");d.textContent=c;try{await kO(t.id,c),console.log("Note saved successfully to storage"),s.appendChild(o(c)),t.notes||(t.notes=[]),t.notes.push(c),r.value=""}catch(m){console.error("Failed to save note:",m),alert(`Failed to save note: ${m.message}`)}}}),r.addEventListener("keypress",l=>{l.key==="Enter"&&(l.preventDefault(),i.click())}),e}function PO(t){if(t.classList.contains("visible"))t.classList.remove("visible");else{bO(),t.classList.add("visible");const e=t.querySelector('input[type="text"]');e&&e.focus()}}function bO(){document.querySelectorAll(".phraze-note-dropdown.visible").forEach(t=>{t.classList.remove("visible")})}function AO(t){var e="";for(var n of t.childNodes)n.nodeType===Node.TEXT_NODE?e+=n.textContent:LO(n)&&n.tagName==="SPAN"&&(e+=n.childNodes[0].textContent);return e}function jO(){document.querySelectorAll(".phraze-highlight-container").forEach(r=>{const i=r.parentNode;i.replaceChild(document.createTextNode(r.childNodes[0].textContent),r),i.normalize()}),document.querySelectorAll(".phraze-highlight-toolbar").forEach(r=>{r.remove()}),document.querySelectorAll(".PhrazeHighlight-data-preview").forEach(r=>{r.remove()})}function OO(t,e){const n=document.createElement("div");n.className="PhrazeHighlight-data-preview",n.textContent=e;const r=document.createElement("img");r.src="src/images/data-preview-arrow.png",r.style.width="10px",r.style.height="10px",r.style.position="absolute",r.style.left="50%",r.style.bottom="-10px",r.style.transform="translateX(-50%)",n.appendChild(r);function i(){n.textContent.trim()!=""&&(n.style.opacity=1)}function s(){n.style.opacity=0}return t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",s),n}function DO(t,e,n){const r=document.createElement("div");r.className="phraze-highlight-toolbar PhrazeMark ",r.style.position="absolute";const i=document.createElement("button");i.className="phraze-toolbar-btn phraze-toolbar-notes-btn PhrazeMark",i.innerHTML="&#43;",i.title="Add notes",i.addEventListener("click",m=>{m.preventDefault(),m.stopPropagation(),PO(e)});const s=document.createElement("button");s.className="phraze-toolbar-btn phraze-toolbar-delete-btn PhrazeMark",s.innerHTML="&#10005;",s.title="Delete highlight",s.addEventListener("click",async m=>{m.preventDefault(),m.stopPropagation();const p=n;if(p)try{const k=p.querySelector('mark[id="PhrazeHighlight"]');if(!k)return;if(r.remove(),await TO(t.id),p.parentNode){var g=p.parentNode;p.parentNode.insertBefore(document.createTextNode(k.textContent),p),p.remove(),g.normalize()}}catch(k){console.error("Error deleting highlight:",k)}});const o=document.createElement("button");o.className="phraze-toolbar-btn phraze-toolbar-profile-btn PhrazeMark",o.title="Profile";const l=document.createElement("img");l.alt="",o.appendChild(l),t.userEmail&&t.companyEmail?EO(l,t.userEmail,t.companyEmail):l.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23999999"><circle cx="12" cy="9" r="5"/><path d="M3,18c0-3,6-4,9-4s9,1,9,4v2H3V18z"/></svg>',r.appendChild(i),r.appendChild(s),r.appendChild(o);const c=document.createElement("div"),d=()=>{requestAnimationFrame(()=>{const m=r.closest(".phraze-highlight-container");m&&bf(r,m)})};return c.addEventListener("mouseenter",d),window.addEventListener("scroll",d),window.addEventListener("resize",d),r}function LO(t){return t&&t.classList&&t.classList.contains("PhrazeMark")}async function MO(){var Me,Rt;jO();var t=await $s()||[];const e=document.createTreeWalker(document.body,NodeFilter.SHOW_ALL,{acceptNode:function(We){return NodeFilter.FILTER_ACCEPT}});for(var n of t)for(var r of t)if(n!=r)for(var i=0;i<r.textNodes.length;){for(var s=0;s<n.textNodes.length;){var o=n.textNodes[s],l=r.textNodes[i];if(o.parentText==l.parentText&&o.wholeText==l.wholeText&&o.elementTag==l.elementTag)for(var c of l.highlightedRanges){var d=!1;for(var m of o.highlightedRanges)if(c[0]==m[0]&&c[1]<=m[1]&&c[2]>=m[2]){n.textNodes.splice(s,1),s-=1,d=!0;break}if(d)break}s+=1}i+=1}var p=new Map;let g=e.currentNode;for(;g;){if(g.nodeType!=Node.TEXT_NODE)for(const We of t)for(const B of We.textNodes){var k=AO(g),T="";if(g.parentNode&&(T=g.parentNode.textContent),g.tagName==B.elementTag&&k==B.wholeText&&T==B.parentText){for(let V of B.highlightedRanges)V.length==3&&V.push(We);p.has(g)?p.set(g,p.get(g).concat(B.highlightedRanges)):p.set(g,B.highlightedRanges)}}g=e.nextNode()}function R(We,B){var V=0;for(const q of We.childNodes)if(q.nodeType==Node.TEXT_NODE){if(V==B)return q;V+=1}return null}let O=await CO(t);for(const[We,B]of p){var x=B.sort((V,q)=>(q[0]-V[0])*1e9+(q[1]-V[1])),_=null;for(const V of x){var I=V[0],j=V[1],L=V[2],z=V[3];if(_){var E=_[0],v=_[1];if(E==I&&v<L&&(L=v,L<=j))continue}var w=R(We,I);if(w){var C=w;if(L<w.textContent.length&&w.splitText(L),j>0&&(C=w.splitText(j)),C.textContent.length>0){const q=document.createElement("span");q.className="phraze-highlight-container PhrazeMark unselectable";const ie=document.createElement("mark");ie.id="PhrazeHighlight",ie.className="PhrazeHighlight PhrazeMark selectable";var N=O[z.id],P="",S="";if(N)for(var Le of N){const at=((Me=Le.find($=>$.type))==null?void 0:Me.type)||"",F=((Rt=Le.find($=>$.options))==null?void 0:Rt.options)||[];at.toLowerCase()=="label"?(P==""?P="Labels: ":P+=" | ",P+=F.join(", ")):at.toLowerCase()=="code"&&(S==""?S="Codes: ":S+=" | ",S+=F.join(", "))}ie.setAttribute("data-preview",P+" "+S),q.appendChild(ie);const ae=RO(z),le=DO(z,ae,q),ht=OO(q,P+" "+S);q.addEventListener("mouseenter",()=>{requestAnimationFrame(()=>{bf(le,q),bf(ht,q,-8)})}),q.addEventListener("click",()=>{le.style.opacity==0?(le.classList.add("active"),le.style.opacity=1,le.style.pointerEvents="auto"):(le.classList.remove("active"),le.style.opacity=0,le.style.pointerEvents="none")});const et=document.createRange();et.selectNode(C),et.surroundContents(ie),et.selectNode(ie),et.surroundContents(q),q.appendChild(ae),document.body.appendChild(le),document.body.appendChild(ht)}}_=V}}window.getSelection().empty()}var k1="";function FO(t){k1=t.replace(".",",")}function il(){return k1}var N1="";function UO(t){N1=t}function zO(){return N1}async function Oa(){return await Ke(`emailToCompanyDirectory/${il()}`)}var Dm="";function BO(t){Dm=t}function Da(){return Dm}let R1=null,P1=null,b1=null,A1=null,eu=null;function $O(t,e,n,r){R1=t,P1=e,b1=n,A1=r}const j1=t=>{var e=Wu(Hs);if(t.key!=e)return;var n=document.getElementById("messages-list");n.innerHTML="";var r=il();let i=t.val()?Object.values(t.val()):[];for(var s of i)n.appendChild(VO(s,r));n&&n.lastChild&&n.lastChild.scrollIntoView(!1),i.length==0&&(n.innerHTML="<span class='messaging-header'>No messages found</span>"),M1=n.innerHTML};function HO(t){eu=R1(A1,t),P1(eu,j1)}function WO(t){eu&&b1(eu,"value",j1)}async function Af(t){bi=t;var e=await Da(),n=document.getElementById("messaging-header-right");if(n){var r="Current Topic: ";if(t=="general")n.innerHTML=`${r}<b>General</b>`;else{var i=await Oa(),e=await Da(),s=await Ke(`Companies/${i}/projects/${e}/${bi.replace("-","/")}/title`);n.innerHTML=`${r}<b>${s}</b>`}}}function O1(t){const e=new Date,n=new Date(e);return n.setDate(n.getDate()-1),t.toDateString()===e.toDateString()?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):t.toDateString()===n.toDateString()?"Yesterday "+t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function VO(t,e){const n=document.createElement("div");n.className="comment-item";const r=t.email===e;r&&n.classList.add("my-comment");const i=t.text;return n.innerHTML=`
        <div class="comment-header">
            <span class="comment-author">${r?"You":t.name}</span>
            <span class="comment-time">${O1(new Date(t.timestamp))}</span>
        </div>
        <div class="comment-text">${i}</div>
    `,n}function Wu(t){t=t.replace(".",",");var e=il(),n="";return t=="everyone"?n="everyone":e<t?n=e+"-"+t:n=t+"-"+e,n}async function d_(t){try{if(Hs=="")return;var r=await Oa(),e=await il(),n=await zO();const o={text:t,email:e,name:n,timestamp:new Date().toISOString()};var r=await Oa(),i=await Da(),s=await Wu(Hs);await Pn(`Companies/${r}/securedProjects/${i}/messages/${bi}/${s}/${Date.now()}`,o),await Lm()}catch(o){console.error("Error posting message:",o),alert("Failed to post message. Please try again.")}}var Fl="";async function Lm(){if(Hs==""||bi=="")return;var t=await Oa(),e=await Da(),n=await Wu(Hs),r=`Companies/${t}/securedProjects/${e}/messages/${bi}/${n}`;let i=document.getElementById("messages-list");r==Fl?i.innerHTML=M1:(Fl!=""&&WO(),Fl=r,HO(Fl)),document.getElementById("contact-img").src=D1,document.getElementById("contact-img-name").innerHTML=L1}var Hs="",D1="",L1="",M1="";async function GO(t,e,n){let r=document.getElementById("messages-list");r.innerHTML="",Hs=t.replace(".",","),D1=e,L1=n.replace(",","."),document.getElementById("contacts-panel-chooser").style.display="none",document.getElementById("contacts-panel-messages").style.display="flex",await Lm()}function h_(t,e,n,r){const i=document.createElement("button"),s=n||"src/images/default-profile.png",o='font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;';return i.className="contact-btn",i.innerHTML=`
        <img src="${s}" class="contact-avatar" />
        <table style='background-color: unset; border: unset; width: 100%; ${o}'>
            <tr style='height: 40px;'>
                <td style='float: left;'><span class="contact-name">${t.replace(",",".")}</span></td><td class='contact-footer' style='text-align: right;'>${O1(new Date(r.timestamp))}</td>
            </tr>
            <tr style='height: 40px;'>
            <td class='contact-footer' style='text-align: left;'>
            ${r.text}
            </td>
            </tr>
        </table>
    `,i.onclick=()=>GO(e,s,t),i}var Ul=!1;async function th(){if(Ul)return;Ul=!0;const t=document.getElementById("contacts-panel");t.innerHTML="";let e=await Oa(),n=await Da(),r=await Ke(`Companies/${e}/securedProjects/${n}/messages/${bi}/everyone`);r&&r.length>0&&(r=r[0]);var i={timestamp:Date.now(),text:""};if(r!=null){var s=Object.values(r),o=s.length;o>0&&(i=s[o-1])}t.appendChild(h_("Everyone","everyone","src/images/default-group.png",i));const l=await il();var c=await Ke(`Companies/${e}/users`);if(!c){t.innerHTML+='<div class="error">Failed to load contacts.</div>',Ul=!1;return}Object.entries(c).forEach(async([d,m])=>{let p=(m==null?void 0:m.email)||d;p=p.replace(".",",");const g=(m==null?void 0:m.name)||p,k=m==null?void 0:m.profileImage;if(l===p)return;var T={timestamp:Date.now(),text:""},R=await Wu(p);let O=await Ke(`Companies/${e}/securedProjects/${n}/messages/${bi}/${R}`);if(O.length>0&&(O=O[0]),O!=null){var x=Object.values(O),_=x.length;_>0&&(T=x[_-1])}t.appendChild(h_(g,p,k,T))}),Ul=!1}var f_=null,bi="";Af("general");function qO(t){th();const e=document.getElementById("add-message"),n=document.getElementById("new-message");Af(t),n.addEventListener("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}),n.addEventListener("keydown",function(r){if(!(r.key==="Enter"&&r.shiftKey)&&r.key==="Enter"){r.preventDefault();const i=this.value.trim();i&&(d_(i),this.value="",this.style.height="auto")}}),e==null||e.addEventListener("click",function(){const r=n.value.trim();r&&(d_(r),n.value="",n.style.height="auto")}),document.getElementById("messages-back").addEventListener("click",function(){th(),document.getElementById("contacts-panel-chooser").style.display="block",document.getElementById("contacts-panel-messages").style.display="none"}),window.addEventListener("message",async function(r){r.data.action==="activeChat"&&(f_=r.data.id,Dm=r.data.currentProject,Af("groqChats-"+f_),th(),Lm())})}const Zi="0.16.0";let p_=!1,ea,F1,U1,jf,z1,B1,$1,H1,W1;function KO(t,e={auto:!1}){if(p_)throw new Error(`you must \`import 'groq-sdk/shims/${t.kind}'\` before importing anything else from groq-sdk`);if(ea)throw new Error(`can't \`import 'groq-sdk/shims/${t.kind}'\` after \`import 'groq-sdk/shims/${ea}'\``);p_=e.auto,ea=t.kind,F1=t.fetch,t.Request,t.Response,t.Headers,U1=t.FormData,t.Blob,jf=t.File,z1=t.ReadableStream,B1=t.getMultipartRequestOptions,$1=t.getDefaultAgent,H1=t.fileFromPath,W1=t.isFsReadStream}class YO{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function QO({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,l)=>({...l,body:new YO(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:o=>!1}}ea||KO(QO(),{auto:!0});class wn extends Error{}class wt extends wn{constructor(e,n,r,i){super(`${wt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Vu({message:r,cause:Lf(n)});const s=n;return e===400?new G1(e,s,r,i):e===401?new q1(e,s,r,i):e===403?new K1(e,s,r,i):e===404?new Y1(e,s,r,i):e===409?new Q1(e,s,r,i):e===422?new X1(e,s,r,i):e===429?new J1(e,s,r,i):e>=500?new Z1(e,s,r,i):new wt(e,s,r,i)}}class Of extends wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Vu extends wt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class V1 extends Vu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class G1 extends wt{}class q1 extends wt{}class K1 extends wt{}class Y1 extends wt{}class Q1 extends wt{}class X1 extends wt{}class J1 extends wt{}class Z1 extends wt{}class fs{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;const i=new XO;async function*s(){if(!e.body)throw n.abort(),new wn("Attempted to iterate over a response with no body");const l=new Ai,c=m_(e.body);for await(const d of c)for(const m of l.decode(d)){const p=i.decode(m);p&&(yield p)}for(const d of l.flush()){const m=i.decode(d);m&&(yield m)}}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const c of s())if(!l){if(c.data.startsWith("[DONE]")){l=!0;continue}if(c.event===null||c.event==="error"){let d;try{d=JSON.parse(c.data)}catch(m){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),m}if(d&&d.error)throw new wt(d.error.status_code,d.error,d.error.message,void 0);yield d}}l=!0}catch(c){if(c instanceof Error&&c.name==="AbortError")return;throw c}finally{l||n.abort()}}return new fs(o,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const o=new Ai,l=m_(e);for await(const c of l)for(const d of o.decode(c))yield d;for(const c of o.flush())yield c}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const l of i())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||n.abort()}}return new fs(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new fs(()=>i(e),this.controller),new fs(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new z1({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:o}=await n.next();if(o)return i.close();const l=r.encode(JSON.stringify(s)+`
`);i.enqueue(l)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}class XO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=JO(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}class Ai{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let n=this.decodeText(e);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=Ai.NEWLINE_CHARS.has(n[n.length-1]||"");let i=n.split(Ai.NEWLINE_REGEXP);return i.length===1&&!r?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),r||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new wn(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new wn(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new wn("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Ai.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);Ai.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function JO(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}function m_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const eS=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",tS=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Gu(t),Gu=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",ZO=t=>tS(t)||eS(t)||W1(t);async function nS(t,e,n){var i;if(t=await t,tS(t))return t;if(eS(t)){const s=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Gu(s)?[await s.arrayBuffer()]:[s];return new jf(o,e,n)}const r=await eD(t);if(e||(e=nD(t)??"unknown_file"),!(n!=null&&n.type)){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new jf(r,e,n)}async function eD(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Gu(t))e.push(await t.arrayBuffer());else if(rD(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${tD(t)}`);return e}function tD(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function nD(t){var e;return nh(t.name)||nh(t.filename)||((e=nh(t.path))==null?void 0:e.split(/[\\/]/).pop())}const nh=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},rD=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",g_=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Mm=async t=>{const e=await iD(t.body);return B1(e,t)},iD=async t=>{const e=new U1;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Df(e,n,r))),e},Df=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(ZO(n)){const r=await nS(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Df(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Df(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;async function rS(t){var o;const{response:e}=t;if(t.options.stream)return Ts("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):fs.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(o=n==null?void 0:n.split(";")[0])==null?void 0:o.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const l=await e.json();return Ts("response",e.status,e.url,e.headers,l),l}const s=await e.text();return Ts("response",e.status,e.url,e.headers,s),s}class qu extends Promise{constructor(e,n=rS){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new qu(this.responsePromise,async n=>e(await this.parseResponse(n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class sD{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e4,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=rh("maxRetries",n),this.timeout=rh("timeout",r),this.httpAgent=i,this.fetch=s??F1}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...uD(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${yD()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&Gu(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:n,...i,body:s}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var T;e={...e};const{method:r,path:i,query:s,headers:o={}}=e,l=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:g_(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,c=this.calculateContentLength(l),d=this.buildURL(i,s);"timeout"in e&&rh("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const m=e.httpAgent??this.httpAgent??$1(d),p=e.timeout+1e3;typeof((T=m==null?void 0:m.options)==null?void 0:T.timeout)=="number"&&p>(m.options.timeout??0)&&(m.options.timeout=p),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const g=this.buildHeaders({options:e,headers:o,contentLength:c,retryCount:n});return{req:{method:r,...l&&{body:l},headers:g,...m&&{agent:m},signal:e.signal??null},url:d,timeout:e.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const o=this.defaultHeaders(e);return E_(s,o),E_(s,n),g_(e.body)&&ea!=="node"&&delete s["content-type"],zl(o,"x-stainless-retry-count")===void 0&&zl(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),zl(o,"x-stainless-timeout")===void 0&&zl(n,"x-stainless-timeout")===void 0&&e.timeout&&(s["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(s,n),s}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return wt.generate(e,n,r,i)}request(e,n=null){return new qu(this.makeRequest(e,n))}async makeRequest(e,n){var p,g;const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:s,url:o,timeout:l}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(s,{url:o,options:r}),Ts("request",o,r,s.headers),(p=r.signal)!=null&&p.aborted)throw new Of;const c=new AbortController,d=await this.fetchWithTimeout(o,s,l,c).catch(Lf);if(d instanceof Error){if((g=r.signal)!=null&&g.aborted)throw new Of;if(n)return this.retryRequest(r,n);throw d.name==="AbortError"?new V1:new Vu({cause:d})}const m=aD(d.headers);if(!d.ok){if(n&&this.shouldRetry(d)){const _=`retrying, ${n} attempts remaining`;return Ts(`response (error; ${_})`,d.status,o,m),this.retryRequest(r,n,m)}const k=await d.text().catch(_=>Lf(_).message),T=dD(k),R=T?void 0:k;throw Ts(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,d.status,o,m,R),this.makeStatusError(d.status,T,R,m)}return{response:d,options:r,controller:c}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new oD(this,r,e)}buildURL(e,n){const r=fD(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return mD(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new wn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:s,...o}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),c={signal:i.signal,...o};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(l)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const s=r==null?void 0:r["retry-after-ms"];if(s){const l=parseFloat(s);Number.isNaN(l)||(i=l)}const o=r==null?void 0:r["retry-after"];if(o&&!i){const l=parseFloat(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!(i&&0<=i&&i<60*1e3)){const l=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await pD(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return o*l*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Zi}`}}class oD extends qu{constructor(e,n,r){super(n,async i=>new r(e,i.response,await rS(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const aD=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),lD=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":v_(Deno.build.os),"X-Stainless-Arch":y_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":v_(process.platform),"X-Stainless-Arch":y_(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=cD();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function cD(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const y_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",v_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let __;const uD=()=>__??(__=lD()),dD=t=>{try{return JSON.parse(t)}catch{return}},hD=/^[a-z][a-z0-9+.-]*:/i,fD=t=>hD.test(t),pD=t=>new Promise(e=>setTimeout(e,t)),rh=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new wn(`${t} must be an integer`);if(e<0)throw new wn(`${t} must be a positive integer`);return e},Lf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},w_=t=>{var e,n,r,i,s;if(typeof process<"u")return((n=(e=process.env)==null?void 0:e[t])==null?void 0:n.trim())??void 0;if(typeof Deno<"u")return(s=(i=(r=Deno.env)==null?void 0:r.get)==null?void 0:i.call(r,t))==null?void 0:s.trim()};function mD(t){if(!t)return!0;for(const e in t)return!1;return!0}function gD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E_(t,e){for(const n in e){if(!gD(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}function Ts(t,...e){var n;typeof process<"u"&&((n=process==null?void 0:process.env)==null?void 0:n.DEBUG)==="true"&&console.log(`Groq:DEBUG:${t}`,...e)}const yD=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),vD=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",_D=t=>typeof(t==null?void 0:t.get)=="function",zl=(t,e)=>{var r;const n=e.toLowerCase();if(_D(t)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(s,o,l)=>o+l.toUpperCase());for(const s of[e,n,e.toUpperCase(),i]){const o=t.get(s);if(o)return o}}for(const[i,s]of Object.entries(t))if(i.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${e} header, using the first entry.`),s[0]):s};class Bn{constructor(e){this._client=e}}class iS extends Bn{create(e,n){return this._client.post("/openai/v1/audio/transcriptions",Mm({body:e,...n}))}}class sS extends Bn{create(e,n){return this._client.post("/openai/v1/audio/translations",Mm({body:e,...n}))}}class Ku extends Bn{constructor(){super(...arguments),this.transcriptions=new iS(this._client),this.translations=new sS(this._client)}}Ku.Transcriptions=iS;Ku.Translations=sS;class oS extends Bn{create(e,n){return this._client.post("/openai/v1/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/openai/v1/batches/${e}`,n)}list(e){return this._client.get("/openai/v1/batches",e)}}let aS=class extends Bn{create(e,n){return this._client.post("/openai/v1/chat/completions",{body:e,...n,stream:e.stream??!1})}};class Fm extends Bn{constructor(){super(...arguments),this.completions=new aS(this._client)}}Fm.Completions=aS;class lS extends Bn{}class cS extends Bn{create(e,n){return this._client.post("/openai/v1/embeddings",{body:e,...n})}}class uS extends Bn{create(e,n){return this._client.post("/openai/v1/files",Mm({body:e,...n}))}list(e){return this._client.get("/openai/v1/files",e)}delete(e,n){return this._client.delete(`/openai/v1/files/${e}`,n)}content(e,n){return this._client.get(`/openai/v1/files/${e}/content`,n)}info(e,n){return this._client.get(`/openai/v1/files/${e}`,n)}}class dS extends Bn{retrieve(e,n){return this._client.get(`/openai/v1/models/${e}`,n)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,n){return this._client.delete(`/openai/v1/models/${e}`,n)}}var hS;class Ie extends sD{constructor({baseURL:e=w_("GROQ_BASE_URL"),apiKey:n=w_("GROQ_API_KEY"),...r}={}){if(n===void 0)throw new wn("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const i={apiKey:n,...r,baseURL:e||"https://api.groq.com"};if(!i.dangerouslyAllowBrowser&&vD())throw new wn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:i.baseURL,timeout:i.timeout??6e4,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new lS(this),this.chat=new Fm(this),this.embeddings=new cS(this),this.audio=new Ku(this),this.models=new dS(this),this.batches=new oS(this),this.files=new uS(this),this._options=i,this.apiKey=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}hS=Ie;Ie.Groq=hS;Ie.DEFAULT_TIMEOUT=6e4;Ie.GroqError=wn;Ie.APIError=wt;Ie.APIConnectionError=Vu;Ie.APIConnectionTimeoutError=V1;Ie.APIUserAbortError=Of;Ie.NotFoundError=Y1;Ie.ConflictError=Q1;Ie.RateLimitError=J1;Ie.BadRequestError=G1;Ie.AuthenticationError=q1;Ie.InternalServerError=Z1;Ie.PermissionDeniedError=K1;Ie.UnprocessableEntityError=X1;Ie.toFile=nS;Ie.fileFromPath=H1;Ie.Completions=lS;Ie.Chat=Fm;Ie.Embeddings=cS;Ie.Audio=Ku;Ie.Models=dS;Ie.Batches=oS;Ie.Files=uS;const wD=Ie,ED="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",x_="meta-llama/llama-4-scout-17b-16e-instruct",S_=new wD({apiKey:ED,dangerouslyAllowBrowser:!0});function xD(t){return t.replace(/[.#$\/\\\[\\\]]/g,"_")}function SD({onClose:t,onGuestContinue:e}){return u.jsx("div",{className:"auth-modal-overlay",children:u.jsxs("div",{className:"auth-modal",children:[u.jsxs("div",{className:"auth-modal-header",children:[u.jsx("h2",{children:"Sign in to Phraze"}),u.jsx("button",{className:"close-modal-btn",onClick:t,children:""})]}),u.jsxs("div",{className:"auth-modal-content",children:[u.jsx("p",{children:"Sign in to access all features of Phraze, including saving and sharing your annotations."}),u.jsxs("div",{className:"auth-modal-buttons",children:[u.jsx("a",{href:"/auth",className:"auth-modal-signin",children:"Sign In / Sign Up"}),u.jsx("button",{onClick:e,className:"auth-modal-guest",children:"Continue as Guest"})]})]})]})})}function C_({inputValue:t,setInputValue:e,handleSubmit:n,isLoading:r,textareaRef:i,handleImageUpload:s,imagePreview:o,clearImagePreview:l}){const c=D.useRef(null),d=()=>{c.current.click()};return u.jsxs("form",{onSubmit:n,style:{maxWidth:"800px",margin:"0 auto",position:"relative"},children:[o&&u.jsxs("div",{style:{marginBottom:"0.5rem",position:"relative",maxWidth:"200px"},children:[u.jsx("img",{src:o,alt:"Preview",style:{maxWidth:"100%",borderRadius:"0.5rem",border:"1px solid rgba(0,0,0,0.1)"}}),u.jsx("button",{type:"button",onClick:l,style:{position:"absolute",top:"-8px",right:"-8px",background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"12px"},"aria-label":"Remove image",children:""})]}),u.jsxs("div",{style:{display:"flex",alignItems:"flex-end",position:"relative",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"0.75rem",backgroundColor:"#fff",paddingRight:"2.5rem"},children:[u.jsx("button",{type:"button",onClick:d,style:{background:"none",border:"none",cursor:"pointer",padding:"0.75rem 0.5rem",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center"},title:"Upload image",children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),u.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),u.jsx("input",{type:"file",ref:c,onChange:s,accept:"image/*",style:{display:"none"}}),u.jsx("textarea",{ref:i,value:t,onChange:m=>e(m.target.value),onKeyDown:m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),n(m))},placeholder:"Message Phraze...",style:{width:"100%",padding:"0.75rem 0.5rem 0.75rem 0.5rem",border:"none",borderRadius:"0.75rem",fontSize:"1rem",lineHeight:"1.5",resize:"none",maxHeight:"200px",outline:"none",backgroundColor:"#fff",fontFamily:"inherit",overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},rows:1,disabled:r}),u.jsx("button",{type:"submit",style:{display:"none",position:"absolute",right:"0.75rem",bottom:"0.75rem",background:"none",border:"none",cursor:"pointer",opacity:(t.trim()||o)&&!r?1:.5,transition:"opacity 0.2s",padding:"0.25rem"},disabled:!t.trim()&&!o||r,children:u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"1.25rem",height:"1.25rem",transform:"rotate(90deg)",color:"#10a37f"},children:u.jsx("path",{d:"M12 19V5M5 12l7-7 7 7"})})})]})]})}const I_=()=>u.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",color:"#6b7280",marginTop:"0.75rem"},children:"Phraze can make mistakes. Consider checking important information."});function CD({currentProject:t,onProjectChange:e,setCurrentProject:n}){const[r,i]=D.useState([]),[s,o]=D.useState(""),[l,c]=D.useState(!1),[d,m]=D.useState(!1),[p,g]=D.useState(null),[k,T]=D.useState(null),[R,O]=D.useState(""),[x,_]=D.useState(null),[I,j]=D.useState(null),[L,z]=D.useState(!1),[E,v]=D.useState(null),[w,C]=D.useState(null),[N,P]=D.useState(!1),S=D.useRef(null),Le=D.useRef(null),Me=D.useRef(null),Rt=D.useRef({}),[We,B]=D.useState(!1),{isInsideExtension:V,setIsInsideExtension:q}=$u(),[ie,ae]=D.useState(!1),le=Mi();jp(),D.useEffect(()=>{(()=>{!je.currentUser&&!sessionStorage.getItem("guestMode")&&P(!0)})();const K=je.onAuthStateChanged(Y=>{!Y&&!sessionStorage.getItem("guestMode")?P(!0):P(!1)});return()=>K()},[]);const ht=()=>{sessionStorage.setItem("guestMode","true"),P(!1)},et=(H,K)=>{K?Rt.current[H]=K:delete Rt.current[H]};D.useEffect(()=>{r.length>0},[r]),D.useEffect(()=>{$i(t)},[t]),D.useEffect(()=>{const H=new URLSearchParams(le.search),K=H.get("share"),Y=H.get("companyEmail"),oe=H.get("project");K&&Y&&oe&&(console.log("Initial Load: Setting shared view state and loading chat."),z(!0),v(Y),n(oe),Pe(K,Y))},[]),D.useEffect(()=>{const H=()=>{console.log("Clearing chat state..."),i([]),g(null),o(""),$(),T(null),O(""),z(!1),v(null)};function K(Y){Y.data.action=="Show Highlights"?(m(!0),v(Y.data.companyEmail)):Y.data.action=="Show Sidebar"?B(!1):Y.data.action=="Inside Extension"&&($i(Y.data.currentProject),B(!1),q(!0))}return window.addEventListener("message",K),window.addEventListener("clearChats",H),()=>{window.removeEventListener("message",K),window.removeEventListener("clearChats",H)}},[]),D.useEffect(()=>{const H=Le.current;H&&(H.style.height="inherit",H.style.height=`${H.scrollHeight}px`)},[s]);const at=H=>{if(V&&B(!0),g(H),H)if(z(H.originalId!=null),v(H.companyEmail),window.parent.postMessage({action:"activeChat",id:H.id,currentProject:t},"*"),H.originalId){async function K(){if(H.companyEmail){let oe=`Companies/${H.companyEmail}/projects/${t}/groqChats/${H.originalId}/messages`;console.log("AH1",oe);var Y=await Ke(`Companies/${H.companyEmail}/projects/${t}/groqChats/${H.originalId}/messages`);const J=Array.isArray(Y||[])?Y:Object.values(Y);i(J)}}K()}else{const K=Array.isArray(H.messages)?H.messages:Object.values(H.messages);i(K)}else i([])},F=H=>{const K=H.target.files[0];if(!K||!K.type.startsWith("image/"))return;j(K);const Y=new FileReader;Y.onload=oe=>{_(oe.target.result)},Y.readAsDataURL(K)},$=()=>{_(null),j(null)},se=async H=>{if(H.preventDefault(),!s.trim()&&!x||l)return;let K=s,Y="text",oe=null;if(I)try{oe=x,Y="image",s.trim()&&(Y="image_text")}catch(ge){console.error("Error uploading image:",ge);return}const J={role:"user",content:K,type:Y};oe&&(J.imageUrl=oe),i(ge=>[...ge,J]),o(""),$(),c(!0);try{let ge=[];oe||r.some(de=>de.imageUrl)||ge.push({role:"system",content:"You are a helpful assistant called Phraze."});for(const de of r)if(de.role==="user")if(de.imageUrl){const ne=[];de.content.trim()&&ne.push({type:"text",text:de.content}),ne.push({type:"image_url",image_url:{url:de.imageUrl}}),ge.push({role:"user",content:ne})}else ge.push({role:"user",content:de.content});else de.role==="assistant"&&ge.push({role:"assistant",content:de.content});if(oe){const de=[];K.trim()&&de.push({type:"text",text:K}),de.push({type:"image_url",image_url:{url:oe}}),ge.push({role:"user",content:de})}else ge.push({role:"user",content:K});const be={role:"assistant",content:(await S_.chat.completions.create({messages:ge,model:x_,temperature:1,max_completion_tokens:1024,top_p:1,stream:!1,stop:null})).choices[0].message.content},Ve=[...r,J,be];i(Ve),console.log(p);try{dn(()=>Promise.resolve().then(()=>Ro),void 0).then(async de=>{try{const ne=de.saveFirebaseData,Ae=de.getFirebaseData,Ut=de.generateUniqueId||(()=>Date.now().toString()),Hi=je.currentUser;if(Hi&&Hi.email){const to=Hi.email.replace(".",","),ri=await Ae(`emailToCompanyDirectory/${to}`);if(ri){if(!p||!p.id){const ln=Ut(),Wi=J.content.length>30?`${J.content.substring(0,27)}...`:J.content||"Image Chat",Vi={id:ln,title:Wi,timestamp:Date.now(),messages:Ve};await ne(`Companies/${ri}/projects/${t}/groqChats/${ln}`,Vi),g(Vi),console.log("Created new chat:",Vi)}else if(await ne(`Companies/${ri}/projects/${t}/groqChats/${p.id}/messages`,Ve),console.log("Company email path",ri),p.title==="New Chat"){const ln=J.content.length>30?`${J.content.substring(0,27)}...`:J.content||"Image Chat";await ne(`Companies/${ri}/projects/${t}/groqChats/${p.id}/title`,ln),g(Wi=>({...Wi,title:ln}))}}else console.warn("Company email path not found for user:",to)}else console.warn("No authenticated user found or user email missing")}catch(ne){console.error("Error updating Firebase data:",ne)}}).catch(de=>{console.error("Error importing funcs module:",de)})}catch(de){console.error("Error in Firebase update block:",de)}}catch(ge){console.error("Error calling Groq API:",ge),i(Pt=>[...Pt,{role:"assistant",content:"Sorry, I encountered an error while processing your request."}])}finally{c(!1),setTimeout(()=>{var ge;(ge=Le.current)==null||ge.focus()},0)}},ce=(H,K)=>{var Y=document.getElementById("message-content"+H).offsetWidth;Y<300&&(Y=300),T(H),O(K),setTimeout(()=>{Me.current&&(Me.current.focus(),Me.current.style.height="inherit",Me.current.style.height=`${Me.current.scrollHeight}px`,Me.current.style.width=Y+"px")},0)},_e=()=>{T(null),O("")},Te=async H=>{if(R.trim()==="")return;c(!0);const K=r.findIndex((oe,J)=>J>H&&oe.role==="assistant");let Y=[...r];Y[H]={...Y[H],content:R},K!==-1&&(Y=Y.slice(0,K)),i(Y);try{let oe=[];Y.some(be=>be.imageUrl)||oe.push({role:"system",content:"You are a helpful assistant called Phraze."});for(const be of Y)if(be.role==="user")if(be.imageUrl){const Ve=[];be.content.trim()&&Ve.push({type:"text",text:be.content}),Ve.push({type:"image_url",image_url:{url:be.imageUrl}}),oe.push({role:"user",content:Ve})}else oe.push({role:"user",content:be.content});else be.role==="assistant"&&oe.push({role:"assistant",content:be.content});const Pt={role:"assistant",content:(await S_.chat.completions.create({messages:oe,model:x_,temperature:1,max_completion_tokens:1024,top_p:1,stream:!1,stop:null})).choices[0].message.content},Qt=[...Y,Pt];i(Qt),dn(()=>Promise.resolve().then(()=>Ro),void 0).then(async be=>{try{const Ve=be.saveFirebaseData,de=be.getFirebaseData,ne=je.currentUser;if(ne&&ne.email&&p&&p.id){const Ae=ne.email.replace(".",","),Ut=await de(`emailToCompanyDirectory/${Ae}`);Ut&&await Ve(`Companies/${Ut}/projects/${t}/groqChats/${p.id}/messages`,Qt)}}catch(Ve){console.error("Error updating Firebase data:",Ve)}})}catch(oe){console.error("Error calling Groq API:",oe),i(J=>[...J,{role:"assistant",content:"Sorry, I encountered an error while processing your request."}])}finally{c(!1),T(null),O("")}};D.useEffect(()=>{const H=Me.current;H&&(H.style.height="inherit",H.style.height=`${H.scrollHeight}px`)},[R]);const Pe=async(H,K)=>{c(!0);try{const{getFirebaseData:Y}=await dn(()=>Promise.resolve().then(()=>Ro),void 0),oe=`sharedChats/${H}`;console.log("Fetching shared chat from:",oe);const J=await Y(oe);if(J&&K){const ge=Array.isArray(J.messages)?J.messages:Object.values(J.messages||{});g({id:H,title:J.title,timestamp:J.timestamp,originalId:J.originalId,isShared:!0}),i(ge),console.log("Loaded shared chat data:",J),C(J.originalSanitizedUrl||null),console.log("Original sanitized URL:",J.originalSanitizedUrl)}else J||console.error("Shared chat not found for ID:",H),K||console.error("Shared company email not available when loading chat."),Zn("Shared chat or company info not found.","error"),g(null),i([])}catch(Y){console.error("Error loading shared chat:",Y),Zn("Error loading shared chat.","error"),g(null),i([])}finally{c(!1)}};D.useEffect(()=>{let H=null,K=null,Y=()=>{};return(async()=>{if((L||d)&&E)try{const J=await dn(()=>import("./index.esm-aa2af6a8.js"),[]),{ref:ge,onValue:Pt,off:Qt}=J,{database:be}=await dn(()=>Promise.resolve().then(()=>Pf),void 0),Ve=`Companies/${E}/projects/default`;console.log("[Listener] Setting up listener for path:",Ve),H=ge(be,Ve);const de=Ut=>{console.log("Website loading highlights"),wO(E),setTimeout(function(){MO()},1e3)};Pt(H,de);const ne=`Companies/${E}/projects/${t}/groqChats`;console.log("[Listener] Setting up listener for path:",ne),K=ge(be,ne);const Ae=Ut=>{console.log("Website loading chats"),p&&p.originalId&&(Ut.val()?i(Ut.val()[p.originalId].messages):i([]))};Pt(K,Ae),Y=()=>{H&&(console.log("[Listener] Detaching listener from path:",Ve),console.log("[Listener] Detaching listener from path:",ne),Qt(H,"value",de),H=null,Qt(K,"value",Ae),K=null)}}catch(J){console.error("[Listener] Error setting up Firebase listener:",J)}})(),()=>{Y()}},[L,p,E,w,V]);const ni=async H=>{if(!H||!H.id)return;const K=je.currentUser;if(!K||!K.email){Zn("Please log in to share chats","info");return}try{const{generateUniqueId:Y,saveFirebaseData:oe,showToast:J,getFirebaseData:ge}=await dn(()=>Promise.resolve().then(()=>Ro),void 0),Pt=K.email.replace(".",","),Qt=await ge(`emailToCompanyDirectory/${Pt}`);if(!Qt){console.error("Company email path not found for user:",K.email),J("Could not find company information to generate share link.","error");return}const be=window.location.href,Ve=xD(be),de={title:H.title,timestamp:Date.now(),originalId:H.id,originalSanitizedUrl:Ve,companyEmail:Qt,project:t,id:H.id},ne=Y(12);await oe(`sharedChats/${ne}`,de);const Ae=`${window.location.origin}/demonstration?share=${ne}&companyEmail=${encodeURIComponent(Qt)}&project=${encodeURIComponent(t)}`;await navigator.clipboard.writeText(Ae),J("Shareable link copied to clipboard!","success")}catch(Y){console.error("Error sharing chat:",Y);const{showToast:oe}=await dn(()=>Promise.resolve().then(()=>Ro),void 0);oe("Failed to create shareable link","error")}};D.useEffect(()=>{(async()=>{if(!V&&ie&&je&&je.currentUser&&je.currentUser.email){FO(je.currentUser.email),UO(je.currentUser.displayName),BO(t);const Y=await dn(()=>import("./index.esm-aa2af6a8.js"),[]),{database:oe}=await dn(()=>Promise.resolve().then(()=>Pf),void 0),{ref:J,onValue:ge,off:Pt}=Y;$O(J,ge,Pt,oe);var K="general";p&&(K=`groqChats-${p.id}`),qO(K)}})()},[ie]);const $i=H=>{g(null),i([]),ae(!1),n(H)};return u.jsx(u.Fragment,{children:u.jsxs("div",{style:{display:"flex",height:"100vh"},children:[u.jsx(_O,{onChatSelect:at,isCollapsed:We,setIsCollapsed:B,currentProject:t}),u.jsxs("main",{className:"chat-interface",style:{flex:1,display:"flex",flexDirection:"column",background:"rgb(249, 248, 246)",position:"relative"},children:[N&&u.jsx(SD,{onClose:()=>P(!1),onGuestContinue:ht}),p&&p.title&&u.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(0,0,0,0.1)",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[u.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"500"},children:p.title}),r.length>0&&!V&&u.jsxs("button",{onClick:()=>{je.currentUser?ni(p):Zn("Please log in to share chats","info")},style:{position:"absolute",right:"4.5rem",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"4px",color:"#666",transition:"all 0.2s"},title:"Share this chat",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"18",cy:"5",r:"3"}),u.jsx("circle",{cx:"6",cy:"12",r:"3"}),u.jsx("circle",{cx:"18",cy:"19",r:"3"}),u.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),u.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),u.jsx("span",{style:{fontSize:"0.875rem"},children:"Share"})]}),!V&&u.jsx("button",{style:{backgroundColor:"#00000000",border:"none",cursor:"pointer",display:"flex",position:"absolute",right:"1.5rem"},onClick:()=>ae(H=>!H),children:u.jsx("img",{src:"src/images/messages.png",style:{width:"25px",height:"25px",opacity:.5}})})]}),r.length===0&&u.jsxs("div",{style:{position:"absolute",top:"25%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",width:"100%",maxWidth:"800px",padding:"0 2rem"},children:[u.jsx("h1",{style:{fontSize:"2rem",marginTop:"20rem",marginBottom:"1.5rem",color:"#202123"},children:"How can I help you today?"}),u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0 1rem"},children:[u.jsx(C_,{inputValue:s,setInputValue:o,handleSubmit:se,isLoading:l,textareaRef:Le,handleImageUpload:F,imagePreview:x,clearImagePreview:$}),u.jsx(I_,{})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",maxWidth:"600px",margin:"0 auto",marginTop:"2rem"}})]}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem 0",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[r.map((H,K)=>u.jsx("div",{style:{padding:"0 1rem",maxWidth:"800px",margin:"0 auto",width:"100%",display:"flex",justifyContent:H.role==="user"?"flex-end":"flex-start",position:"relative"},children:u.jsx("div",{className:"message-bubble",style:{padding:"1rem",background:H.role==="user"?"#ffffff":"transparent",borderRadius:H.role==="user"?"2rem":"0.5rem",borderBottomRightRadius:H.role==="user"?"5px":"0.5rem",color:"#0A0A0A",display:"inline-block",maxWidth:"85%",position:"relative"},children:H.role==="user"&&k===K?u.jsxs("div",{style:{position:"relative",width:"100%"},children:[u.jsx("textarea",{ref:Me,value:R,onChange:Y=>O(Y.target.value),style:{width:"100%",padding:"0.5rem",border:"none",borderRadius:"0.5rem",fontSize:"1rem",lineHeight:"1.5",resize:"none",outline:"none",fontFamily:"inherit",backgroundColor:"#f9f9f9",boxSizing:"border-box"},rows:1}),u.jsxs("div",{style:{marginTop:"0.5rem",display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[u.jsx("button",{onClick:_e,style:{padding:"0.5rem 0.75rem",background:"rgb(235, 235, 235)",border:"none",borderRadius:"0.25rem",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500"},children:"Cancel"}),u.jsx("button",{onClick:()=>Te(K),style:{padding:"0.5rem 0.75rem",background:"rgb(235, 235, 235)",border:"none",borderRadius:"0.25rem",cursor:"pointer",color:"black",fontSize:"0.75rem",fontWeight:"500"},children:"Save & Update"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{id:"message-content"+K,ref:Y=>et(K,Y),style:{fontSize:"1rem",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:[H.imageUrl&&u.jsx("div",{style:{marginBottom:H.content?"0.75rem":0},children:u.jsx("img",{src:H.imageUrl,alt:"User uploaded",style:{maxWidth:"100%",borderRadius:"0.5rem",maxHeight:"300px"}})}),H.content]}),H.role==="user"&&!k&&u.jsx("div",{className:"message-actions",style:{position:"absolute",left:"-40px",top:"50%",transform:"translateY(-50%)",display:"flex",opacity:0,transition:"opacity 0.2s"},children:u.jsx("button",{onClick:()=>ce(K,H.content),style:{background:"rgba(240, 240, 240, 0.8)",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"50%",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px"},title:"Edit message",children:u.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"2",fill:"none",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})})]})})},K)),l&&u.jsx("div",{style:{padding:"0 1rem",maxWidth:"800px",margin:"0 auto",width:"100%"},children:u.jsx("div",{style:{padding:"1rem",background:"transparent",borderRadius:"0.5rem",color:"#0A0A0A",display:"inline-block"},children:u.jsxs("div",{className:"loading-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]})})}),u.jsx("div",{ref:S})]},p?p.id:"new-chat"),r.length>0&&u.jsxs("div",{style:{borderTop:"1px solid rgba(0,0,0,0.1)",padding:"1.5rem",background:"rgb(249, 248, 246)"},children:[u.jsx(C_,{inputValue:s,setInputValue:o,handleSubmit:se,isLoading:l,textareaRef:Le,handleImageUpload:F,imagePreview:x,clearImagePreview:$}),u.jsx(I_,{})]})]}),u.jsx("div",{id:"contacts-panel-outer",className:"messaging-panel",style:{display:ie?"block":"none",borderRight:0,width:"400px",marginTop:"67px",backgroundColor:"white"},children:u.jsxs("div",{style:{display:"block",width:"100%"},children:[u.jsx("span",{className:"messaging-header",id:"messaging-header-right",children:u.jsx("b",{children:"Choose Contact"})}),u.jsx("div",{id:"contacts-panel-chooser",style:{display:"block",width:"100%"},children:u.jsx("div",{id:"contacts-panel"})}),u.jsxs("div",{id:"contacts-panel-messages",className:"messages-list",style:{display:"none",position:"relative",height:800,paddingBottom:75},children:[u.jsxs("div",{children:[u.jsx("button",{id:"messages-back",className:"back-button",style:{marginTop:0},children:u.jsx("i",{className:"fa-solid fa-angle-left"})}),u.jsxs("div",{style:{position:"absolute",right:"40%",top:13},className:"center-under-img",children:[u.jsx("img",{id:"contact-img",className:"contact-avatar"}),u.jsx("span",{className:"comment-header",style:{color:"black",fontWeight:600},id:"contact-img-name",children:"Name goes here"})]})]}),u.jsx("div",{id:"messages-list",style:{overflow:"scroll",overflowX:"hidden",height:"100%"}}),u.jsx("div",{className:"add-comment-section",style:{position:"absolute",bottom:0,left:0,right:0},children:u.jsx("div",{className:"comment-input-container",children:u.jsxs("div",{className:"comment-input-wrapper",children:[u.jsx("textarea",{id:"new-message",placeholder:"Write a comment...",className:"comment-input",rows:"1",style:{fontFamily:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}}),u.jsx("button",{id:"add-message",className:"comment-button primary",style:{marginRight:13},children:u.jsx("i",{className:"fas fa-arrow-up"})})]})})})]})]})})]})})}const fS=document.createElement("style");fS.innerHTML=`
      .message-actions {
        opacity: 0;
  }
      .message-bubble:hover .message-actions {
        opacity: 1 !important;
  }

      /* Auth Modal Styles */
      .auth-modal-overlay {
        position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
  }

      .auth-modal {
        background-color: white;
      border-radius: 8px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      overflow: hidden;
  }

      .auth-modal-header {
        padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #eee;
  }

      .auth-modal-header h2 {
        margin: 0;
      font-size: 1.5rem;
      font-weight: 600;
  }

      .close-modal-btn {
        background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
  }

      .auth-modal-content {
        padding: 20px;
  }

      .auth-modal-content p {
        margin-bottom: 20px;
      color: #555;
      line-height: 1.5;
  }

      .auth-modal-buttons {
        display: flex;
      flex-direction: column;
      gap: 12px;
  }

      .auth-modal-signin {
        padding: 12px 20px;
      background-color: #10a37f;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      transition: background-color 0.2s;
  }

      .auth-modal-signin:hover {
        background-color: #0d8c6c;
  }

      .auth-modal-guest {
        padding: 12px 20px;
      background-color: transparent;
      color: #555;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
  }

      .auth-modal-guest:hover {
        background-color: #f5f5f5;
  }
      `;document.head.appendChild(fS);function ID(){const[t,e]=D.useState(!0),[n,r]=D.useState("default"),i=s=>{r(s)};return D.useEffect(()=>{const s=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(s)},[]),u.jsx(Zj,{children:u.jsx(hk,{children:t?u.jsx(sO,{}):u.jsx(iO,{currentProject:n,onProjectChange:i,children:u.jsxs(sk,{children:[u.jsx(Oo,{path:"/",element:u.jsx(cO,{})}),u.jsx(Oo,{path:"/features",element:u.jsx(yO,{})}),u.jsx(Oo,{path:"/demonstration",element:u.jsx(CD,{currentProject:n,onProjectChange:i,setCurrentProject:r})}),u.jsx(Oo,{path:"/auth",element:u.jsx(vO,{})})]})})})})}ih.createRoot(document.getElementById("root")).render(u.jsx(L_.StrictMode,{children:u.jsx(ID,{})}));export{bD as $,jD as A,OD as B,DD as C,Ni as D,kD as E,Nx as F,HD as G,WD as H,VD as I,GD as J,ND as K,KD as L,Ra as M,TD as N,V2 as O,G2 as P,In as Q,Cn as R,nL as S,fb as T,eL as U,Em as V,RD as W,PD as X,zD as Y,UD as Z,sL as _,lb as a,Yt as b,Qp as c,Rn as d,Us as e,iL as f,ub as g,rL as h,ZD as i,MD as j,FD as k,qD as l,QD as m,YD as n,q2 as o,cb as p,XD as q,Ax as r,mE as s,JD as t,tL as u,mm as v,BD as w,$D as x,LD as y,AD as z};
